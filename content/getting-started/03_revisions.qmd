---
title: "Quelques exercices de rappels pour se remettre en selle"
title-en: "A few refresher exercises to get back in the saddle"
author: Lino Galiana
description: |
    Un chapitre consacré à divers exercices pour réviser les principes de base de la syntaxe `Python` et des objets utilisés par le langage. 
description-en: |
    A chapter devoted to various exercises to review the basics of Python syntax and the objects used by the language.
echo: false
filters: 
  - live
#filters:
#  - pyodide
---

::: {.content-visible when-format="html"}

:::: {.content-visible when-profile="fr"}
[`Pandas`](http://pandas.pydata.org/) et [`Numpy`](http://www.numpy.org/), les premiers _packages_ de notre parcours initiatique, 
sont essentiels pour manipuler les données. 
Néanmoins, il est nécessaire de ne pas faire l'impasse sur les fondements 
du langage `Python` lorsqu'on découvre ce langage. Une bonne compréhension des éléments structurants du
langage permet de mieux comprendre la logique des packages de _data science_, de mieux comprendre les erreurs rencontrées et entraîne une plus grande productivité et liberté.

Pour découvrir les objets de base et la structure du langage, une série de _notebooks_ est mise à disposition ci-dessous. Le parcours est à la carte, vous pouvez faire ces _notebooks_ dans le désordre ou n'en faire qu'une partie si vous avez de bons souvenirs sur le contenu couvert par certains. 

Après avoir révisé, la suite du parcours se trouve dans la partie ["Manipuler les données"](/content/manipulation/index.qmd)

# Notebooks de révision {.unnumbered}
::::

:::: {.content-visible when-profile="en"}
[`Pandas`](http://pandas.pydata.org/) and [`Numpy`](http://www.numpy.org/), the first _packages_ of our introductory journey, 
are
essential for manipulating data. 
However, it is important not to overlook the fundamentals of the `Python` language when discovering it. A good understanding of the fundamental elements of the language helps to better grasp the logic of _data science_ packages, understand the errors encountered, and results in greater productivity and freedom.

To explore basic objects and the structure of the language, a series of _notebooks_ is provided below. The course is flexible; you can work through these _notebooks_ in any order or only complete parts of them if you are already familiar with some of the content.

After spending some time reviewing your `Python` skills, you can find the next part of the course in the [“Data wrangling”](/content/manipulation/index.qmd) section.

# Review notebooks {.unnumbered}
::::


```{ojs}
await teaserList(listeChapters)
```

```{ojs}
isEnglish = window.location.href.includes("/en/")
lang = (isEnglish) ? "en" : "fr"

textButton = (isEnglish) ? "VSCode" : "VSCode"
textButtonTest = (isEnglish) ? "Try on SSP Cloud" : "Tester sur SSP Cloud"
textButtonRead = (isEnglish) ? "Read" : "Lire"
```

```{ojs}
url = "https://minio.lab.sspcloud.fr/lgaliana/python-ENSAE/inputs/educationalresources.json"
content = d3.json(url)
fondamentaux = content.parts.filter(part => part.name.fr == "Fondamentaux du langage")
listeChapters = fondamentaux[0].parts
```


```{ojs}
function renderTeaser(doc) {
  const { name, abstract, deploymentUrl, articleUrl, tags, authors } = doc;

  const badgeTest = isEnglish
    ? "https://custom-icon-badges.demolab.com/badge/SSP%20Cloud-Try-blue?logo=vsc&logoColor=white"
    : "https://custom-icon-badges.demolab.com/badge/SSP%20Cloud-Tester-blue?logo=vsc&logoColor=white";

  const badgeRead = isEnglish
    ? "https://custom-icon-badges.demolab.com/badge/Read-Online-ffa500?logo=book&logoColor=white"
    : "https://custom-icon-badges.demolab.com/badge/Lire-En%20ligne-ffa500?logo=book&logoColor=white";


  const tagsHTML = tags
    .map((tag) => `<span class="topic" style="margin-right: 8px; border: 2px solid #C4C4C4; border-radius: 5px; width: fit-content;">${tag}</span>`)
    .join("");

  const authorsHTML = authors
    .map((author) => `<span class="author" style="margin-right: 8px;">${author}</span>`)
    .join("");

  const localizedName = (lang === "en") ? name.en : name.fr;
  const localizedDeploymentUrl = (lang === "en") ? deploymentUrl.vscode.en : deploymentUrl.vscode.fr;
  const localizedAbstract = (lang === "en") ? abstract.en : abstract.fr;
  const localizedArticleUrl = (lang === "en") ? articleUrl.en : articleUrl.fr;


  return `
    <div class="gridcard-item">
      <div class="gridcard-body">
        <a class="gridcard-title" href="${localizedDeploymentUrl}">${localizedName}</a>
        ${localizedAbstract ? `<p class="gridcard-description">${localizedAbstract}</p>` : ""}

          <a class="launch-badge"
            href="${localizedDeploymentUrl}"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="Tester sur SSP Cloud">
            <img src="${badgeTest}" alt="Tester sur SSP Cloud" loading="lazy">
          </a>

          <a class="launch-badge"
            href="${localizedArticleUrl}"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="Lire en ligne">
            <img src="${badgeRead}" alt="Lire en ligne" loading="lazy">
          </a>
        </div>

      </div>
    </div>
  `;
}

```


```{ojs}
function teaserList(docs, css = THEME_TEASERS) {
  const id = DOM.uid().id;
  return html`<div id="${id}">
    <div class=listing-grid>${docs.map(doc => renderTeaser(doc))}
  `;
}
```




```{ojs}
import { THEME_TEASERS, ICON_LIKE, getScopedStyle } from "@mootari/notebook-teasers";
```


:::

::: {.content-visible when-format="ipynb"}
Le contenu de cette page est disponible sur [le site web du cours](pythonds.linogaliana.fr/content/getting-started/04_revisions.html)
:::


## Exercices de synthèse {.unnumbered}

Pour vérifier que vous êtes au point sur les structures de données et les opérations adéquates en `Python` pour différents problèmes, voici une série d'exercice. 

Ils demandent de se creuser un peu la tête sur la structure adéquate des données pour y répondre, c'est normal ! 

### Exercice 1 {.unnumbered}

::: {.callout-tip}
## Exercice 1

Vous disposez de la liste de citations ci-dessous:

  <details>
  <summary>
  Voir la liste de citations qui seront utiles
  </summary>

  | Citation | Auteur |
  |---------|----------|
  | "Rien ne sert de courir ; il faut partir à point." | La Fontaine |
  | "Selon que vous serez puissant ou misérable, les jugements de cour vous rendront blanc ou noir." | La Fontaine |
  | "Heureux qui comme Ulysse a fait bon voyage" | Du Bellay |
  | "L'homme est né libre, et partout il est dans les fers." | Rousseau |
  | "Parce que c'était lui, parce que c'était moi." | Montaigne |
  | "La première fois qu'Aurélien vit Bérénice, il la trouva franchement laide" | Aragon |
  | "Aujourd'hui maman est morte. Ou peut-être hier, je ne sais pas." | Camus |

  </details>

Créer un objet `citations` qui utilise une structure de données adéquate en `Python` pour:

1. Pouvoir facilement retrouver toutes les citations associées à un auteur. Créer un objet `citation_aragon` qui teste la validité de votre approche avec l'exemple d'Aragon. 
2. Pour chaque citation, compter le nombre de mots et le nombre de mots uniques. Créer un objet `stats_phrases` qui liste ces propriétés. Tester sur les citations de la Fontaine.

:::

Voici les citations, ici en vrac, pour pouvoir démarrer. 

Dans cette cellule, créer la structure de données adéquates pour cet exercice.

```{pyodide}
#| echo: true
#| exercise: ex_1

citations = ________

# A partir de ces citations

"Rien ne sert de courir ; il faut partir à point."
"Selon que vous serez puissant ou misérable, les jugements de cour vous rendront blanc ou noir."
"Heureux qui comme Ulysse a fait bon voyage"
"L'homme est né libre, et partout il est dans les fers."
"La première fois qu'Aurélien vit Bérénice, il la trouva franchement laide"
"Aujourd'hui maman est morte. Ou peut-être hier, je ne sais pas."
```

:::: { .hint exercise="ex_1"}
::: { .callout-note collapse="false"}
## Indice 1

Quelle structure de données pourrait permettre d'avoir ce type de code ?

```python
citations.get("La Fontaine")
```
:::
::::

:::: { .hint exercise="ex_1"}
::: { .callout-note collapse="false"}
## Indice 2

Quelle structure de données pourrait permettre d'avoir un objet ressemblant à

```{ojs}
citations
```
:::
::::

:::: { .hint exercise="ex_1"}
::: { .callout-note collapse="false"}
## Indice 3

Un dictionnaire pourrait vous aider. Si vous avez encore du mal à comprendre pourquoi et comment, retournez au _notebook_ dédié ⬆️.

:::

::::

```{python}
citations = {
  "La Fontaine": [
    "Rien ne sert de courir ; il faut partir à point.",
    "Selon que vous serez puissant ou misérable, les jugements de cour vous rendront blanc ou noir."
  ],
  "Du Bellay": [
    "Heureux qui comme Ulysse a fait bon voyage"
  ],
  "Rousseau": [
    "L'homme est né libre, et partout il est dans les fers."
  ],
  "Aragon": [
    "La première fois qu'Aurélien vit Bérénice, il la trouva franchement laide"
  ],
  "Camus": [
    "Aujourd'hui maman est morte. Ou peut-être hier, je ne sais pas."
  ],
}
```

```{python}
ojs_define(citations = citations)
```


Pour la question 1, vous pouvez utiliser cette cellule. 

```{pyodide}
#| exercise: ex_1_q1
# Tester ici votre réponse à la question 1
```


```{python}
def citations_auteur(citations: dict, auteur: str = "Camus"):
  return citations.get(auteur)

citation_aragon = citations_auteur(citations, "Aragon")
```

Pour la question 2, vous pouvez utiliser cette cellule. 

```{pyodide}
#| exercise: ex_1_q2
stats_phrases = ___
```

```{python}
stats_phrases = {}

for auteur, liste_citations in citations.items():
  stats_phrases[auteur] = {
    "longueur": [len(c.split()) for c in liste_citations],
    "unique": [len(set(c.split())) for c in liste_citations],
  }
  
```

:::: { .hint exercise="ex_1_q2"}
::: { .callout-note collapse="false"}
## Indice 1

Comment itérer sur les clés et valeurs de votre dict `stats_phrases` ?

:::
::::

:::: { .hint exercise="ex_1_q2"}
::: { .callout-note collapse="false"}
## Indice 2

Adopter cette structure générale :

```{.python}
for auteur, liste_citations in citations.items():
  # do something
```

Comment avoir la longueur d'une phrase (suite de mots) et des mots uniques dans celle-ci ?

:::
::::

:::: { .hint exercise="ex_1_q2"}
::: { .callout-note collapse="false"}
## Indice 3

Adopter cette structure générale :

```{.python}
for auteur, liste_citations in citations.items():
  # do something
```

Comment avoir la longueur d'une phrase (suite de mots) et des mots uniques dans celle-ci ?

1. Une phrase (chaîne de caractères) peut être décomposée en mots (liste) avec la méthode `split()`
2. Un `set` permet de dédoublonner une liste

:::
::::

:::: { .hint exercise="ex_1_q2"}
::: { .callout-note collapse="false"}
## Indice 4

Vous devriez obtenir ce type de résultat:

```{ojs}
stats_phrases
```

:::
::::

```{python}
ojs_define(stats_phrases = stats_phrases)
```

::: {.callout-warning}
Idéalement, il faudrait faire attention à la ponctuation. 

Mais nous n'avons pas encore appris comment faire des substitutions raffinées dans des chaînes de caractères, cela sera dans un prochain chapitre.
::::


### Exercice 2 {.unnumbered}

Les _advent of code_ sont d'excellents problèmes pratiques pour apprendre l'algorithmique. Avec un problème par jour de difficulté croissante entre le 1er décembre et le jour de Noël, on devient très vite à l'aise avec les nombreuses structures de données qu'offre `Python`. 

Le prochain exercice propose de résoudre la première partie du jour 1 (année 2022) exclusivement avec du `Python` base. 

::: {.callout-warning}
Il serait pertinent d'utiliser `Numpy` pour le prochain problème. Mais c'est l'objet du prochain chapitre de montrer la manière dont ce _package_ simplifie les opérations numériques basiques.
:::

Voici les objets dont nous aurons besoin pour cet exercice:


```{python}
import requests

url = "https://minio.lab.sspcloud.fr/lgaliana/python-ENSAE/inputs/aoc2022_day1.txt"
elves = requests.get(url).text.split("\n\n")


example = """
1000
2000
3000

4000

5000
6000

7000
8000
9000

10000
"""

elves_example = example.split("\n\n")
```

```{pyodide}
import requests

url = "https://minio.lab.sspcloud.fr/lgaliana/python-ENSAE/inputs/aoc2022_day1.txt"
elves = requests.get(url).text.split("\n\n")


example = """
1000
2000
3000

4000

5000
6000

7000
8000
9000

10000
"""

elves_example = example.split("\n\n")
```



::: {.callout-tip}
## Exercice 2

Cet exercice vise à vous guider pour résoudre le problème [sur cette page](https://adventofcode.com/2022/day/1) (_Advent of Code_ 2022, jour 1, première partie). Il va être nécessaire de trouver une structure de données plus adéquate que celle de départ.

1. Lire la consigne
2. En allant progressivement, essayez de retrouver sur l'exemple le volume de calories portées par chaque elfe.
3. En déduire l'elfe portant le plus de calories. Vérifier que vous obtenez bien sur l'exemple les calories évoquées dans la consigne.
4. Généraliser pour résoudre le problème
:::

Vous pouvez dans cette cellule écrire votre code pour la question 2:

```{pyodide}
#| exercise: ex_2_q2
# Tester ici de manière itérative votre solution à la question 2
```

:::: { .hint exercise="ex_2_q2"}
::: { .callout-note collapse="false"}
## Indice 1

Il va falloir itérer sur chaque valeur de `elves_example`: comment transformer la chaîne de caractère en objet plus maniable ?

:::
::::

:::: { .hint exercise="ex_2_q2"}
::: { .callout-note collapse="false"}
## Indice 2

Attention au type d'objet que vous allez obtenir, n'oubliez pas de convertir dans un format numérique si vous désirez faire des opérations arithmétiques

:::
::::


:::: { .hint exercise="ex_2_q2"}
::: { .callout-note collapse="false"}
## Indice 3

Vous devriez finir avec la liste

```{ojs}
calories_example
```

:::
::::


```{python}
# Question 2
calories_example = []
for idx, elf in enumerate(elves_example):
  calories_example += [
    sum(map(int, elf.strip().split("\n")))
  ]
```

```{python}
#| echo: false
ojs_define(calories_example = calories_example)
```

Vous pouvez dans cette cellule écrire votre code pour la question 3:

```{pyodide}
#| exercise: ex_2_q3
# Question 3
````

```{python}
# Question 3
idx_max = calories_example.index(max(calories_example))
idx_min = calories_example.index(min(calories_example))
```

```{python}
# Question 4
def process_calories(elf) -> list[list[int]]:
    elves_split = [
      list(
        map(int, elf.strip().split("\n"))
      ) for elf in elves]
    return elves_split

data = process_calories(elves)
calories_total = [sum(d) for d in data]
```

Pour finir, après avoir généralisé, vous devriez retrouver les valeurs suivantes:

```{python}
idx_elf = calories_total.index(max(calories_total))
max_elf = max(calories_total)
print(
  f"L'elfe numéro {idx_elf} porte le plus de calories ({max_elf} calories)"
)
```

```{pyodide}
#| exercise: ex_2_q4
# Question 4
```


La correction ? Elle sera prochainement dans la [page dédiée](/content/appendix/corrections.qmd)