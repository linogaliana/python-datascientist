:::: {.content-visible when-profile="fr"}
# Introduction

Avec la prolifération de données géolocalisées et l'usage accru de données pour la décision, il est devenu crucial pour les _data scientists_ de savoir faire une carte rapidement. Ce chapitre, complément de celui sur les [données spatiales](/content/manipulation/03_geopandas_intro.qmd), propose quelques exercices pour apprendre les enjeux de la représentation de données sous forme cartographique avec `Python`.

La cartographie est l'une des plus anciennes représentations d'informations sous forme graphique. Longtemps cantonnée aux domaines militaires et administratifs ou à la synthèse d'informations pour la navigation, la cartographie est, au moins depuis le XIXe siècle, une des formes privilégiées de représentation de l'information. Il s'agit de l'époque où la carte par aplat de couleur, dite carte choroplèthe, a commencé à devenir une représentation de données géographiques traditionnelle.

D'après @chen2008brief, la première représentation de ce type a été proposée par Charles Dupin en 1826 [@fig-dupin] pour représenter les niveaux d'instruction sur le territoire français. L'émergence des cartes choroplèthes est en effet indissociable de l'organisation du pouvoir sous forme d'entités politiques supposées unitaires. Par exemple, les cartes du monde représentent souvent des aplats de couleurs à partir des nations, les cartes nationales à partir d'échelons administratifs (régions, départements, communes, mais aussi États ou _Länder_).

![La première carte choroplèthe par Dupin (1826)](https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/Carte_figurative_de_l%27instruction_populaire_de_la_France.jpg/800px-Carte_figurative_de_l%27instruction_populaire_de_la_France.jpg){#fig-dupin width="50%" fig-align="center"}

On peut voir l'émergence pendant le XIXe siècle de la carte choroplèthe comme un moment important de la cartographie, un glissement de l'usage militaire vers l'usage politique. Il ne s'agissait plus exclusivement de représenter le territoire physique mais aussi la réalité socioéconomique, dans des bornes administratives connues de tous.

::: {.callout-note}
Produire de belles cartes demande du temps mais aussi du bon sens. Comme toute représentation graphique, il est important de réfléchir au message à faire passer et aux moyens appropriés.  
La sémiologie cartographique, une discipline scientifique qui s'intéresse aux messages transmis par les cartes, propose certaines règles pour éviter de transmettre des messages faussés, volontairement ou involontairement.

Certaines peuvent être retrouvées à travers des conseils pratiques dans ce [guide de sémiologie cartographique](https://www.insee.fr/fr/statistiques/3640429) de l'Insee. Celles-ci sont reprises dans [ce guide](https://juliedjidji.github.io/memocarto/semio.html).

[Cette présentation](https://neocarto.github.io/docs/slides/ENTPE/docs/#/title-slide) de Nicolas Lambert revient, à partir de nombreux exemples, sur quelques principes de la _dataviz_ cartographique.
:::

Ce chapitre présentera d'abord quelques fonctionnalités basiques de [`Geopandas`](https://geopandas.org/mapping.html) pour la construction de cartes figées. Pour contextualiser l'information présentée, nous utiliserons des contours officiels produits par l'IGN. Nous proposerons ensuite des cartes avec une contextualisation accrue et plusieurs niveaux d'information, ce qui permettra d'illustrer l'intérêt de l'utilisation de librairies réactives, s'appuyant sur `JavaScript`, comme [`Folium`](https://python-visualization.github.io/folium/latest/).
::::


:::: {.content-visible when-profile="en"}
# Introduction

With the proliferation of geolocated data and the increasing use of data-driven decision-making, it has become crucial for _data scientists_ to quickly create maps. This chapter, complementing the one on [spatial data](/content/manipulation/03_geopandas_intro.qmd), offers exercises to explore the key principles of data visualization through cartography using `Python`.

Cartography is one of the oldest forms of graphical representation of information. Historically confined to military and administrative uses or navigation-related information synthesis, cartography has, at least since the 19th century, become one of the preferred ways to represent information. It was during this period that the color-shaded map, known as the choropleth map, began to emerge as a standard way to visualize geographic data.

According to @chen2008brief, the first representation of this type was proposed by Charles Dupin in 1826 [@fig-dupin] to illustrate literacy levels across France. The rise of choropleth maps is closely linked to the organization of power through unitary political entities. For instance, world maps often use color shades to represent nations, while national maps use administrative divisions (regions, departments, municipalities, as well as states or _Länder_).

![The first choropleth map by Dupin (1826)](https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/Carte_figurative_de_l%27instruction_populaire_de_la_France.jpg/800px-Carte_figurative_de_l%27instruction_populaire_de_la_France.jpg){#fig-dupin width="50%" fig-align="center"}

The emergence of choropleth maps during the 19th century marks an important shift in cartography, transitioning from military use to political application. No longer limited to depicting physical terrain, maps began to represent socioeconomic realities within well-defined administrative boundaries.



::: {.callout-note}
Creating high-quality maps requires time but also thoughtful decision-making. Like any graphical representation, it is essential to consider the message being conveyed and the most appropriate means of representation. Cartographic semiology, a scientific discipline focusing on the messages conveyed by maps, provides guidelines to prevent misleading representations—whether intentional or accidental.

Some of these principles are outlined in this [cartographic semiology guide](https://www.insee.fr/fr/statistiques/3640429) from Insee. They are also summarized in [this guide](https://juliedjidji.github.io/memocarto/semio.html).

[This presentation](https://neocarto.github.io/docs/slides/ENTPE/docs/#/title-slide) by Nicolas Lambert, using numerous examples, explores key principles of cartographic _dataviz_.
:::

This chapter will first introduce some basic functionalities of [`Geopandas`](https://geopandas.org/mapping.html) for creating static maps. To provide context to the presented information, we will use official geographic boundaries produced by IGN. We will then explore maps with enhanced contextualization and multiple levels of information, illustrating the benefits of using interactive libraries based on `JavaScript`, such as [`Folium`](https://python-visualization.github.io/folium/latest/).
::::

::: {.content-visible when-profile="fr"}
## Données utilisées

Dans ce chapitre, nous allons utiliser plusieurs jeux de données pour illustrer différents types de cartes :

- Des comptages de population ;
- Les limites départementales de la France métropolitaine ;
- Les limites communales du Finistère ;
- Le couvert forestier du département des Landes ;
- La localisation des stations Vélib' ;

## Installations préalables

Avant de pouvoir commencer, il est nécessaire d'installer quelques packages au préalable :
:::

::: {.content-visible when-profile="en"}
## Data Used

Throughout this chapter, we will use several datasets to illustrate different types of maps:

- Population counts;
- Departmental boundaries of metropolitan France;
- Municipal boundaries of Finistère;
- Forest cover in the Landes department;
- The location of Vélib' stations;

## Prerequisite installations

Before getting started, a few packages need to be installed:
:::

```{python}
#| eval: false
#| echo: true

# Sur colab
!pip install pandas fiona shapely pyproj rtree geopandas #<1> 
```
1. Ces librairies sont utiles pour l'analyse géospatiale (cf. [chapitre dédié](/content/manipulation/03_geopandas_intro.qmd))

::: {.content-visible when-profile="fr"}
Nous allons principalement avoir besoin de `Pandas` et `GeoPandas` pour ce chapitre.
:::

::: {.content-visible when-profile="en"}
We will primarily need `Pandas` and `GeoPandas` for this chapter.
:::

```{python}
#| echo: true
import pandas as pd
import geopandas as gpd
```

