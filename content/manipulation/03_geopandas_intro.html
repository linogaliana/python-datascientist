<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lino Galiana">
<meta name="dcterms.date" content="2024-10-01">
<meta name="description" content="Les données géolocalisées se sont multipliées depuis quelques années, qu’il s’agisse de données open-data ou de traces numériques géolocalisées de type big-data. Pour les données spatiales, le package GeoPandas étend les fonctionalités de l’écosystème Pandas afin de permettre de manipuler des données géographiques complexes de manière simple.">

<title>Python pour la data science - Introduction aux données spatiales avec Geopandas</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../content/manipulation/04a_webscraping_TP.html" rel="next">
<link href="../../content/manipulation/02_pandas_suite.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer",
    "search-label": "Recherche"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background: #e9f3fa;
      }
</style>
<script id="toggle-light-dark-elements" type="application/javascript">
// Extend Quarto theme toggling to allow elements to be displayed/hidden in light/dark themes

// Replicated from https://github.com/quarto-dev/quarto-cli/blob/84d4659/src/resources/formats/html/templates/quarto-html.ejs
const getColorSchemeSentinel = () => {
  const localAlternateSentinel = 'default';
  if (window.location.protocol !== 'file:') {
    const storageValue = window.localStorage.getItem('quarto-color-scheme');
    return storageValue != null ? storageValue : localAlternateSentinel;
  } else {
    return localAlternateSentinel;
  }
};

// Function to toggle light and dark elements based on color scheme
const toggleColorSchemeElements = () => {
  const scheme = getColorSchemeSentinel();
  const lightElements = document.getElementsByClassName('only-light');
  const darkElements = document.getElementsByClassName('only-dark');

  for (var i = 0; i < lightElements.length; i++) {
    lightElements[i].style.display = scheme == 'default' ? 'block' : 'none';
  }
  for (var i = 0; i < darkElements.length; i++) {
    darkElements[i].style.display = scheme == 'default' ? 'none' : 'block';
  }
};

// Function to check if the user's browser prefers dark themes
const prefersDarkTheme = () => {
  if (window.matchMedia) {
    return window.matchMedia('(prefers-color-scheme: dark)').matches;
  }
  return false;
};

document.addEventListener('readystatechange', function() {
  // Set the default color scheme based on browser preference
  if (document.readyState === 'interactive' && window.location.protocol !== 'file:') {
    const storageValue = window.localStorage.getItem('quarto-color-scheme');
    if (storageValue == null && prefersDarkTheme()) {
      window.localStorage.setItem('quarto-color-scheme', 'alternate');
    }
  }
  // Add event listener for when the readyState is complete (and default toggler is set)
  if (document.readyState === 'complete') {
    // Toggle scheme once
    toggleColorSchemeElements();
    // Append our toggle function to the old one
    const oldToggle = window.quartoToggleColorScheme;
    window.quartoToggleColorScheme = () => {
      oldToggle();
      toggleColorSchemeElements();
    }
  }
});

</script>
<script type="module" src="../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
<meta name="twitter:title" content="Python pour la data science - Introduction aux données spatiales avec Geopandas">
<meta name="twitter:description" content="Les données géolocalisées se sont multipliées depuis quelques années, qu’il
s’agisse de données open-data ou de traces numériques géolocalisées de
type big-data. Pour les données spatiales, le package GeoPandas
étend les fonctionalités de l’écosystème Pandas afin de permettre
de manipuler des données géographiques complexes de manière simple.">
<meta name="twitter:image" content="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/pirate.jfif">
<meta name="twitter:card" content="summary_large_image">
<meta name="citation_title" content="Python pour la data science">
<meta name="citation_author" content="Lino Galiana">
<meta name="citation_publication_date" content="2023">
<meta name="citation_cover_date" content="2023">
<meta name="citation_year" content="2023">
<meta name="citation_online_date" content="2024-10-01">
<meta name="citation_fulltext_html_url" content="https://pythonds.linogaliana.fr/">
<meta name="citation_doi" content="10.5281/zenodo.8229676">
<meta name="citation_language" content="fr">
<meta name="citation_reference" content="citation_title=Coding for economists;,citation_author=undefined Turrell;,citation_author=undefined contributors;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_fulltext_html_url=https://aeturrell.github.io/coding-for-economists;">
<meta name="citation_reference" content="citation_title=Discovering statistics using r;,citation_author=A Field;,citation_publication_date=2012;,citation_cover_date=2012;,citation_year=2012;,citation_publisher=Sage;">
<meta name="citation_reference" content="citation_title=psyTeachR Book Template;,citation_author=DeBruine Lisa;,citation_publication_date=2021-10;,citation_cover_date=2021-10;,citation_year=2021;,citation_fulltext_html_url=https://github.com/psyteachr/template/;">
<meta name="citation_reference" content="citation_title=The grammar of graphics;,citation_author=Leland Wilkinson;,citation_publication_date=2012;,citation_cover_date=2012;,citation_year=2012;">
<meta name="citation_reference" content="citation_title=Hands-on machine learning with scikit-learn, keras, and TensorFlow;,citation_author=Aurélien Géron;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;">
<meta name="citation_reference" content="citation_title=A brief history of data visualization;,citation_author=Chun-houh Chen;,citation_author=Wolfgang Härdle;,citation_author=Antony Unwin;,citation_author=Michael Friendly;,citation_publication_date=2008;,citation_cover_date=2008;,citation_year=2008;,citation_journal_title=Handbook of data visualization;,citation_publisher=Springer;">
<meta name="citation_reference" content="citation_title=Random forests;,citation_author=Leo Breiman;,citation_publication_date=2001;,citation_cover_date=2001;,citation_year=2001;,citation_volume=45;,citation_journal_title=Machine learning;,citation_publisher=Springer;">
<meta name="citation_reference" content="citation_title=Bagging predictors;,citation_author=Leo Breiman;,citation_publication_date=1996;,citation_cover_date=1996;,citation_year=1996;,citation_volume=24;,citation_journal_title=Machine learning;,citation_publisher=Springer;">
<meta name="citation_reference" content="citation_title=R for data science;,citation_author=Hadley Wickham;,citation_author=Mine Çetinkaya-Rundel;,citation_author=Garrett Grolemund;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;">
<meta name="citation_reference" content="citation_title=Computational reproducibility of jupyter notebooks from biomedical publications;,citation_author=Sheeba Samuel;,citation_author=Daniel Mietchen;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_fulltext_html_url=https://arxiv.org/abs/2308.07333;">
<meta name="citation_reference" content="citation_title=Python data science handbook: Essential tools for working with data;,citation_author=Jake VanderPlas;,citation_publication_date=2016;,citation_cover_date=2016;,citation_year=2016;">
<meta name="citation_reference" content="citation_title=Machine learning methods that economists should know about;,citation_author=Susan Athey;,citation_author=Guido W Imbens;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_volume=11;,citation_journal_title=Annual Review of Economics;,citation_publisher=Annual Reviews;">
<meta name="citation_reference" content="citation_title=Fuzzy matching on big-data an illustration with scanner data and crowd-sourced nutritional data;,citation_author=Lino Galiana;,citation_author=Milena Suarez Castillo;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_publisher=Proceedings of the 2022 &amp;amp;amp;quot;Journées de Méthodologie Statistiques&amp;quot;;">
<meta name="citation_reference" content="citation_title=Data visualization with python and JavaScript;,citation_author=Kyran Dale;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;">
<meta name="citation_reference" content="citation_title=Sémiologie graphique;,citation_author=Jacques Bertin;,citation_publication_date=1967;,citation_cover_date=1967;,citation_year=1967;">
<meta name="citation_reference" content="citation_title=La sémiologie graphique de jacques bertin a cinquante ans;,citation_author=Gilles Palsky;,citation_publication_date=2017;,citation_cover_date=2017;,citation_year=2017;,citation_journal_title=Visions carto (en ligne);">
<meta name="citation_reference" content="citation_title=Fundamentals of data visualization: A primer on making informative and compelling figures;,citation_author=Claus O Wilke;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;">
<meta name="citation_reference" content="citation_title=How to train BERT with an academic budget;,citation_author=Peter Izsak;,citation_author=Moshe Berchansky;,citation_author=Omer Levy;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_fulltext_html_url=https://arxiv.org/abs/2104.07705;">
<meta name="citation_reference" content="citation_title=Python for data analysis: Data wrangling with pandas, NumPy, and IPython;,citation_author=Wes McKinney;,citation_publication_date=2012;,citation_cover_date=2012;,citation_year=2012;">
<meta name="citation_reference" content="citation_title=Residential segregation, daytime segregation and spatial frictions: An analysis from mobile phone data;,citation_author=Lino Galiana;,citation_author=François Sémécurbe;,citation_author=Benjamin Sakarovitch;,citation_author=Zbigniew Smoreda;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;,citation_publisher=Insee Working Paper;">
<meta name="citation_reference" content="citation_title=Fuzzy matching on big-data: An illustration with scanner and crowd-sourced nutritional datasets;,citation_abstract=Food retailers’ scanner data provide unprecedented details on local consumption, provided that product identifiers allow a linkage with features of interest, such as nutritional information. In this paper, we enrich a large retailer dataset with nutritional information extracted from crowd-sourced and administrative nutritional datasets. To compensate for imperfect matching through the barcode, we develop a methodology to efficiently match short textual descriptions. After a preprocessing step to normalize short labels, we resort to fuzzy matching based on several tokenizers (including n-grams) by querying an ElasticSearch customized index and validate candidates echos as matches with a Levensthein edit-distance and an embedding-based similarity measure created from a siamese neural network model. The pipeline is composed of several steps successively relaxing constraints to find relevant matching candidates.;,citation_author=Lino Galiana;,citation_author=Milena Suarez Castillo;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://doi.org/10.1145/3524458.3547244;,citation_doi=10.1145/3524458.3547244;,citation_isbn=9781450392846;,citation_conference_title=Proceedings of the 2022 ACM conference on information technology for social good;,citation_conference=Association for Computing Machinery;,citation_series_title=GoodIT ’22;">
<meta name="citation_reference" content="citation_title=Guide de sémiologie cartographique;,citation_author=undefined Insee;,citation_publication_date=2018;,citation_cover_date=2018;,citation_year=2018;,citation_publisher=Insee Working Paper;">
<meta name="citation_reference" content="citation_title=Energy and policy considerations for deep learning in NLP;,citation_author=Emma Strubell;,citation_author=Ananya Ganesh;,citation_author=Andrew McCallum;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_fulltext_html_url=https://arxiv.org/abs/1906.02243;">
<meta name="citation_reference" content="citation_title=High-resolution image synthesis with latent diffusion models;,citation_author=Robin Rombach;,citation_author=Andreas Blattmann;,citation_author=Dominik Lorenz;,citation_author=Patrick Esser;,citation_author=Björn Ommer;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_conference_title=Proceedings of the IEEE/CVF conference on computer vision and pattern recognition (CVPR);">
<meta name="citation_reference" content="citation_title=Apache arrow and the&amp;amp;amp;quot; 10 things i hate about pandas;,citation_author=Wes McKinney;,citation_publication_date=2017;,citation_cover_date=2017;,citation_year=2017;,citation_volume=21;,citation_journal_title=Blog, September;">
<meta name="citation_reference" content="citation_title=Many researchers were not compliant with their published data sharing statement: Mixed-methods study;,citation_author=Mirko Gabelica;,citation_author=Ružica Bojčić;,citation_author=Livia Puljak;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_journal_title=Journal of Clinical Epidemiology;,citation_publisher=Elsevier;">
<meta name="citation_reference" content="citation_title=Credit scoring in the era of big data;,citation_author=Mikella Hurley;,citation_author=Julius Adebayo;,citation_publication_date=2016;,citation_cover_date=2016;,citation_year=2016;,citation_volume=18;,citation_journal_title=Yale JL &amp;amp;amp; Tech.;,citation_publisher=HeinOnline;">
<meta name="citation_reference" content="citation_title=Econometrics and machine learning;,citation_author=Arthur Charpentier;,citation_author=Emmanuel Flachaire;,citation_author=Antoine Ly;,citation_publication_date=2018;,citation_cover_date=2018;,citation_year=2018;,citation_issue=1;,citation_volume=505;,citation_journal_title=Economie et Statistique;,citation_publisher=Persée-Portail des revues scientifiques en SHS;">
<meta name="citation_reference" content="citation_title=Machine learning: An applied econometric approach;,citation_author=Sendhil Mullainathan;,citation_author=Jann Spiess;,citation_publication_date=2017-05;,citation_cover_date=2017-05;,citation_year=2017;,citation_fulltext_html_url=https://www.aeaweb.org/articles?id=10.1257/jep.31.2.87;,citation_issue=2;,citation_doi=10.1257/jep.31.2.87;,citation_volume=31;,citation_journal_title=Journal of Economic Perspectives;">
<meta name="citation_reference" content="citation_title=Le problème du réalisme des hypothèses en économie politique;,citation_author=Pierre Salmon;,citation_publication_date=2010;,citation_cover_date=2010;,citation_year=2010;">
<meta name="citation_reference" content="citation_title=The methodology of positive economics;,citation_author=Milton Friedman;,citation_publication_date=1953;,citation_cover_date=1953;,citation_year=1953;,citation_inbook_title=Essays in positive economics;">
<meta name="citation_reference" content="citation_title=L’empreinte carbone du numérique;,citation_author=undefined Arcep;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;">
<meta name="citation_reference" content="citation_title=Leakage and the reproducibility crisis in ML-based science;,citation_author=Sayash Kapoor;,citation_author=Arvind Narayanan;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://arxiv.org/abs/2207.07048;,citation_doi=10.48550/ARXIV.2207.07048;,citation_publisher=arXiv;">
<meta name="citation_reference" content="citation_title=Growth in a time of debt;,citation_author=Carmen M Reinhart;,citation_author=Kenneth S Rogoff;,citation_publication_date=2010;,citation_cover_date=2010;,citation_year=2010;,citation_issue=2;,citation_volume=100;,citation_journal_title=American economic review;,citation_publisher=American Economic Association;">
<meta name="citation_reference" content="citation_title=We do not know the population of every country in the world for the past two thousand years;,citation_author=Timothy W Guinnane;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_issue=3;,citation_volume=83;,citation_journal_title=The Journal of Economic History;">
<meta name="citation_reference" content="citation_title=Artificial intelligence: A modern approach (4th edition);,citation_author=Stuart J. Russell;,citation_author=Peter Norvig;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;,citation_fulltext_html_url=http://aima.cs.berkeley.edu/;,citation_isbn=9781292401133;">
<meta name="citation_reference" content="citation_title=Data scientist, the sexiest job of the 21st century;,citation_author=Thomas H Davenport;,citation_author=DJ Patil;,citation_publication_date=2012;,citation_cover_date=2012;,citation_year=2012;,citation_fulltext_html_url=https://hbr.org/2012/10/data-scientist-the-sexiest-job-of-the-21st-century;,citation_issue=5;,citation_volume=90;,citation_journal_title=Harvard business review;">
<meta name="citation_reference" content="citation_title=Is data scientist still the sexiest job of the 21st century?;,citation_author=Thomas H Davenport;,citation_author=DJ Patil;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_volume=90;,citation_journal_title=Harvard Business Review;,citation_publisher=Harvard Business Publishing;">
<meta name="citation_reference" content="citation_title=Leakage and the reproducibility crisis in machine-learning-based science;,citation_author=Sayash Kapoor;,citation_author=Arvind Narayanan;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_issue=9;,citation_volume=4;,citation_journal_title=Patterns;,citation_publisher=Elsevier;">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Recherche"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Basculer la navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-introduction" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Introduction</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-introduction">    
        <li>
    <a class="dropdown-item" href="../../content/getting-started/index.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/01_environment.html">
 <span class="dropdown-text">Avoir un environnement Python fonctionnel pour la data science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/02_data_analysis.html">
 <span class="dropdown-text">Démarche à adopter face à un jeu de données</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/03_revisions.html">
 <span class="dropdown-text">Quelques exercices de rappels pour se remettre en selle</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-manipuler" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Manipuler</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-manipuler">    
        <li>
    <a class="dropdown-item" href="../../content/manipulation/index.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/01_numpy.html">
 <span class="dropdown-text">Numpy, la brique de base de la data science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/02_pandas_intro.html">
 <span class="dropdown-text">Introduction à Pandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/02_pandas_suite.html">
 <span class="dropdown-text">Statistiques par groupe et association de plusieurs jeux de données avec Pandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/03_geopandas_intro.html">
 <span class="dropdown-text">Introduction aux données spatiales avec Geopandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04a_webscraping_TP.html">
 <span class="dropdown-text">Web scraping avec Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04c_API_TP.html">
 <span class="dropdown-text">Récupérer des données avec des API depuis Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04b_regex_TP.html">
 <span class="dropdown-text">Maîtriser les expressions régulières</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-communiquer" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Communiquer</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-communiquer">    
        <li>
    <a class="dropdown-item" href="../../content/visualisation/index.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/visualisation/matplotlib.html">
 <span class="dropdown-text">De beaux graphiques avec python : mise en pratique</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/visualisation/maps.html">
 <span class="dropdown-text">De belles cartes avec python : mise en pratique</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-modéliser" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Modéliser</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-modéliser">    
        <li>
    <a class="dropdown-item" href="../../content/modelisation/index.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/0_preprocessing.html">
 <span class="dropdown-text">Préparation des données pour construire un modèle</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/1_modelevaluation.html">
 <span class="dropdown-text">Evaluer la qualité d’un modèle</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/2_SVM.html">
 <span class="dropdown-text">Classification: premier modèle avec les SVM</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/3_regression.html">
 <span class="dropdown-text">Régression : une introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/4_featureselection.html">
 <span class="dropdown-text">Sélection de variables : une introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/5_clustering.html">
 <span class="dropdown-text">Clustering</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/6_pipeline.html">
 <span class="dropdown-text">Premier pas vers l’industrialisation avec les pipelines scikit</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/7_mlapi.html">
 <span class="dropdown-text">Mettre à disposition un modèle par le biais d’une API</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-nlp" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">NLP</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-nlp">    
        <li>
    <a class="dropdown-item" href="../../content/NLP/index.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/NLP/01_intro.html">
 <span class="dropdown-text">Nettoyer et structurer l’information dans les données textuelles</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/NLP/02_exoclean.html">
 <span class="dropdown-text">L’analyse fréquentiste par l’approche bag-of-words : intérêt et limites</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/NLP/03_lda.html">
 <span class="dropdown-text">Latent Dirichlet Allocation (LDA)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/NLP/04_word2vec.html">
 <span class="dropdown-text">Méthodes de vectorisation : comptages et word embeddings</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/NLP/05_exo_supp.html">
 <span class="dropdown-text">Exercices supplémentaires</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-approfondissements" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Approfondissements</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-approfondissements">    
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/index.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/continuous_integration.html">
 <span class="dropdown-text">Intégration continue avec Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/s3.html">
 <span class="dropdown-text">Les nouveaux modes d’accès aux données : le format parquet et les données sur le cloud</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/elastic_approfondissement.html">
 <span class="dropdown-text">Approfondissement ElasticSearch pour des recherches de proximité géographique</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/elastic_intro.html">
 <span class="dropdown-text">Introduction à ElasticSearch pour la recherche textuelle</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-git" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Git</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-git">    
        <li>
    <a class="dropdown-item" href="../../content/git/index.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/git/introgit.html">
 <span class="dropdown-text">Découvrir Git par la pratique: la gymnastique quotidienne</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/git/exogit.html">
 <span class="dropdown-text">Un cadavre exquis pour découvrir le travail collaboratif <code>Git</code></span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-annexes" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Annexes</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-annexes">    
        <li>
    <a class="dropdown-item" href="../../content/annexes/evaluation.html">
 <span class="dropdown-text">Evaluation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/annexes/corrections.html">
 <span class="dropdown-text">Corrections</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://linogaliana.github.io/python-datascientist-slides/#/title-slide">
 <span class="dropdown-text">Slides de présentation</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools tools-wide">
    <a href="https://github.com/linogaliana/python-datascientist" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Basculer le mode sombre"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Basculer en mode lecteur">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/manipulation/03_geopandas_intro.html">Introduction aux données spatiales avec Geopandas</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Introduction aux données spatiales avec Geopandas</h1>
                  <div>
        <div class="description">
          <p>Les données géolocalisées se sont multipliées depuis quelques années, qu’il
          s’agisse de données open-data ou de traces numériques géolocalisées de
          type <em>big-data</em>. Pour les données spatiales, le package <code>GeoPandas</code>
          étend les fonctionalités de l’écosystème <code>Pandas</code> afin de permettre
          de manipuler des données géographiques complexes de manière simple.</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Tutoriel</div>
                <div class="quarto-category">Manipulation</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Auteur·rice</div>
      <div class="quarto-title-meta-contents">
               <p>Lino Galiana </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Date de publication</div>
      <div class="quarto-title-meta-contents">
        <p class="date">2024-10-01</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/01_numpy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Numpy, la brique de base de la data science</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/02_pandas_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction à Pandas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/02_pandas_suite.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistiques par groupe et association de plusieurs jeux de données avec Pandas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/03_geopandas_intro.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Introduction aux données spatiales avec Geopandas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/04a_webscraping_TP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Web scraping avec Python</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/04c_API_TP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Récupérer des données avec des API depuis Python</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/04b_regex_TP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Maîtriser les expressions régulières</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sur cette page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#quelle-différence-avec-des-données-traditionnelles" id="toc-quelle-différence-avec-des-données-traditionnelles" class="nav-link" data-scroll-target="#quelle-différence-avec-des-données-traditionnelles"><span class="header-section-number">1.1</span> Quelle différence avec des données traditionnelles ?</a></li>
  <li><a href="#structure-des-données-spatiales" id="toc-structure-des-données-spatiales" class="nav-link" data-scroll-target="#structure-des-données-spatiales"><span class="header-section-number">1.2</span> Structure des données spatiales</a></li>
  <li><a href="#les-données-spatiales-sont-incontournables" id="toc-les-données-spatiales-sont-incontournables" class="nav-link" data-scroll-target="#les-données-spatiales-sont-incontournables"><span class="header-section-number">1.3</span> Les données spatiales sont incontournables</a></li>
  <li><a href="#où-trouver-la-donnée-spatiale-française" id="toc-où-trouver-la-donnée-spatiale-française" class="nav-link" data-scroll-target="#où-trouver-la-donnée-spatiale-française"><span class="header-section-number">1.4</span> Où trouver la donnée spatiale française ?</a></li>
  <li><a href="#objectifs-de-ce-chapitre" id="toc-objectifs-de-ce-chapitre" class="nav-link" data-scroll-target="#objectifs-de-ce-chapitre"><span class="header-section-number">1.5</span> Objectifs de ce chapitre</a></li>
  <li><a href="#données-utilisées-dans-ce-chapitre" id="toc-données-utilisées-dans-ce-chapitre" class="nav-link" data-scroll-target="#données-utilisées-dans-ce-chapitre"><span class="header-section-number">1.6</span> Données utilisées dans ce chapitre</a></li>
  <li><a href="#installations-préalables" id="toc-installations-préalables" class="nav-link" data-scroll-target="#installations-préalables"><span class="header-section-number">1.7</span> Installations préalables</a></li>
  </ul></li>
  <li><a href="#de-pandas-à-geopandas" id="toc-de-pandas-à-geopandas" class="nav-link" data-scroll-target="#de-pandas-à-geopandas"><span class="header-section-number">2</span> De <code>Pandas</code> à <code>Geopandas</code></a>
  <ul class="collapse">
  <li><a href="#anatomie-dun-objet-geopandas" id="toc-anatomie-dun-objet-geopandas" class="nav-link" data-scroll-target="#anatomie-dun-objet-geopandas"><span class="header-section-number">2.1</span> Anatomie d’un objet <code>GeoPandas</code></a></li>
  </ul></li>
  <li><a href="#lire-et-enrichir-des-données-spatiales" id="toc-lire-et-enrichir-des-données-spatiales" class="nav-link" data-scroll-target="#lire-et-enrichir-des-données-spatiales"><span class="header-section-number">3</span> Lire et enrichir des données spatiales</a>
  <ul class="collapse">
  <li><a href="#le-format-shapefile-.shp-et-le-geopackage-.gpkg" id="toc-le-format-shapefile-.shp-et-le-geopackage-.gpkg" class="nav-link" data-scroll-target="#le-format-shapefile-.shp-et-le-geopackage-.gpkg"><span class="header-section-number">3.1</span> Le format <em>shapefile</em> (<code>.shp</code>) et le <em>geopackage</em> (<code>.gpkg</code>)</a></li>
  <li><a href="#le-geojson-et-le-topojson" id="toc-le-geojson-et-le-topojson" class="nav-link" data-scroll-target="#le-geojson-et-le-topojson"><span class="header-section-number">3.2</span> Le GeoJSON et le TopoJSON</a></li>
  <li><a href="#les-autres-formats-de-données" id="toc-les-autres-formats-de-données" class="nav-link" data-scroll-target="#les-autres-formats-de-données"><span class="header-section-number">3.3</span> Les autres formats de données</a></li>
  <li><a href="#exercice-de-découverte" id="toc-exercice-de-découverte" class="nav-link" data-scroll-target="#exercice-de-découverte"><span class="header-section-number">3.4</span> Exercice de découverte</a></li>
  </ul></li>
  <li><a href="#le-système-de-projection-cartographique" id="toc-le-système-de-projection-cartographique" class="nav-link" data-scroll-target="#le-système-de-projection-cartographique"><span class="header-section-number">4</span> Le système de projection cartographique</a>
  <ul class="collapse">
  <li><a href="#principe" id="toc-principe" class="nav-link" data-scroll-target="#principe"><span class="header-section-number">4.1</span> Principe</a></li>
  <li><a href="#le-système-mercator" id="toc-le-système-mercator" class="nav-link" data-scroll-target="#le-système-mercator"><span class="header-section-number">4.2</span> Le système Mercator</a></li>
  <li><a href="#gestion-avec-geopandas" id="toc-gestion-avec-geopandas" class="nav-link" data-scroll-target="#gestion-avec-geopandas"><span class="header-section-number">4.3</span> Gestion avec <code>GeoPandas</code></a></li>
  <li><a href="#exercice-pour-comprendre-limportance-du-système-de-projection" id="toc-exercice-pour-comprendre-limportance-du-système-de-projection" class="nav-link" data-scroll-target="#exercice-pour-comprendre-limportance-du-système-de-projection"><span class="header-section-number">4.4</span> Exercice pour comprendre l’importance du système de projection</a></li>
  </ul></li>
  <li><a href="#importer-et-explorer-les-jeux-de-données-spatiaux" id="toc-importer-et-explorer-les-jeux-de-données-spatiaux" class="nav-link" data-scroll-target="#importer-et-explorer-les-jeux-de-données-spatiaux"><span class="header-section-number">5</span> Importer et explorer les jeux de données spatiaux</a>
  <ul class="collapse">
  <li><a href="#localiser-les-données-sur-une-carte" id="toc-localiser-les-données-sur-une-carte" class="nav-link" data-scroll-target="#localiser-les-données-sur-une-carte"><span class="header-section-number">5.1</span> Localiser les données sur une carte</a></li>
  <li><a href="#exercice-dapplication" id="toc-exercice-dapplication" class="nav-link" data-scroll-target="#exercice-dapplication"><span class="header-section-number">5.2</span> Exercice d’application</a></li>
  <li><a href="#opérations-sur-les-géométries" id="toc-opérations-sur-les-géométries" class="nav-link" data-scroll-target="#opérations-sur-les-géométries"><span class="header-section-number">5.3</span> Opérations sur les géométries</a></li>
  </ul></li>
  <li><a href="#enrichissements-grâce-à-la-dimension-spatiale-les-jointures-spatiales" id="toc-enrichissements-grâce-à-la-dimension-spatiale-les-jointures-spatiales" class="nav-link" data-scroll-target="#enrichissements-grâce-à-la-dimension-spatiale-les-jointures-spatiales"><span class="header-section-number">6</span> Enrichissements grâce à la dimension spatiale: les jointures spatiales</a>
  <ul class="collapse">
  <li><a href="#principe-1" id="toc-principe-1" class="nav-link" data-scroll-target="#principe-1"><span class="header-section-number">6.1</span> Principe</a></li>
  <li><a href="#exemple-localiser-les-stations-dans-leur-arrondissement" id="toc-exemple-localiser-les-stations-dans-leur-arrondissement" class="nav-link" data-scroll-target="#exemple-localiser-les-stations-dans-leur-arrondissement"><span class="header-section-number">6.2</span> Exemple: localiser les stations dans leur arrondissement</a></li>
  <li><a href="#exercice-supplémentaire" id="toc-exercice-supplémentaire" class="nav-link" data-scroll-target="#exercice-supplémentaire"><span class="header-section-number">6.3</span> Exercice supplémentaire</a></li>
  </ul></li>
  <li><a href="#références" id="toc-références" class="nav-link" data-scroll-target="#références"><span class="header-section-number">7</span> Références</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">8</span> References</a>
  <ul class="collapse">
  <li><a href="#informations-additionnelles" id="toc-informations-additionnelles" class="nav-link" data-scroll-target="#informations-additionnelles">Informations additionnelles</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/linogaliana/python-datascientist/edit/master/content/manipulation/03_geopandas_intro.qmd" class="toc-action"><i class="bi bi-github"></i>Modifier cette page</a></li><li><a href="https://github.com/linogaliana/python-datascientist/issues/new" class="toc-action"><i class="bi empty"></i>Faire part d'un problème</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<a href="#" onclick="this.href = location.href.replace('/fr/', '/').replace(/^(https?:\/\/[^\/]+)\//, '$1/en/');" class="button-cta">
<button class="btn"><i class="fa fa-language"></i> Switch to English version 🇬🇧 🇺🇸</button>
</a></p>
<p>Pour essayer les exemples présents dans ce tutoriel :</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="684" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 683;"><span id="cb1-684"><a href="#cb1-684" aria-hidden="true" tabindex="-1"></a>path <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="at">location</span><span class="op">.</span><span class="at">pathname</span><span class="op">.</span><span class="fu">replace</span>(<span class="st">".html"</span><span class="op">,</span> <span class="st">".qmd"</span>)<span class="op">;</span></span>
<span id="cb1-685"><a href="#cb1-685" aria-hidden="true" tabindex="-1"></a>path_modified <span class="op">=</span> (path<span class="op">.</span><span class="fu">includes</span>(<span class="st">'en/content'</span>)) <span class="op">?</span> path<span class="op">.</span><span class="fu">replace</span>(<span class="st">'en/content'</span><span class="op">,</span> <span class="st">'content/en'</span>) <span class="op">:</span> path</span>
<span id="cb1-686"><a href="#cb1-686" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`</span><span class="sc">${</span><span class="fu">printBadges</span>({<span class="dt">fpath</span><span class="op">:</span> path_modified})<span class="sc">}</span><span class="vs">`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-3" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="689" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 688;"><span id="cb2-689"><a href="#cb2-689" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;div&gt;</span><span class="sc">${</span><span class="fu">getConditionalHTML</span>(path<span class="op">,</span> <span class="kw">true</span>)<span class="sc">}</span><span class="vs">&lt;/div&gt;`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="719" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 718;"><span id="cb3-719"><a href="#cb3-719" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">isBetweenSeptAndDec</span>() {</span>
<span id="cb3-720"><a href="#cb3-720" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> now <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">;</span></span>
<span id="cb3-721"><a href="#cb3-721" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> start <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(now<span class="op">.</span><span class="fu">getFullYear</span>()<span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span> <span class="co">// September 1st (month is zero-indexed)</span></span>
<span id="cb3-722"><a href="#cb3-722" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> end <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(now<span class="op">.</span><span class="fu">getFullYear</span>()<span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">24</span>)<span class="op">;</span> <span class="co">// December 24th (month is zero-indexed)</span></span>
<span id="cb3-723"><a href="#cb3-723" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-724"><a href="#cb3-724" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> now <span class="op">&gt;=</span> start <span class="op">&amp;&amp;</span> now <span class="op">&lt;=</span> end<span class="op">;</span></span>
<span id="cb3-725"><a href="#cb3-725" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="729" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 728;"><span id="cb4-729"><a href="#cb4-729" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">getConditionalHTML</span>(path<span class="op">,</span> print) {</span>
<span id="cb4-730"><a href="#cb4-730" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (print <span class="op">===</span> <span class="kw">false</span>) <span class="cf">return</span> <span class="vs">``</span></span>
<span id="cb4-731"><a href="#cb4-731" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">isBetweenSeptAndDec</span>()) {</span>
<span id="cb4-732"><a href="#cb4-732" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">md</span><span class="vs">`&lt;i&gt;La correction sera visible prochainement sur cette page. En attendant, la liste des corrections déjà acccessibles est [ici](/content/annexes/corrections.html)&lt;/i&gt;`</span><span class="op">;</span> <span class="co">// Return an empty string if not between the dates</span></span>
<span id="cb4-733"><a href="#cb4-733" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb4-734"><a href="#cb4-734" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb4-735"><a href="#cb4-735" aria-hidden="true" tabindex="-1"></a><span class="vs">        &lt;details&gt;</span></span>
<span id="cb4-736"><a href="#cb4-736" aria-hidden="true" tabindex="-1"></a><span class="vs">            &lt;summary&gt;</span></span>
<span id="cb4-737"><a href="#cb4-737" aria-hidden="true" tabindex="-1"></a><span class="vs">                Pour ouvrir la version corrigée sous forme de &lt;i&gt;notebook&lt;/i&gt;</span></span>
<span id="cb4-738"><a href="#cb4-738" aria-hidden="true" tabindex="-1"></a><span class="vs">            &lt;/summary&gt;</span></span>
<span id="cb4-739"><a href="#cb4-739" aria-hidden="true" tabindex="-1"></a><span class="vs">            </span><span class="sc">${</span><span class="fu">printBadges</span>({ <span class="dt">fpath</span><span class="op">:</span> path<span class="op">,</span> <span class="dt">correction</span><span class="op">:</span> <span class="kw">true</span> })<span class="sc">}</span></span>
<span id="cb4-740"><a href="#cb4-740" aria-hidden="true" tabindex="-1"></a><span class="vs">        &lt;/details&gt;</span></span>
<span id="cb4-741"><a href="#cb4-741" aria-hidden="true" tabindex="-1"></a><span class="vs">        `</span><span class="op">;</span></span>
<span id="cb4-742"><a href="#cb4-742" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-743"><a href="#cb4-743" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="758" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 757;"><span id="cb5-758"><a href="#cb5-758" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">renderCorrection</span>({ fpath<span class="op">,</span> correction }) {</span>
<span id="cb5-759"><a href="#cb5-759" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (correction) {</span>
<span id="cb5-760"><a href="#cb5-760" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">html</span><span class="vs">`</span><span class="sc">${</span><span class="fu">printBadges</span>({ <span class="dt">fpath</span><span class="op">:</span> fpath<span class="op">,</span> <span class="dt">correction</span><span class="op">:</span> <span class="kw">true</span> })<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb5-761"><a href="#cb5-761" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb5-762"><a href="#cb5-762" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">html</span><span class="vs">`&lt;i&gt;La correction sera visible prochainement sur cette page.&lt;/i&gt;`</span><span class="op">;</span></span>
<span id="cb5-763"><a href="#cb5-763" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-764"><a href="#cb5-764" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb6" data-startfrom="766" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 765;"><span id="cb6-766"><a href="#cb6-766" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">reminderBadges</span>({</span>
<span id="cb6-767"><a href="#cb6-767" aria-hidden="true" tabindex="-1"></a>    sourceFile <span class="op">=</span> <span class="st">"content/01_toto.Rmd"</span><span class="op">,</span></span>
<span id="cb6-768"><a href="#cb6-768" aria-hidden="true" tabindex="-1"></a>    type <span class="op">=</span> [<span class="st">'md'</span><span class="op">,</span> <span class="st">'html'</span>]<span class="op">,</span></span>
<span id="cb6-769"><a href="#cb6-769" aria-hidden="true" tabindex="-1"></a>    split <span class="op">=</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb6-770"><a href="#cb6-770" aria-hidden="true" tabindex="-1"></a>    onyxiaOnly <span class="op">=</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb6-771"><a href="#cb6-771" aria-hidden="true" tabindex="-1"></a>    sspCloudService <span class="op">=</span> <span class="st">"python"</span><span class="op">,</span></span>
<span id="cb6-772"><a href="#cb6-772" aria-hidden="true" tabindex="-1"></a>    GPU <span class="op">=</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb6-773"><a href="#cb6-773" aria-hidden="true" tabindex="-1"></a>    correction <span class="op">=</span> <span class="kw">false</span></span>
<span id="cb6-774"><a href="#cb6-774" aria-hidden="true" tabindex="-1"></a>} <span class="op">=</span> {}) {</span>
<span id="cb6-775"><a href="#cb6-775" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="bu">Array</span><span class="op">.</span><span class="fu">isArray</span>(type)) {</span>
<span id="cb6-776"><a href="#cb6-776" aria-hidden="true" tabindex="-1"></a>        type <span class="op">=</span> type[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb6-777"><a href="#cb6-777" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-778"><a href="#cb6-778" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-779"><a href="#cb6-779" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> notebook <span class="op">=</span> sourceFile<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/</span><span class="sc">(</span><span class="ss">.Rmd</span><span class="sc">|</span><span class="ss">.qmd</span><span class="sc">)</span><span class="ss">/</span><span class="op">,</span> <span class="st">".ipynb"</span>)<span class="op">;</span></span>
<span id="cb6-780"><a href="#cb6-780" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (correction) {</span>
<span id="cb6-781"><a href="#cb6-781" aria-hidden="true" tabindex="-1"></a>        notebook <span class="op">=</span> notebook<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/content/</span><span class="op">,</span> <span class="st">"corrections"</span>)<span class="op">;</span></span>
<span id="cb6-782"><a href="#cb6-782" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb6-783"><a href="#cb6-783" aria-hidden="true" tabindex="-1"></a>        notebook <span class="op">=</span> notebook<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/content/</span><span class="op">,</span> <span class="st">"notebooks"</span>)<span class="op">;</span></span>
<span id="cb6-784"><a href="#cb6-784" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-785"><a href="#cb6-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-786"><a href="#cb6-786" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> githubRepoNotebooksSimplified <span class="op">=</span> <span class="st">"github/linogaliana/python-datascientist-notebooks"</span><span class="op">;</span></span>
<span id="cb6-787"><a href="#cb6-787" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> githubAlias <span class="op">=</span> githubRepoNotebooksSimplified<span class="op">.</span><span class="fu">replace</span>(<span class="st">"github"</span><span class="op">,</span> <span class="st">"github.com"</span>)<span class="op">;</span></span>
<span id="cb6-788"><a href="#cb6-788" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> githubRepoNotebooks <span class="op">=</span> <span class="vs">`https://</span><span class="sc">${</span>githubAlias<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb6-789"><a href="#cb6-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-790"><a href="#cb6-790" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> githubLink <span class="op">;</span></span>
<span id="cb6-791"><a href="#cb6-791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-792"><a href="#cb6-792" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (notebook <span class="op">===</span> <span class="st">""</span>) {</span>
<span id="cb6-793"><a href="#cb6-793" aria-hidden="true" tabindex="-1"></a>        githubLink <span class="op">=</span> githubRepoNotebooks<span class="op">;</span></span>
<span id="cb6-794"><a href="#cb6-794" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb6-795"><a href="#cb6-795" aria-hidden="true" tabindex="-1"></a>        githubLink <span class="op">=</span> <span class="vs">`</span><span class="sc">${</span>githubRepoNotebooks<span class="sc">}</span><span class="vs">/blob/main`</span><span class="op">;</span></span>
<span id="cb6-796"><a href="#cb6-796" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-797"><a href="#cb6-797" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-798"><a href="#cb6-798" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> notebookRelPath <span class="op">=</span> <span class="vs">`/</span><span class="sc">${</span>notebook<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb6-799"><a href="#cb6-799" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> [section<span class="op">,</span> chapter] <span class="op">=</span> notebook<span class="op">.</span><span class="fu">split</span>(<span class="st">"/"</span>)<span class="op">.</span><span class="fu">slice</span>(<span class="op">-</span><span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb6-800"><a href="#cb6-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-801"><a href="#cb6-801" aria-hidden="true" tabindex="-1"></a>    githubLink <span class="op">=</span> <span class="vs">`&lt;a href="</span><span class="sc">${</span>githubLink<span class="sc">}${</span>notebookRelPath<span class="sc">}</span><span class="vs">" class="github"&gt;&lt;i class="fab fa-github"&gt;&lt;/i&gt;&lt;/a&gt;`</span><span class="op">;</span></span>
<span id="cb6-802"><a href="#cb6-802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-803"><a href="#cb6-803" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> sectionLatest <span class="op">=</span> section<span class="op">.</span><span class="fu">split</span>(<span class="st">"/"</span>)<span class="op">.</span><span class="fu">slice</span>(<span class="op">-</span><span class="dv">1</span>)[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb6-804"><a href="#cb6-804" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> chapterNoExtension <span class="op">=</span> chapter<span class="op">.</span><span class="fu">replace</span>(<span class="st">".ipynb"</span><span class="op">,</span> <span class="st">""</span>)<span class="op">;</span></span>
<span id="cb6-805"><a href="#cb6-805" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-806"><a href="#cb6-806" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (sourceFile<span class="op">.</span><span class="fu">includes</span>(<span class="st">'en/'</span>)) {</span>
<span id="cb6-807"><a href="#cb6-807" aria-hidden="true" tabindex="-1"></a>        sectionLatest <span class="op">=</span> <span class="vs">`en/</span><span class="sc">${</span>sectionLatest<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb6-808"><a href="#cb6-808" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-809"><a href="#cb6-809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-810"><a href="#cb6-810" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> onyxiaInitArgs <span class="op">=</span> [sectionLatest<span class="op">,</span> chapterNoExtension]<span class="op">;</span></span>
<span id="cb6-811"><a href="#cb6-811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-812"><a href="#cb6-812" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (correction) {</span>
<span id="cb6-813"><a href="#cb6-813" aria-hidden="true" tabindex="-1"></a>        onyxiaInitArgs<span class="op">.</span><span class="fu">push</span>(<span class="st">"correction"</span>)<span class="op">;</span></span>
<span id="cb6-814"><a href="#cb6-814" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-815"><a href="#cb6-815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-816"><a href="#cb6-816" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> gpuSuffix <span class="op">=</span> GPU <span class="op">?</span> <span class="st">"-gpu"</span> <span class="op">:</span> <span class="st">""</span><span class="op">;</span></span>
<span id="cb6-817"><a href="#cb6-817" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-818"><a href="#cb6-818" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> sspcloudJupyterLinkLauncher <span class="op">=</span> <span class="vs">`https://datalab.sspcloud.fr/launcher/ide/jupyter-</span><span class="sc">${</span>sspCloudService<span class="sc">}${</span>gpuSuffix<span class="sc">}</span><span class="vs">?autoLaunch=true&amp;onyxia.friendlyName=%C2%AB</span><span class="sc">${</span>chapterNoExtension<span class="sc">}</span><span class="vs">%C2%BB&amp;init.personalInit=%C2%ABhttps%3A%2F%2Fraw.githubusercontent.com%2Flinogaliana%2Fpython-datascientist%2Fmaster%2Fsspcloud%2Finit-jupyter.sh%C2%BB&amp;init.personalInitArgs=%C2%AB</span><span class="sc">${</span>onyxiaInitArgs<span class="op">.</span><span class="fu">join</span>(<span class="st">'%20'</span>)<span class="sc">}</span><span class="vs">%C2%BB&amp;security.allowlist.enabled=false`</span><span class="op">;</span></span>
<span id="cb6-819"><a href="#cb6-819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-820"><a href="#cb6-820" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> sspcloudJupyterLink<span class="op">;</span></span>
<span id="cb6-821"><a href="#cb6-821" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (type <span class="op">===</span> <span class="st">"md"</span>) {</span>
<span id="cb6-822"><a href="#cb6-822" aria-hidden="true" tabindex="-1"></a>        sspcloudJupyterLink <span class="op">=</span> <span class="vs">`[![Onyxia](https://img.shields.io/badge/SSP%20Cloud-Tester_avec_Jupyter-orange?logo=Jupyter&amp;logoColor=orange)](</span><span class="sc">${</span>sspcloudJupyterLinkLauncher<span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></span>
<span id="cb6-823"><a href="#cb6-823" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb6-824"><a href="#cb6-824" aria-hidden="true" tabindex="-1"></a>        sspcloudJupyterLink <span class="op">=</span> <span class="vs">`&lt;a href="</span><span class="sc">${</span>sspcloudJupyterLinkLauncher<span class="sc">}</span><span class="vs">" target="_blank" rel="noopener"&gt;&lt;img src="https://img.shields.io/badge/SSP%20Cloud-Tester_avec_Jupyter-orange?logo=Jupyter&amp;logoColor=orange" alt="Onyxia"&gt;&lt;/a&gt;`</span><span class="op">;</span></span>
<span id="cb6-825"><a href="#cb6-825" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-826"><a href="#cb6-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-827"><a href="#cb6-827" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (split <span class="op">===</span> <span class="dv">4</span>) {</span>
<span id="cb6-828"><a href="#cb6-828" aria-hidden="true" tabindex="-1"></a>        sspcloudJupyterLink <span class="op">+=</span> <span class="st">'&lt;br&gt;'</span><span class="op">;</span></span>
<span id="cb6-829"><a href="#cb6-829" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-830"><a href="#cb6-830" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-831"><a href="#cb6-831" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> sspcloudVscodeLinkLauncher <span class="op">=</span> <span class="vs">`https://datalab.sspcloud.fr/launcher/ide/vscode-</span><span class="sc">${</span>sspCloudService<span class="sc">}${</span>gpuSuffix<span class="sc">}</span><span class="vs">?autoLaunch=true&amp;onyxia.friendlyName=%C2%AB</span><span class="sc">${</span>chapterNoExtension<span class="sc">}</span><span class="vs">%C2%BB&amp;init.personalInit=%C2%ABhttps%3A%2F%2Fraw.githubusercontent.com%2Flinogaliana%2Fpython-datascientist%2Fmaster%2Fsspcloud%2Finit-vscode.sh%C2%BB&amp;init.personalInitArgs=%C2%AB</span><span class="sc">${</span>onyxiaInitArgs<span class="op">.</span><span class="fu">join</span>(<span class="st">'%20'</span>)<span class="sc">}</span><span class="vs">%C2%BB&amp;security.allowlist.enabled=false`</span><span class="op">;</span></span>
<span id="cb6-832"><a href="#cb6-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-833"><a href="#cb6-833" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> sspcloudVscodeLink<span class="op">;</span></span>
<span id="cb6-834"><a href="#cb6-834" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (type <span class="op">===</span> <span class="st">"md"</span>) {</span>
<span id="cb6-835"><a href="#cb6-835" aria-hidden="true" tabindex="-1"></a>        sspcloudVscodeLink <span class="op">=</span> <span class="vs">`[![Onyxia](https://img.shields.io/badge/SSP%20Cloud-Tester_avec_VSCode-blue?logo=visualstudiocode&amp;logoColor=blue)](</span><span class="sc">${</span>sspcloudVscodeLinkLauncher<span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></span>
<span id="cb6-836"><a href="#cb6-836" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb6-837"><a href="#cb6-837" aria-hidden="true" tabindex="-1"></a>        sspcloudVscodeLink <span class="op">=</span> <span class="vs">`&lt;a href="</span><span class="sc">${</span>sspcloudVscodeLinkLauncher<span class="sc">}</span><span class="vs">" target="_blank" rel="noopener"&gt;&lt;img src="https://img.shields.io/badge/SSP%20Cloud-Tester_avec_VSCode-blue?logo=visualstudiocode&amp;logoColor=blue" alt="Onyxia"&gt;&lt;/a&gt;`</span><span class="op">;</span></span>
<span id="cb6-838"><a href="#cb6-838" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-839"><a href="#cb6-839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-840"><a href="#cb6-840" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (split <span class="op">===</span> <span class="dv">5</span>) {</span>
<span id="cb6-841"><a href="#cb6-841" aria-hidden="true" tabindex="-1"></a>        sspcloudVscodeLink <span class="op">+=</span> <span class="st">'&lt;br&gt;'</span><span class="op">;</span></span>
<span id="cb6-842"><a href="#cb6-842" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-843"><a href="#cb6-843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-844"><a href="#cb6-844" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> colabLink<span class="op">;</span></span>
<span id="cb6-845"><a href="#cb6-845" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (type <span class="op">===</span> <span class="st">"md"</span>) {</span>
<span id="cb6-846"><a href="#cb6-846" aria-hidden="true" tabindex="-1"></a>        colabLink <span class="op">=</span> <span class="vs">`[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](http://colab.research.google.com/</span><span class="sc">${</span>githubRepoNotebooksSimplified<span class="sc">}</span><span class="vs">/blob/main</span><span class="sc">${</span>notebookRelPath<span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></span>
<span id="cb6-847"><a href="#cb6-847" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb6-848"><a href="#cb6-848" aria-hidden="true" tabindex="-1"></a>        colabLink <span class="op">=</span> <span class="vs">`&lt;a href="https://colab.research.google.com/</span><span class="sc">${</span>githubRepoNotebooksSimplified<span class="sc">}</span><span class="vs">/blob/main</span><span class="sc">${</span>notebookRelPath<span class="sc">}</span><span class="vs">" target="_blank" rel="noopener"&gt;&lt;img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"&gt;&lt;/a&gt;`</span><span class="op">;</span></span>
<span id="cb6-849"><a href="#cb6-849" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-850"><a href="#cb6-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-851"><a href="#cb6-851" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (split <span class="op">===</span> <span class="dv">7</span>) {</span>
<span id="cb6-852"><a href="#cb6-852" aria-hidden="true" tabindex="-1"></a>        colabLink <span class="op">+=</span> <span class="st">'&lt;br&gt;'</span><span class="op">;</span></span>
<span id="cb6-853"><a href="#cb6-853" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-854"><a href="#cb6-854" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-855"><a href="#cb6-855" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> vscodeLink<span class="op">;</span></span>
<span id="cb6-856"><a href="#cb6-856" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (type <span class="op">===</span> <span class="st">"md"</span>) {</span>
<span id="cb6-857"><a href="#cb6-857" aria-hidden="true" tabindex="-1"></a>        vscodeLink <span class="op">=</span> <span class="vs">`[![githubdev](https://img.shields.io/static/v1?logo=visualstudiocode&amp;label=&amp;message=Open%20in%20Visual Studio Code&amp;labelColor=2c2c32&amp;color=007acc&amp;logoColor=007acc)](https://github.dev/linogaliana/python-datascientist-notebooks</span><span class="sc">${</span>notebookRelPath<span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></span>
<span id="cb6-858"><a href="#cb6-858" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb6-859"><a href="#cb6-859" aria-hidden="true" tabindex="-1"></a>        vscodeLink <span class="op">=</span> <span class="vs">`&lt;a href="https://github.dev/linogaliana/python-datascientist-notebooks</span><span class="sc">${</span>notebookRelPath<span class="sc">}</span><span class="vs">" target="_blank" rel="noopener"&gt;&lt;img src="https://img.shields.io/static/v1?logo=visualstudiocode&amp;label=&amp;message=Open%20in%20Visual%20Studio%20Code&amp;labelColor=2c2c32&amp;color=007acc&amp;logoColor=007acc" alt="githubdev"&gt;&lt;/a&gt;&lt;/p&gt;`</span><span class="op">;</span></span>
<span id="cb6-860"><a href="#cb6-860" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-861"><a href="#cb6-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-862"><a href="#cb6-862" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> badges <span class="op">=</span> [</span>
<span id="cb6-863"><a href="#cb6-863" aria-hidden="true" tabindex="-1"></a>        githubLink<span class="op">,</span></span>
<span id="cb6-864"><a href="#cb6-864" aria-hidden="true" tabindex="-1"></a>        sspcloudVscodeLink<span class="op">,</span></span>
<span id="cb6-865"><a href="#cb6-865" aria-hidden="true" tabindex="-1"></a>        sspcloudJupyterLink</span>
<span id="cb6-866"><a href="#cb6-866" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">;</span></span>
<span id="cb6-867"><a href="#cb6-867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-868"><a href="#cb6-868" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>onyxiaOnly) {</span>
<span id="cb6-869"><a href="#cb6-869" aria-hidden="true" tabindex="-1"></a>        badges<span class="op">.</span><span class="fu">push</span>(colabLink)<span class="op">;</span></span>
<span id="cb6-870"><a href="#cb6-870" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-871"><a href="#cb6-871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-872"><a href="#cb6-872" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> result <span class="op">=</span> badges<span class="op">.</span><span class="fu">join</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)<span class="op">;</span></span>
<span id="cb6-873"><a href="#cb6-873" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-874"><a href="#cb6-874" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (type <span class="op">===</span> <span class="st">"html"</span>) {</span>
<span id="cb6-875"><a href="#cb6-875" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> <span class="vs">`&lt;p class="badges"&gt;</span><span class="sc">${</span>result<span class="sc">}</span><span class="vs">&lt;/p&gt;`</span><span class="op">;</span></span>
<span id="cb6-876"><a href="#cb6-876" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-877"><a href="#cb6-877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-878"><a href="#cb6-878" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (onyxiaOnly) {</span>
<span id="cb6-879"><a href="#cb6-879" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> <span class="vs">`</span><span class="sc">${</span>sspcloudJupyterLink<span class="sc">}${</span>sspcloudVscodeLink<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb6-880"><a href="#cb6-880" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-881"><a href="#cb6-881" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-882"><a href="#cb6-882" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb6-883"><a href="#cb6-883" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-884"><a href="#cb6-884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-885"><a href="#cb6-885" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-886"><a href="#cb6-886" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">printBadges</span>({</span>
<span id="cb6-887"><a href="#cb6-887" aria-hidden="true" tabindex="-1"></a>    fpath<span class="op">,</span></span>
<span id="cb6-888"><a href="#cb6-888" aria-hidden="true" tabindex="-1"></a>    onyxiaOnly <span class="op">=</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb6-889"><a href="#cb6-889" aria-hidden="true" tabindex="-1"></a>    split <span class="op">=</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb6-890"><a href="#cb6-890" aria-hidden="true" tabindex="-1"></a>    type <span class="op">=</span> <span class="st">"html"</span><span class="op">,</span></span>
<span id="cb6-891"><a href="#cb6-891" aria-hidden="true" tabindex="-1"></a>    sspCloudService <span class="op">=</span> <span class="st">"python"</span><span class="op">,</span></span>
<span id="cb6-892"><a href="#cb6-892" aria-hidden="true" tabindex="-1"></a>    GPU <span class="op">=</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb6-893"><a href="#cb6-893" aria-hidden="true" tabindex="-1"></a>    correction <span class="op">=</span> <span class="kw">false</span></span>
<span id="cb6-894"><a href="#cb6-894" aria-hidden="true" tabindex="-1"></a>} <span class="op">=</span> {}) {</span>
<span id="cb6-895"><a href="#cb6-895" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> badges <span class="op">=</span> <span class="fu">reminderBadges</span>({</span>
<span id="cb6-896"><a href="#cb6-896" aria-hidden="true" tabindex="-1"></a>        <span class="dt">sourceFile</span><span class="op">:</span> fpath<span class="op">,</span></span>
<span id="cb6-897"><a href="#cb6-897" aria-hidden="true" tabindex="-1"></a>        <span class="dt">type</span><span class="op">:</span> type<span class="op">,</span></span>
<span id="cb6-898"><a href="#cb6-898" aria-hidden="true" tabindex="-1"></a>        <span class="dt">split</span><span class="op">:</span> split<span class="op">,</span></span>
<span id="cb6-899"><a href="#cb6-899" aria-hidden="true" tabindex="-1"></a>        <span class="dt">onyxiaOnly</span><span class="op">:</span> onyxiaOnly<span class="op">,</span></span>
<span id="cb6-900"><a href="#cb6-900" aria-hidden="true" tabindex="-1"></a>        <span class="dt">sspCloudService</span><span class="op">:</span> sspCloudService<span class="op">,</span></span>
<span id="cb6-901"><a href="#cb6-901" aria-hidden="true" tabindex="-1"></a>        <span class="dt">GPU</span><span class="op">:</span> GPU<span class="op">,</span></span>
<span id="cb6-902"><a href="#cb6-902" aria-hidden="true" tabindex="-1"></a>        <span class="dt">correction</span><span class="op">:</span> correction</span>
<span id="cb6-903"><a href="#cb6-903" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb6-904"><a href="#cb6-904" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-905"><a href="#cb6-905" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> badges</span>
<span id="cb6-906"><a href="#cb6-906" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<section id="quelle-différence-avec-des-données-traditionnelles" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="quelle-différence-avec-des-données-traditionnelles"><span class="header-section-number">1.1</span> Quelle différence avec des données traditionnelles ?</h2>
<p>Les chapitres précédents ont permis de découvrir la manière
dont des données structurées peuvent être valorisées
grâce à la librairie <code>Pandas</code>. Nous allons maintenant découvrir l’analyse
de données plus complexes, à savoir les données spatiales.
Ces
dernières sont une sophistication des données tabulaires puisqu’en plus
de partager les propriétés de celles-ci (données aplaties dans une structure de colonnes et de lignes), elles comportent une dimension géographique supplémentaire. Celle-ci est plus ou moins complexe selon la nature des données: cela peut être des points (coordonnées de localisation en deux dimensions), des lignes (une suite de points), des lignes directionnelles (la même structure précédemment mais avec une direction), des polygones (un ensemble de points)… Cette diversité des objets géographiques vise à permettre des systèmes d’information et de représentation de nombreux objets géographiques.</p>
<p>Par la suite, nous entendrons par <em>“données spatiales”</em> l’ensemble des données qui portent sur les caractéristiques géographiques des objets (localisation, contours, liens).
Les caractéristiques géographiques des objets sont décrites à l’aide d’un <strong>système de coordonnées</strong>. Celles-ci
permettent de représenter l’objet géographique dans un espace euclidien à deux dimensions <span class="math inline">\((x,y)\)</span>.
Le passage de l’espace réel (la Terre, qui est une sphère en trois dimensions) à l’espace plan
se fait grâce à un <strong>système de projection</strong>.</p>
</section>
<section id="structure-des-données-spatiales" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="structure-des-données-spatiales"><span class="header-section-number">1.2</span> Structure des données spatiales</h2>
<p>Les données spatiales rassemblent classiquement deux types de données :</p>
<ol type="1">
<li>des <strong>données géographiques</strong> (ou géométries) : objets géométriques tels que des points, des vecteurs, des polygones, ou des maillages (<em>raster</em>). Exemple: la forme de chaque commune, les coordonnées d’un bâtiment;</li>
<li>des <strong>données attributaires</strong> (ou attributs) : des mesures et des caractéristiques associées aux objets géométriques. Exemple: la population de chaque commune, le nombre de fenêtres et le nombre d’étages d’un bâtiment.</li>
</ol>
<p><strong>Les données spatiales sont fréquemment traitées à l’aide d’un système d’information géographique (SIG)</strong>, c’est-à-dire un système d’information capable de stocker, d’organiser et de présenter des données alphanumériques spatialement référencées par des coordonnées dans un système de référence (CRS). <code>Python</code> dispose de fonctionnalités lui permettant de réaliser les mêmes tâches qu’un SIG (traitement de données spatiales, représentations cartographiques).</p>
</section>
<section id="les-données-spatiales-sont-incontournables" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="les-données-spatiales-sont-incontournables"><span class="header-section-number">1.3</span> Les données spatiales sont incontournables</h2>
<p>D’un usage initialement essentiellement militaire ou administratif, la production cartographique est, depuis au moins le XIXe siècle, très fréquente
pour représenter de l’information socioéconomique. La représentation la plus connue dans ce domaine
est la carte par aplat de couleur, dite carte choroplèthe<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<p>D’après <span class="citation" data-cites="chen2008brief">Chen et al. (<a href="#ref-chen2008brief" role="doc-biblioref">2008</a>)</span>, la première représentation de ce type
a été proposée par Charles Dupin en 1926
pour représenter les niveaux d’instruction sur le territoire français.
L’émergence des cartes choroplèthes est en effet indissociable
de l’organisation du pouvoir sous forme d’entités pensées
politiques supposées unitaires:
les cartes du monde représentent souvent des aplats de couleurs à partir
des nations, les cartes nationales à partir d’échelons administratifs
(régions, départements, communes, mais aussi Etats ou <em>landers</em>).</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/Carte_figurative_de_l%27instruction_populaire_de_la_France.jpg/800px-Carte_figurative_de_l%27instruction_populaire_de_la_France.jpg" class="img-fluid quarto-figure quarto-figure-center" style="width:60.0%" alt="La première carte choroplèthes par Dupin (1826)">.</p>
<p>Si la production d’information géographique a pu être très liée à un usage militaire puis à la gestion administrative d’un territoire, la
numérisation de l’économie ayant démultipliée les acteurs concernés par la collecte et la mise à disposition de données géographique, la manipulation et la représentation de données spatiales n’est plus l’apanage des géographes et géomaticiens. Les <em>data scientists</em> doivent être capables de rapidement explorer la structure d’un jeu de données géographique comme ils le feraient d’un jeu de données tabulaires classiques.</p>
</section>
<section id="où-trouver-la-donnée-spatiale-française" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="où-trouver-la-donnée-spatiale-française"><span class="header-section-number">1.4</span> Où trouver la donnée spatiale française ?</h2>
<p>Lors de notre périple de découverte de <code>Pandas</code>,
nous avons déjà rencontré quelques sources géolocalisées,
notamment produites par l’Insee. Cette institution publie
de nombreuses statistiques locales, par exemple les données
Filosofi que nous avons rencontrées au chapitre précédent. Au-delà
de l’Insee, l’ensemble des institutions du système
statistique public (Insee et services statistiques ministériels)
publie de nombreuses sources de données agrégées à différentes
mailles géographiques: à un niveau infracommunal (par exemple par <a href="https://www.insee.fr/fr/statistiques/6215138?sommaire=6215217">carreaux de 200m</a>),
au niveau communal ou à des niveaux supracommunaux (zonages administratifs ou zonages d’études).</p>
<p>Plus généralement, de nombreuses administrations françaises hors
du système statistique public diffusent des données
géographiques sur <a href="https://www.data.gouv.fr/fr/">data.gouv</a>. Nous avons par exemple précédemment exploité un jeu de données de l’Ademe dont la dimension géographique était la commune.</p>
<p>L’acteur central de l’écosystème public de la donnée géographique est l’<a href="https://www.ign.fr/">IGN</a>. Bien connu des amateurs de randonnées pour ses cartes <em>“Top 25”</em> qui peuvent être retrouvées sur le <a href="https://www.geoportail.gouv.fr/carte">geoportail</a>, l’IGN est également en charge de la cartographie des limites légales des entités administratives françaises (base AdminExpress), des forêts (BDForêt), des routes (BDRoute), des bâtiments (BDTopo), etc. Nous avons succinctement évoqué la librairie <a href="https://github.com/InseeFrLab/cartiflette"><code>cartiflette</code></a> lors du chapitre précédent, qui permet de récupérer les fonds de carte administratifs (base AdminExpress) de manière flexible avec <code>Python</code> ; nous irons plus loin dans ce chapitre.</p>
<p>La puissance publique n’est plus l’unique acteur qui produit et diffuse de la donnée spatiale. La collecte de coordonnées GPS étant devenue presque automatique, de nombreux acteurs collectent, exploitent et même revendent de la donnée spatiale sur leurs utilisateurs. Ces données peuvent être très précises et très riches sur certaines problématiques, par exemple sur les déplacements. Il est néanmoins nécessaire d’avoir à l’esprit lorsqu’on désire
extrapoler des statistiques construites sur ces données que celles-ci concernent les utilisateurs du service en question, qui ne sont pas nécessairement représentatifs des comportements de la population dans son ensemble.</p>
</section>
<section id="objectifs-de-ce-chapitre" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="objectifs-de-ce-chapitre"><span class="header-section-number">1.5</span> Objectifs de ce chapitre</h2>
<p>Ce chapitre illustre à partir d’exemples pratiques certains principes centraux de l’analyse de données :</p>
<ul>
<li>Manipulations sur les attributs des jeux de données ;</li>
<li>Manipulations géométriques ;</li>
<li>Gestion des projections cartographiques ;</li>
<li>Création rapide de cartes (ce sera approfondi dans un prochain chapitre).</li>
</ul>
</section>
<section id="données-utilisées-dans-ce-chapitre" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="données-utilisées-dans-ce-chapitre"><span class="header-section-number">1.6</span> Données utilisées dans ce chapitre</h2>
<p>Dans ce tutoriel, nous allons utiliser les données suivantes :</p>
<ul>
<li><a href="https://opendata.paris.fr/explore/dataset/velib-emplacement-des-stations/download/?format=geojson&amp;timezone=Europe/Berlin&amp;lang=fr">Localisations des stations velib</a> ;</li>
<li><a href="https://geoservices.ign.fr/adminexpress">fonds de carte <code>AdminExpress</code></a> à
travers un package <code>Python</code> nommé <a href="https://github.com/InseeFrLab/cartiflette"><code>cartiflette</code></a>
facilitant la récupération de cette source.</li>
</ul>
</section>
<section id="installations-préalables" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="installations-préalables"><span class="header-section-number">1.7</span> Installations préalables</h2>
<p>Ce tutoriel nécessite quelques installations de packages
pour pouvoir être reproduit</p>
<div id="install-dependencies" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="install-dependencies"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="install-dependencies-1"><a href="#install-dependencies-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install pandas fiona shapely pyproj rtree </span>
<span id="install-dependencies-2"><a href="#install-dependencies-2" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install contextily</span>
<span id="install-dependencies-3"><a href="#install-dependencies-3" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install geopandas</span>
<span id="install-dependencies-4"><a href="#install-dependencies-4" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install topojson</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Pour être en mesure d’exécuter ce tutoriel, les imports suivants
seront utiles.</p>
<div id="load-dependencies" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="load-dependencies"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="load-dependencies-1"><a href="#load-dependencies-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="load-dependencies-2"><a href="#load-dependencies-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> contextily <span class="im">as</span> ctx</span>
<span id="load-dependencies-3"><a href="#load-dependencies-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Le package <code>cartiflette</code> est expérimental
et n’est disponible que sur
<a href="https://github.com/InseeFrLab/cartogether"><code>Github</code></a>, pas sur <code>PyPi</code>.
Il est amené à évoluer rapidement et cette page sera mise à jour
quand de nouvelles fonctionalités (notamment l’utilisation d’<code>API</code>)
seront disponibles pour encore simplifier la récupération de
contours géographiques.</p>
</div>
</div>
</div>
<p>Pour installer <code>cartiflette</code>, il est nécessaire d’utiliser les commandes suivantes
depuis un <code>Jupyter Notebook</code> (si vous utilisez la ligne de commande directement,
vous pouvez retirer les <code>!</code> en début de ligne):</p>
<div id="install-cartiflette" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="install-cartiflette"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="install-cartiflette-1"><a href="#install-cartiflette-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install py7zr geopandas openpyxl tqdm s3fs</span>
<span id="install-cartiflette-2"><a href="#install-cartiflette-2" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install PyYAML xlrd</span>
<span id="install-cartiflette-3"><a href="#install-cartiflette-3" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install git<span class="op">+</span>https:<span class="op">//</span>github.com<span class="op">/</span>inseefrlab<span class="op">/</span>cartiflette</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="de-pandas-à-geopandas" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> De <code>Pandas</code> à <code>Geopandas</code></h1>
<p>Le <em>package</em> <code>Geopandas</code> est une boîte à outils conçue pour faciliter la manipulation de données spatiales. <strong>La grande force de <code>Geopandas</code> est qu’il permet de manipuler des données spatiales comme s’il s’agissait de données traditionnelles</strong>, car il repose sur le standard ISO 19125 <a href="https://en.wikipedia.org/wiki/Simple_Features"><em>simple feature access</em></a> défini conjointement par l’<em>Open Geospatial Consortium (OGC)</em> et l’<em>International Organization for Standardization (ISO)</em>. <code>Geopandas</code> repose d’une part sur <code>Pandas</code> pour le traitement de la dimension tabulaire des données spatiales et d’autre part sur <a href="https://shapely.readthedocs.io/en/stable/manual.html"><code>Shapely</code></a> et <a href="https://gdal.org/index.html"><code>GDAL</code></a> pour les manipulations géométriques. Néanmoins, comme <code>Pandas</code> permettait de faire du <code>Numpy</code> sans le savoir, lorsqu’on travaille avec <code>Geopandas</code> on repose sur les deux couches basses que sont <code>Shapely</code> et <code>GDAL</code> sans avoir à s’embêter.</p>
<p>Par rapport à un <em>DataFrame</em> standard, un objet <code>Geopandas</code> comporte
une colonne supplémentaire: <code>geometry</code>. Elle stocke les coordonnées des
objets géographiques (ou ensemble de coordonnées s’agissant de contours). Un objet <code>Geopandas</code> hérite des propriétés d’un
<em>DataFrame</em> <code>Pandas</code> mais propose des méthodes adaptées au traitement des données spatiales. Par conséquent, grâce à <code>GeoPandas</code>, on a des attributs qui reposent sur le principe de données <em>tidy</em> évoquées dans le <a href="content/manipulation/02_pandas_intro.qmd">chapitre précédent</a> alors que la géométrie afférante sera gérée de manière cohérente en parallèle des attributs.</p>
<p>Ainsi, grâce à <code>Geopandas</code>, on pourra effectuer des manipulations sur les attributs des données comme avec <code>pandas</code> mais on pourra également faire des manipulations sur la dimension spatiale des données. En particulier,</p>
<ul>
<li>Calculer des distances et des surfaces ;</li>
<li>Agréger rapidement des zonages (regrouper les communes en département par exemple) ;</li>
<li>Trouver dans quelle commune se trouve un bâtiment à partir de ses coordonnées géographiques ;</li>
<li>Recalculer des coordonnées dans un autre système de projection ;</li>
<li>Faire une carte, rapidement et simplement.</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Les manipulations de données sur un objet <code>Geopandas</code> sont nettement plus lentes que sur
un <code>DataFrame</code> traditionnel (car <code>Python</code> doit gérer les informations géographiques pendant la manipulation des données).
Lorsque vous manipulez des données de grandes dimensions,
il peut être préférable d’effectuer les opérations sur les données avant de joindre une géométrie à celles-ci.</p>
</div>
</div>
</div>
<p>Par rapport à un logiciel spécialisé comme <code>QGIS</code>, <code>Python</code> permettra
d’automatiser le traitement et la représentation des données. D’ailleurs,
<code>QGIS</code> utilise lui-même <code>Python</code>…</p>
<section id="anatomie-dun-objet-geopandas" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="anatomie-dun-objet-geopandas"><span class="header-section-number">2.1</span> Anatomie d’un objet <code>GeoPandas</code></h2>
<p>En résumé, un objet <code>GeoPandas</code> comporte les éléments suivants :</p>
<p><a href="https://rgeo.linogaliana.fr/slides/img/sf.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="https://rgeo.linogaliana.fr/slides/img/sf.png" class="img-fluid"></a></p>
<ol type="1">
<li>Les <strong>attributs</strong>. Ce sont les valeurs associées à chaque niveau géographique.
Il s’agit de la dimension tabulaire usuelle, dont le traitement est similaire
à celui d’un objet <code>Pandas</code> classique.</li>
<li>Les <strong>géométries</strong>. Ce sont les valeurs numériques interprétées pour représenter la dimension géographique. Elles permettent de représenter dans un certain
référentiel (le système de référence) la dimension géographique.</li>
<li>Le <strong>système de référence</strong>. Il s’agit du système permettant de transformer les positions sur
le globe (3 dimensions avec une boule asymétrique) en un plan en deux dimensions.
Il en existe une multitude, identifiables à partir d’un code EPSG (4326, 2154…).
Leur manipulation est facilitée par <code>Geopandas</code> qui s’appuie sur <code>Shapely</code>, de la même
manière que <code>Pandas</code> s’appuie sur <code>Numpy</code> ou <code>Arrow</code>.</li>
</ol>
</section>
</section>
<section id="lire-et-enrichir-des-données-spatiales" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Lire et enrichir des données spatiales</h1>
<p>Dans le chapitre précédent, nous avons évoqué les formats de données
plats comme le <code>CSV</code> ou les nouveaux formats comme <code>Parquet</code>. Ceux-ci
sont adaptés à des données tabulaires.
Pour des données géographiques,
qui stockent de l’information selon plusieurs dimensions (les attributs
et la géométrie), il existe des formats spécialisés.</p>
<section id="le-format-shapefile-.shp-et-le-geopackage-.gpkg" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="le-format-shapefile-.shp-et-le-geopackage-.gpkg"><span class="header-section-number">3.1</span> Le format <em>shapefile</em> (<code>.shp</code>) et le <em>geopackage</em> (<code>.gpkg</code>)</h2>
<p>Le format historique de stockage de données spatiales est le <em><a href="https://fr.wikipedia.org/wiki/Shapefile">shapefile</a></em>. Il s’agit d’un format propriétaire, développé par ESRI, qui est néanmoins devenu une norme <em>de facto</em>. Dans ce format, la donnée est stockée dans plusieurs fichiers:</p>
<ul>
<li><code>data.shp</code> : contient les géométries des entités spatiales (points, lignes, polygones…).</li>
<li><code>data.shx</code> : un index pour accéder rapidement aux géométries stockées dans le fichier <code>.shp</code>.</li>
<li><code>data.dbf</code> : une table attributaire au format dBase qui contient les informations descriptives des entités spatiales.</li>
<li><code>data.prj</code> : contient les informations de projection et de système de coordonnées (nous reviendrons sur ce concept ultérieurement).</li>
</ul>
<p>Ce format présente plusieurs inconvénients. Tout d’abord il est assez volumineux ; certains formats modernes seront plus optimisés pour réduire la volumétrie sur disque et le temps de chargement des données. Surtout, le problème principal du <em>shapefile</em> est que pour lire les données de manière intègre, il est nécessaire de partager de manière systématique ces quatre fichiers, sous peine d’introduire un risque de corruption ou d’incomplétude de la donnée. En faisant <code>gpd.read_file("data.shp")</code>, <code>GeoPandas</code>
fait lui-même le lien entre les observations et leur représentation spatiale qui sont présents dans plusieurs fichiers.</p>
<p>Le format <code>GeoPackage</code> est un héritier spirituel du <em>shapefile</em> visant à résoudre ces deux limites. Il s’agit d’un format libre recommandé par l’<em>open geospatial consortium</em> (OGC). Les géomaticiens apprécient ce format, il s’agit d’ailleurs du format par défaut de QGIS, le logiciel spécialisé pour les SIG. Néanmoins, même si <code>GeoPandas</code> fonctionne bien avec ce format, celui-ci est moins connu par les <em>data scientists</em> que le <em>shapefile</em> ou que le <em>geojson</em> que nous allons décrire par la suite.</p>
</section>
<section id="le-geojson-et-le-topojson" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="le-geojson-et-le-topojson"><span class="header-section-number">3.2</span> Le GeoJSON et le TopoJSON</h2>
<p>Le développement d’un format concurrent l’hégémonie du <em>shapefile</em> est intrinsèquement lié à l’émergence des technologies <em>web</em> dans le secteur de la cartographie. Ces technologies web s’appuient sur Javascript et reposent sur les standards du format JSON.</p>
<p>Le format <em>GeoJSON</em> stocke dans un seul fichier à la fois les attributs et les géométries. Il est donc assez pratique à l’usage et s’est imposé comme le format préféré des développeurs web. Le fait de stocker l’ensemble de l’information dans un seul fichier peut cependant le rendre assez volumineux si les géométries sont très précises, mais le volume reste moindre que celui du <em>shapefile</em>. <code>GeoPandas</code> est très bien fait pour lire des fichiers au format GeoJSON et les plateformes de partage de données, comme <code>data.gouv</code> privilégient ce format à celui du <em>shapefile</em>.</p>
<p>Pour alléger le fichier, le format <code>TopoJSON</code> a récémment émergé. Celui-ci est construit selon les mêmes principes que le <code>GeoJSON</code> mais réduit le volume de données géométriques stockées en ne conservant pas tous les points en appliquant une simplification pour ne conserver que les arcs et les directions entre ceux-ci. Ce format étant récent, il n’est pas encore bien intégré à l’écosystème <code>Python</code>.</p>
</section>
<section id="les-autres-formats-de-données" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="les-autres-formats-de-données"><span class="header-section-number">3.3</span> Les autres formats de données</h2>
<p>L’écosystème des formats de données géographiques est bien plus éclaté que celui des données structurées. Chaque format présente des avantages qui le rendent intéressant pour un type de données mais des limites qui l’empêchent de devenir un standard pour d’autres types de données.</p>
<p>Par exemple, les données GPS extraites de diverses applications (par exemple <code>Strava</code>) sont stockées au format GPX. Ce dernier est particulièrement adapté pour des traces géolocalisées avec une altitude. Mais ce n’est pas le format le plus approprié pour stocker des lignes directionnelles, un prérequis indispensable pour les applications d’itinéraires.</p>
<p>Les formats <em>shapefile</em> et <em>geojson</em> sont suffisamment malléables pour s’adapter aux différents types de données géographiques même s’il ne s’agit
pas du format optimal pour tel ou tel type de données. Dans cette classe généraliste de formats, le <code>Geoparquet</code> pourrait être le prochain format à la mode. Comme son nom l’indique, il s’agit d’une extension du format <code>Parquet</code> à des données géographiques. Ce format n’est pas encore mûr mais reste à suivre, la masse d’utilisateurs de l’écosystème <code>Parquet</code> pouvant amener à un changement rapide si une implémentation stable de <code>Geoparquet</code> émerge.</p>
<p>Cette <a href="https://si.ecrins-parcnational.com/blog/2020-02-geojson-shapefile-geopackage.html">page</a> compare plus en détail les principes formats de données géographiques.
L’aide de <a href="https://geopandas.org/io.html"><code>Geopandas</code></a> propose des bouts de code en fonction des différentes situations dans lesquelles on se trouve.</p>
</section>
<section id="exercice-de-découverte" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="exercice-de-découverte"><span class="header-section-number">3.4</span> Exercice de découverte</h2>
<p>L’objectif de cet exercice est d’illustrer la similarité des objets
<code>GeoPandas</code> avec les objets <code>Pandas</code> que nous avons découverts précédemment.</p>
<p>Nous allons importer directement les données <code>AdminExpress</code> (limites officielles des communes produites par l’IGN) avec <code>cartiflette</code>:</p>
<div class="callout callout-style-default callout-exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 1: découverte des objets géographiques
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>En premier lieu, on récupère des données géographiques grâce
au <em>package</em> <code>cartiflette</code> et à sa fonction <code>carti_download</code>.</p>
<ol type="1">
<li>Utiliser
le code ci-dessous pour
télécharger les données communales (produit <code>Admin Express</code> de l’IGN)
des départements de la petite couronne (75, 92, 93 et 94)
de manière simplifiée grâce au <em>package</em>
<code>cartiflette</code>:</li>
</ol>
<div id="6f4ed911" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="6f4ed911"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="6f4ed911-1"><a href="#6f4ed911-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> cartiflette <span class="im">import</span> carti_download</span>
<span id="6f4ed911-2"><a href="#6f4ed911-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="6f4ed911-3"><a href="#6f4ed911-3" aria-hidden="true" tabindex="-1"></a>communes_borders <span class="op">=</span> carti_download(</span>
<span id="6f4ed911-4"><a href="#6f4ed911-4" aria-hidden="true" tabindex="-1"></a>    crs<span class="op">=</span><span class="dv">4326</span>,</span>
<span id="6f4ed911-5"><a href="#6f4ed911-5" aria-hidden="true" tabindex="-1"></a>    values<span class="op">=</span>[<span class="st">"75"</span>, <span class="st">"92"</span>, <span class="st">"93"</span>, <span class="st">"94"</span>],</span>
<span id="6f4ed911-6"><a href="#6f4ed911-6" aria-hidden="true" tabindex="-1"></a>    borders<span class="op">=</span><span class="st">"COMMUNE"</span>,</span>
<span id="6f4ed911-7"><a href="#6f4ed911-7" aria-hidden="true" tabindex="-1"></a>    vectorfile_format<span class="op">=</span><span class="st">"geojson"</span>,</span>
<span id="6f4ed911-8"><a href="#6f4ed911-8" aria-hidden="true" tabindex="-1"></a>    filter_by<span class="op">=</span><span class="st">"DEPARTEMENT"</span>,</span>
<span id="6f4ed911-9"><a href="#6f4ed911-9" aria-hidden="true" tabindex="-1"></a>    source<span class="op">=</span><span class="st">"EXPRESS-COG-CARTO-TERRITOIRE"</span>,</span>
<span id="6f4ed911-10"><a href="#6f4ed911-10" aria-hidden="true" tabindex="-1"></a>    year<span class="op">=</span><span class="dv">2022</span>,</span>
<span id="6f4ed911-11"><a href="#6f4ed911-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li><p>Regarder les premières lignes des données. Identifier la différence avec
un <em>dataframe</em> standard.</p></li>
<li><p>Afficher le système de projection (attribut <code>crs</code>) de <code>communes_borders</code>. Ce dernier contrôle la
transformation de l’espace tridimensionnel terrestre en une surface plane.
Utiliser <code>to_crs</code> pour transformer les données en Lambert 93, le
système officiel (code EPSG 2154).</p></li>
<li><p>Afficher les communes des Hauts de Seine (département 92) et utiliser la méthode
<code>plot</code></p></li>
<li><p>Ne conserver que Paris et réprésenter les frontières sur une carte : quel est le problème pour
une analyse de Paris intramuros?</p></li>
</ol>
<p>On remarque rapidement le problème.
On ne dispose ainsi pas des limites des arrondissements parisiens, ce
qui appauvrit grandement la carte de Paris.</p>
<ol start="6" type="1">
<li>Cette fois, utiliser l’argument <code>borders="COMMUNE_ARRONDISSEMENT"</code> pour obtenir
un fonds de carte consolidé des communes avec les arrondissements dans les grandes villes.
Convertir en Lambert 93.</li>
</ol>
</div>
</div>
</div>
<p>La visualisation proposée à la question permet de voir que notre <em>DataFrame</em> comporte la colonne <em>geometry</em> qui contient les informations nécessaires pour connaître les contours communaux.</p>
<div id="724009d8" class="cell" data-execution_count="7">
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>&lt;Geographic 2D CRS: EPSG:4326&gt;
Name: WGS 84
Axis Info [ellipsoidal]:
- Lat[north]: Geodetic latitude (degree)
- Lon[east]: Geodetic longitude (degree)
Area of Use:
- name: World.
- bounds: (-180.0, -90.0, 180.0, 90.0)
Datum: World Geodetic System 1984 ensemble
- Ellipsoid: WGS 84
- Prime Meridian: Greenwich</code></pre>
</div>
</div>
<p>Les données sont en WGS84, on les reprojette en Lambert 93</p>
<div id="8563843b" class="cell" data-execution_count="8">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/cell-9-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="03_geopandas_intro_files/figure-html/cell-9-output-1.png" width="229" height="389" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>A la question 5, on remarque facilement le problème pour Paris: il manque les limites des arrondissements. Cela appauvrit grandement la carte de Paris.</p>
<div id="40b250f1" class="cell" data-execution_count="9">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/cell-10-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="03_geopandas_intro_files/figure-html/cell-10-output-1.png" width="540" height="298" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>A l’issue de la question 6, on obtient la carte attendue pour Paris intramuros:</p>
<div id="42d6fe4a" class="cell" data-execution_count="11">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/cell-12-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="03_geopandas_intro_files/figure-html/cell-12-output-1.png" width="540" height="297" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="le-système-de-projection-cartographique" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Le système de projection cartographique</h1>
<section id="principe" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="principe"><span class="header-section-number">4.1</span> Principe</h2>
<p>Les données spatiales sont
plus riches que les données traditionnelles car elles
incluent, habituellement, des éléments supplémentaires pour placer dans
un espace cartésien les objets. Cette dimension supplémentaire peut être simple
(un point comporte deux informations supplémentaire: <span class="math inline">\(x\)</span> et <span class="math inline">\(y\)</span>) ou
assez complexe (polygones, lignes avec direction, etc.).</p>
<p>L’analyse cartographique emprunte dès lors à la géométrie
des concepts
pour représenter des objets dans l’espace. Les <strong>projections</strong>
sont au coeur de la gestion des données spatiales.
Ces dernières consistent à transformer une position dans l’espace
terrestre à une position sur un plan. Il s’agit donc d’une opération
de projection d’un espace tri-dimensionnel dans un espace
à deux dimensions.
Ce <a href="https://www.earthdatascience.org/courses/earth-analytics/spatial-data-r/geographic-vs-projected-coordinate-reference-systems-UTM/">post</a> propose de riches éléments sur le
sujet, notamment l’image suivante qui montre bien le principe d’une projection :</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://www.earthdatascience.org/images/courses/earth-analytics/spatial-data/spatial-projection-transformations-crs.png" class="lightbox" data-glightbox="description: .lightbox-desc-5" data-gallery="quarto-lightbox-gallery-5" title="Les différents types de projection"><img src="https://www.earthdatascience.org/images/courses/earth-analytics/spatial-data/spatial-projection-transformations-crs.png" class="img-fluid figure-img" alt="Les différents types de projection"></a></p>
<figcaption>Les différents types de projection</figcaption>
</figure>
</div>
<p>Cette opération n’est pas neutre. L’une des conséquences du
<a href="https://fr.wikipedia.org/wiki/Theorema_egregium">théorème remarquable de Gauss</a>
est que la surface de la Terre ne peut être cartographiée sans distortion.
Une projection ne peut simultanément conserver intactes les distances et les
angles (i.e.&nbsp;les positions).
Il n’existe ainsi pas de projection universellement meilleure, ce qui ouvre
la porte à la coexistence de nombreuses projections différentes, pensées
pour des tâches différentes.
Un mauvais système de représentation
fausse l’appréciation visuelle mais peut aussi entraîner des erreurs dans
les calculs sur la dimension spatiale.</p>
<p><strong>Les systèmes de projection font l’objet de standards internationaux et sont souvent désignés par des codes dits codes EPSG</strong>. Ce <a href="https://epsg.io/">site</a> est un bon aide-mémoire. Les plus fréquents, pour les utilisateurs français, sont les suivants (plus d’infos <a href="https://geodesie.ign.fr/contenu/fichiers/documentation/SRCfrance.pdf">ici</a>) :</p>
<ul>
<li><code>2154</code> : système de projection Lambert 93. Il s’agit du système de projection officiel. La plupart des données diffusées par l’administration pour la métropole sont disponibles dans ce système de projection.</li>
<li><code>27572</code> : Lambert II étendu. Il s’agit de l’ancien système de projection officiel. Les données spatiales anciennes peuvent être dans ce format.</li>
<li><code>4326</code> : WGS 84 ou système de pseudo-Mercator ou encore <em>Web Mercator</em>. Ce n’est en réalité pas un système de projection mais un système de coordonnées (longitude / latitude) qui permet simplement un repérage angulaire sur l’ellipsoïde. Il est utilisé pour les données GPS. Il s’agit du système le plus
usuel, notamment quand on travaille avec des fonds de carte <em>web</em>.</li>
</ul>
</section>
<section id="le-système-mercator" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="le-système-mercator"><span class="header-section-number">4.2</span> Le système Mercator</h2>
<p>Comme évoqué plus haut, l’une des projections les plus connues est la
projection <em>Web Mercator</em> dite WGS84 (code EPSG 4326). Il
s’agit d’une projection conservant intacte les angles, ce
qui implique qu’elle altère les distances. Celle-ci a en effet été
pensée, à l’origine, pour représenter l’hémisphère Nord. Plus
on s’éloigne de celui-ci, plus les distances sont distordues. Cela
amène à des distorsions bien
connues (le Groenland hypertrophié, l’Afrique de taille réduite, l’Antarctique démesuré…).
En revanche, la projection Mercator conserve intacte les positions.
C’est cette propriété qui explique son utilisation dans les systèmes
GPS et ainsi dans les fonds de carte de navigation du type <em>Google Maps</em>.
Il s’agit d’une projection pensée d’abord pour la navigation, non pour la représentation d’informations socioéconomiques sur la terre. Cette projection est indissociable des grandes explorations de la Renaissance, comme le rappelle <a href="https://x.com/JulesGrandin/status/1765668642094514447">ce fil</a> sur Twitter de Jules Grandin.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/truesize.png" class="lightbox" data-glightbox="description: .lightbox-desc-6" data-gallery="quarto-lightbox-gallery-6" title="Exemple de reprojection de pays depuis le site thetruesize.com"><img src="https://minio.lab.sspcloud.fr/lgaliana/generative-art/pythonds/truesize.png" class="img-fluid figure-img" alt="Exemple de reprojection de pays depuis le site thetruesize.com"></a></p>
<figcaption><em>Exemple de reprojection de pays depuis le site <a href="https://thetruesize.com/">thetruesize.com</a></em></figcaption>
</figure>
</div>
<div id="fig-mercator-funny" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mercator-funny-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="https://rgeo.linogaliana.fr/exercises/img/mercator.jpg" class="lightbox" data-glightbox="description: .lightbox-desc-7" data-gallery="quarto-lightbox-gallery-7"><img src="https://rgeo.linogaliana.fr/exercises/img/mercator.jpg" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mercator-funny-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4.1: “Don’t trust the Mercator projection” sur <code>Reddit</code>
</figcaption>
</figure>
</div>
<p>Observez les variations significatives
de proportions pour certains pays selon les projections
choisies:</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb8" data-startfrom="814" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 813;"><span id="cb8-814"><a href="#cb8-814" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;div&gt;</span><span class="sc">${</span>container_projection<span class="sc">}</span><span class="vs">&lt;/div&gt;`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-7" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb9" data-startfrom="1473" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1472;"><span id="cb9-1473"><a href="#cb9-1473" aria-hidden="true" tabindex="-1"></a>container_projection <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div class="container"&gt;</span></span>
<span id="cb9-1474"><a href="#cb9-1474" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;div class="row"&gt;</span></span>
<span id="cb9-1475"><a href="#cb9-1475" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;div class="projection"&gt;</span></span>
<span id="cb9-1476"><a href="#cb9-1476" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;div class="projection-label"&gt;Choisir une projection&lt;/div&gt;</span></span>
<span id="cb9-1477"><a href="#cb9-1477" aria-hidden="true" tabindex="-1"></a><span class="vs">      </span><span class="sc">${</span>viewof projection<span class="sc">}</span></span>
<span id="cb9-1478"><a href="#cb9-1478" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb9-1479"><a href="#cb9-1479" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/div&gt;</span></span>
<span id="cb9-1480"><a href="#cb9-1480" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;div class="row"&gt;</span></span>
<span id="cb9-1481"><a href="#cb9-1481" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;div class="projectedMap"&gt;</span></span>
<span id="cb9-1482"><a href="#cb9-1482" aria-hidden="true" tabindex="-1"></a><span class="vs">      </span><span class="sc">${</span>projectedMap<span class="sc">}</span></span>
<span id="cb9-1483"><a href="#cb9-1483" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb9-1484"><a href="#cb9-1484" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/div&gt;</span></span>
<span id="cb9-1485"><a href="#cb9-1485" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/div&gt;`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb10" data-startfrom="1479" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1478;"><span id="cb10-1479"><a href="#cb10-1479" aria-hidden="true" tabindex="-1"></a>viewof projection <span class="op">=</span> <span class="fu">projectionInput</span>({</span>
<span id="cb10-1480"><a href="#cb10-1480" aria-hidden="true" tabindex="-1"></a>  <span class="dt">name</span><span class="op">:</span> <span class="st">""</span><span class="op">,</span></span>
<span id="cb10-1481"><a href="#cb10-1481" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="st">"Mercator"</span></span>
<span id="cb10-1482"><a href="#cb10-1482" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb11" data-startfrom="1505" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1504;"><span id="cb11-1505"><a href="#cb11-1505" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {projectionInput} <span class="im">from</span> <span class="st">"@fil/d3-projections"</span></span>
<span id="cb11-1506"><a href="#cb11-1506" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {map} <span class="im">from</span> <span class="st">"@linogaliana/base-map"</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb12" data-startfrom="1509" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1508;"><span id="cb12-1509"><a href="#cb12-1509" aria-hidden="true" tabindex="-1"></a>projectedMap <span class="op">=</span> <span class="fu">map</span>(projection<span class="op">,</span></span>
<span id="cb12-1510"><a href="#cb12-1510" aria-hidden="true" tabindex="-1"></a>                   {</span>
<span id="cb12-1511"><a href="#cb12-1511" aria-hidden="true" tabindex="-1"></a>                     <span class="co">//svg: true,</span></span>
<span id="cb12-1512"><a href="#cb12-1512" aria-hidden="true" tabindex="-1"></a>                     <span class="dt">value</span><span class="op">:</span> projection<span class="op">.</span><span class="at">options</span><span class="op">,</span></span>
<span id="cb12-1513"><a href="#cb12-1513" aria-hidden="true" tabindex="-1"></a>                     <span class="dt">width</span><span class="op">:</span> width_projected_map<span class="op">,</span></span>
<span id="cb12-1514"><a href="#cb12-1514" aria-hidden="true" tabindex="-1"></a>                     <span class="co">//height: 300,</span></span>
<span id="cb12-1515"><a href="#cb12-1515" aria-hidden="true" tabindex="-1"></a>                     <span class="co">//rotate: [0, -90],</span></span>
<span id="cb12-1516"><a href="#cb12-1516" aria-hidden="true" tabindex="-1"></a>                     <span class="co">//inertia: true,</span></span>
<span id="cb12-1517"><a href="#cb12-1517" aria-hidden="true" tabindex="-1"></a>                     <span class="dt">show_equator</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb12-1518"><a href="#cb12-1518" aria-hidden="true" tabindex="-1"></a>                     <span class="dt">background</span><span class="op">:</span> <span class="st">"#f1f0eb"</span></span>
<span id="cb12-1519"><a href="#cb12-1519" aria-hidden="true" tabindex="-1"></a>                     </span>
<span id="cb12-1520"><a href="#cb12-1520" aria-hidden="true" tabindex="-1"></a>                     <span class="co">//show_structure: true</span></span>
<span id="cb12-1521"><a href="#cb12-1521" aria-hidden="true" tabindex="-1"></a>                   })</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-11" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb13" data-startfrom="1519" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1518;"><span id="cb13-1519"><a href="#cb13-1519" aria-hidden="true" tabindex="-1"></a>width_projected_map <span class="op">=</span> <span class="bu">screen</span><span class="op">.</span><span class="at">width</span><span class="op">/</span><span class="dv">2</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-12" data-nodetype="declaration">

</div>
</div>
</div>
<p>Pour aller plus loin, la carte interactive
suivante, construite par Nicolas Lambert, issue de
ce <a href="https://observablehq.com/@neocartocnrs/impact-of-projections-on-areas"><em>notebook</em> <code>Observable</code></a>, illustre l’effet
déformant de la projection Mercator, et de quelques-unes autres,
sur notre perception de la taille des pays.</p>
<details>
<summary>
Voir la carte interactive
</summary>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb14" data-startfrom="1539" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1538;"><span id="cb14-1539"><a href="#cb14-1539" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;div class="grid-container"&gt;</span></span>
<span id="cb14-1540"><a href="#cb14-1540" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;div class="viewof-projection"&gt;</span><span class="sc">${</span>viewof projectionBertin<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb14-1541"><a href="#cb14-1541" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;div class="viewof-mycountry"&gt;</span><span class="sc">${</span>viewof mycountry<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb14-1542"><a href="#cb14-1542" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;div class="map-bertin"&gt;</span><span class="sc">${</span>mapBertin<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb14-1543"><a href="#cb14-1543" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/div&gt;`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-13" data-nodetype="expression">

</div>
</div>
</div>
</details>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb15" data-startfrom="1554" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1553;"><span id="cb15-1554"><a href="#cb15-1554" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {map <span class="im">as</span> mapBertin<span class="op">,</span> viewof projection <span class="im">as</span> projectionBertin<span class="op">,</span> viewof mycountry} <span class="im">from</span> <span class="st">"@neocartocnrs/impact-of-projections-on-areas"</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-14" data-nodetype="declaration">

</div>
</div>
</div>
<p>Il existe en fait de nombreuses représentations possibles du monde, plus ou moins
alambiquées. Les projections sont très nombreuses et certaines peuvent avoir une <a href="https://imgs.xkcd.com/comics/map_projections.png">forme suprenante</a>.
Par exemple,
la <a href="https://storymaps.arcgis.com/stories/756bcae18d304a1eac140f19f4d5cb3d">projection de Spillhaus</a>
propose de centrer la vue sur les océans et non une terre. C’est pour
cette raison qu’on parle parfois de monde tel que vu par les poissons
à son propos.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb16" data-startfrom="1568" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1567;"><span id="cb16-1568"><a href="#cb16-1568" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;div class="centered"&gt;</span><span class="sc">${</span>spilhaus<span class="sc">}</span><span class="vs">&lt;/div&gt;`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-15" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code hidden" id="cb17" data-startfrom="1574" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1573;"><span id="cb17-1574"><a href="#cb17-1574" aria-hidden="true" tabindex="-1"></a>spilhaus <span class="op">=</span> {</span>
<span id="cb17-1575"><a href="#cb17-1575" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> width <span class="op">=</span> <span class="dv">600</span><span class="op">;</span></span>
<span id="cb17-1576"><a href="#cb17-1576" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> height <span class="op">=</span> width<span class="op">;</span></span>
<span id="cb17-1577"><a href="#cb17-1577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-1578"><a href="#cb17-1578" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> context <span class="op">=</span> DOM<span class="op">.</span><span class="fu">context2d</span>(width<span class="op">,</span> height)<span class="op">;</span></span>
<span id="cb17-1579"><a href="#cb17-1579" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> projection <span class="op">=</span> d3<span class="op">.</span><span class="fu">geoStereographic</span>()</span>
<span id="cb17-1580"><a href="#cb17-1580" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">rotate</span>([<span class="dv">95</span><span class="op">,</span> <span class="dv">45</span>])</span>
<span id="cb17-1581"><a href="#cb17-1581" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">translate</span>([width <span class="op">/</span> <span class="dv">2</span><span class="op">,</span> height <span class="op">/</span> <span class="dv">2</span>])</span>
<span id="cb17-1582"><a href="#cb17-1582" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">scale</span>(width <span class="op">/</span> <span class="fl">10.1</span>)</span>
<span id="cb17-1583"><a href="#cb17-1583" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">center</span>([<span class="dv">30</span><span class="op">,</span> <span class="op">-</span><span class="dv">5</span>])</span>
<span id="cb17-1584"><a href="#cb17-1584" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">clipAngle</span>(<span class="dv">166</span>)<span class="op">;</span></span>
<span id="cb17-1585"><a href="#cb17-1585" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> path <span class="op">=</span> d3<span class="op">.</span><span class="fu">geoPath</span>(projection<span class="op">,</span> context)<span class="op">;</span></span>
<span id="cb17-1586"><a href="#cb17-1586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-1587"><a href="#cb17-1587" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> land <span class="op">=</span> topojson<span class="op">.</span><span class="fu">feature</span>(world<span class="op">,</span> world<span class="op">.</span><span class="at">objects</span><span class="op">.</span><span class="at">land</span>)<span class="op">;</span></span>
<span id="cb17-1588"><a href="#cb17-1588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-1589"><a href="#cb17-1589" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="at">lineJoin</span> <span class="op">=</span> <span class="st">"round"</span><span class="op">;</span></span>
<span id="cb17-1590"><a href="#cb17-1590" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="at">lineCap</span> <span class="op">=</span> <span class="st">"round"</span><span class="op">;</span></span>
<span id="cb17-1591"><a href="#cb17-1591" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="at">fillStyle</span> <span class="op">=</span> <span class="st">"#f2f1ed"</span><span class="op">;</span></span>
<span id="cb17-1592"><a href="#cb17-1592" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="fu">fillRect</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> width<span class="op">,</span> height)<span class="op">;</span></span>
<span id="cb17-1593"><a href="#cb17-1593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-1594"><a href="#cb17-1594" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="fu">beginPath</span>()<span class="op">;</span></span>
<span id="cb17-1595"><a href="#cb17-1595" aria-hidden="true" tabindex="-1"></a>  <span class="fu">path</span>({<span class="dt">type</span><span class="op">:</span> <span class="st">"Sphere"</span>})<span class="op">;</span></span>
<span id="cb17-1596"><a href="#cb17-1596" aria-hidden="true" tabindex="-1"></a>  <span class="fu">path</span>(land)<span class="op">;</span></span>
<span id="cb17-1597"><a href="#cb17-1597" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="at">lineWidth</span> <span class="op">=</span> <span class="fl">0.5</span><span class="op">;</span></span>
<span id="cb17-1598"><a href="#cb17-1598" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="fu">stroke</span>()<span class="op">;</span></span>
<span id="cb17-1599"><a href="#cb17-1599" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="fu">clip</span>(<span class="st">"evenodd"</span>)<span class="op">;</span></span>
<span id="cb17-1600"><a href="#cb17-1600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-1601"><a href="#cb17-1601" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="fu">save</span>()<span class="op">;</span></span>
<span id="cb17-1602"><a href="#cb17-1602" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="fu">beginPath</span>()<span class="op">;</span></span>
<span id="cb17-1603"><a href="#cb17-1603" aria-hidden="true" tabindex="-1"></a>  <span class="fu">path</span>(land)<span class="op">;</span></span>
<span id="cb17-1604"><a href="#cb17-1604" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="at">filter</span> <span class="op">=</span> <span class="st">"blur(12px)"</span><span class="op">;</span></span>
<span id="cb17-1605"><a href="#cb17-1605" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="at">fillStyle</span> <span class="op">=</span> <span class="st">"#006994"</span><span class="op">;</span></span>
<span id="cb17-1606"><a href="#cb17-1606" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="fu">fill</span>(<span class="st">"evenodd"</span>)<span class="op">;</span></span>
<span id="cb17-1607"><a href="#cb17-1607" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="fu">restore</span>()<span class="op">;</span></span>
<span id="cb17-1608"><a href="#cb17-1608" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-1609"><a href="#cb17-1609" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="fu">beginPath</span>()<span class="op">;</span></span>
<span id="cb17-1610"><a href="#cb17-1610" aria-hidden="true" tabindex="-1"></a>  <span class="fu">path</span>(d3<span class="op">.</span><span class="fu">geoGraticule10</span>())<span class="op">;</span></span>
<span id="cb17-1611"><a href="#cb17-1611" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="at">globalAlpha</span> <span class="op">=</span> <span class="fl">0.2</span><span class="op">;</span></span>
<span id="cb17-1612"><a href="#cb17-1612" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="at">strokeStyle</span> <span class="op">=</span> <span class="st">"#000"</span><span class="op">;</span></span>
<span id="cb17-1613"><a href="#cb17-1613" aria-hidden="true" tabindex="-1"></a>  context<span class="op">.</span><span class="fu">stroke</span>()<span class="op">;</span></span>
<span id="cb17-1614"><a href="#cb17-1614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-1615"><a href="#cb17-1615" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> context<span class="op">.</span><span class="at">canvas</span><span class="op">;</span></span>
<span id="cb17-1616"><a href="#cb17-1616" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-16" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb18" data-startfrom="1612" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1611;"><span id="cb18-1612"><a href="#cb18-1612" aria-hidden="true" tabindex="-1"></a><span class="co">//import {map as spilhausmap} with {height, width} from "@d3/spilhaus-shoreline-map"</span></span>
<span id="cb18-1613"><a href="#cb18-1613" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { world } <span class="im">from</span> <span class="st">"@d3/spilhaus-shoreline-map"</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-17" data-nodetype="declaration">

</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Astuce pour la France
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Pour la France, dans le système WGS84 (4326) :</p>
<ul>
<li>Longitude (<span class="math inline">\(x\)</span>) tourne autour de 0° (de -5.2 à +9.6 pour être plus précis)</li>
<li>La latitude (<span class="math inline">\(y\)</span>) autour de 45 (entre +41.3 à +51.1)</li>
</ul>
<p>Dans le système Lambert 93 (2154) :</p>
<ul>
<li>Coordonnées <span class="math inline">\(x\)</span>: entre 100 000 et 1 300 000</li>
<li>La latitude (<span class="math inline">\(y\)</span>): entre 6 000 000 et 7 200 000</li>
</ul>
<p><a href="https://medium.com/@_FrancoisM/introduction-%C3%A0-la-manipulation-de-donn%C3%A9es-cartographiques-23b4e38d8f0f">Plus de détails</a></p>
</div>
</div>
</div>
</section>
<section id="gestion-avec-geopandas" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="gestion-avec-geopandas"><span class="header-section-number">4.3</span> Gestion avec <code>GeoPandas</code></h2>
<p>Concernant la gestion des projections avec <code>GeoPandas</code>,
la <a href="https://geopandas.org/projections.html">documentation officielle</a> est très bien
faite. Elle fournit notamment l’avertissement suivant qu’il est
bon d’avoir en tête :</p>
<blockquote class="blockquote">
<p>Be aware that most of the time you don’t have to set a projection. Data loaded from a reputable source (using the geopandas.read_file() command) should always include projection information. You can see an objects current CRS through the GeoSeries.crs attribute.</p>
<p>From time to time, however, you may get data that does not include a projection. In this situation, you have to set the CRS so geopandas knows how to interpret the coordinates.</p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://imgs.xkcd.com/comics/bad_map_projection_south_america.png" class="lightbox" data-glightbox="description: .lightbox-desc-8" data-gallery="quarto-lightbox-gallery-8" title="Image empruntée à XKCD https://xkcd.com/2256/ qu’on peut également trouver sur https://blog.chrislansdown.com/2020/01/17/a-great-map-projection-joke/"><img src="https://imgs.xkcd.com/comics/bad_map_projection_south_america.png" class="img-fluid figure-img" alt="Image empruntée à XKCD https://xkcd.com/2256/ qu’on peut également trouver sur https://blog.chrislansdown.com/2020/01/17/a-great-map-projection-joke/"></a></p>
<figcaption><em>Image empruntée à XKCD <a href="https://xkcd.com/2256/" class="uri">https://xkcd.com/2256/</a> qu’on peut également trouver sur <a href="https://blog.chrislansdown.com/2020/01/17/a-great-map-projection-joke/" class="uri">https://blog.chrislansdown.com/2020/01/17/a-great-map-projection-joke/</a></em></figcaption>
</figure>
</div>
<p>Les deux principales méthodes pour définir le système de projection utilisé sont :</p>
<ul>
<li><strong><code>df.set_crs</code></strong> : cette commande sert à préciser quel est le système de projection utilisé, c’est-à-dire comment les coordonnées <em>(x,y)</em> sont reliées à la surface terrestre. <strong>Cette commande ne doit pas être utilisée pour transformer le système de coordonnées, seulement pour le définir</strong>.</li>
<li><strong><code>df.to_crs</code></strong> : <strong>cette commande sert à projeter les points d’une géométrie dans une autre, c’est-à-dire à recalculer les coordonnées selon un autre système de projection.</strong></li>
</ul>
<p>Dans le cas particulier de production de carte avec un fond <code>OpenStreetMaps</code> ou une carte dynamique <code>leaflet</code>, il est nécessaire de dé-projeter les données (par exemple à partir du Lambert-93) pour atterrir dans le système non-projeté WGS 84 (code EPSG 4326). Ce site <a href="https://epsg.io/">dédié aux projections géographiques</a> peut être utile pour retrouver le système de projection d’un fichier où il n’est pas indiqué.</p>
<p>Le prochain exercice permettra, avec quelques cas pathologiques, de se convaincre de l’importance de déléguer le plus possible la gestion du système de projection à <code>GeoPandas</code>. La question n’est pas que sur la pertinence de la représentation des objets géographiques sur la carte. En effet, l’ensemble des opérations géométriques (calculs d’aires, de distance, etc.) peut être affecté par les choix faits sur le système de projection.</p>
</section>
<section id="exercice-pour-comprendre-limportance-du-système-de-projection" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="exercice-pour-comprendre-limportance-du-système-de-projection"><span class="header-section-number">4.4</span> Exercice pour comprendre l’importance du système de projection</h2>
<p>Voici un code utilisant encore
<code>cartiflette</code>
pour récupérer les frontières françaises (découpées par région):</p>
<div id="load-france-data" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="load-france-data"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="load-france-data-1"><a href="#load-france-data-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> cartiflette <span class="im">import</span> carti_download</span>
<span id="load-france-data-2"><a href="#load-france-data-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="load-france-data-3"><a href="#load-france-data-3" aria-hidden="true" tabindex="-1"></a>france <span class="op">=</span> carti_download(</span>
<span id="load-france-data-4"><a href="#load-france-data-4" aria-hidden="true" tabindex="-1"></a>    values<span class="op">=</span>[<span class="st">"France"</span>],</span>
<span id="load-france-data-5"><a href="#load-france-data-5" aria-hidden="true" tabindex="-1"></a>    crs<span class="op">=</span><span class="dv">4326</span>,</span>
<span id="load-france-data-6"><a href="#load-france-data-6" aria-hidden="true" tabindex="-1"></a>    borders<span class="op">=</span><span class="st">"REGION"</span>,</span>
<span id="load-france-data-7"><a href="#load-france-data-7" aria-hidden="true" tabindex="-1"></a>    vectorfile_format<span class="op">=</span><span class="st">"geojson"</span>,</span>
<span id="load-france-data-8"><a href="#load-france-data-8" aria-hidden="true" tabindex="-1"></a>    simplification<span class="op">=</span><span class="dv">50</span>,</span>
<span id="load-france-data-9"><a href="#load-france-data-9" aria-hidden="true" tabindex="-1"></a>    filter_by<span class="op">=</span><span class="st">"FRANCE_ENTIERE"</span>,</span>
<span id="load-france-data-10"><a href="#load-france-data-10" aria-hidden="true" tabindex="-1"></a>    source<span class="op">=</span><span class="st">"EXPRESS-COG-CARTO-TERRITOIRE"</span>,</span>
<span id="load-france-data-11"><a href="#load-france-data-11" aria-hidden="true" tabindex="-1"></a>    year<span class="op">=</span><span class="dv">2022</span>,</span>
<span id="load-france-data-12"><a href="#load-france-data-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="load-france-data-13"><a href="#load-france-data-13" aria-hidden="true" tabindex="-1"></a>france <span class="op">=</span> france.loc[france[<span class="st">"INSEE_REG"</span>] <span class="op">&gt;</span> <span class="dv">10</span>]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 2 : Les projections, représentations et approximations
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<ol type="1">
<li>S’amuser à représenter les limites de la France avec plusieurs projections:</li>
</ol>
<ul>
<li>Mercator WGS84 (EPSG: 4326)</li>
<li>Projection healpix (<code>+proj=healpix +lon_0=0 +a=1</code>)</li>
<li>Projection prévue pour Tahiti (EPSG: 3304)</li>
<li>Projection Albers prévue pour Etats-Unis (EPSG: 5070)</li>
</ul>
<ol start="2" type="1">
<li>Calculer la superficie en <span class="math inline">\(km^2\)</span>
des régions françaises dans les deux systèmes de projection suivants :
World Mercator WGS84 (EPSG: 3395) et Lambert 93 (EPSG: 2154). Calculer la différence en <span class="math inline">\(km^2\)</span>
pour chaque région.</li>
</ol>
</div>
</div>
</div>
<div id="d39ae062" class="cell" data-execution_count="14">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/cell-15-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="03_geopandas_intro_files/figure-html/cell-15-output-1.png" width="447" height="442" class="figure-img"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/cell-15-output-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="03_geopandas_intro_files/figure-html/cell-15-output-2.png" width="588" height="232" class="figure-img"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/cell-15-output-3.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="03_geopandas_intro_files/figure-html/cell-15-output-3.png" width="524" height="442" class="figure-img"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/cell-15-output-4.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="03_geopandas_intro_files/figure-html/cell-15-output-4.png" width="355" height="442" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Avec la question 1 illustrant quelques cas pathologiques,
on comprend que les projections ont un effet déformant
qui se voit bien lorsqu’on les représente côte à côte sous
forme de cartes :</p>
<p>Cependant le problème n’est pas que visuel, il est également
numérique. Les calculs géométriques amènent à des différences
assez notables selon le système de référence utilisé.</p>
<p>On peut représenter ces approximations sur une carte<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> pour se faire une idée des régions où l’erreur de mesure est la plus importante (objet de la question 2).</p>
<div id="7ccd05bb" class="cell" data-execution_count="17">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/cell-18-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="03_geopandas_intro_files/figure-html/cell-18-output-1.png" width="416" height="389" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Ce type d’erreur de mesure est normal à l’échelle du territoire français.
Les projections héritères du Mercator déforment les distances,
surtout lorsqu’on se rapproche de l’équateur ou des pôles.</p>
<p>Il faut donc systématiquement
repasser les données dans le système de projection Lambert 93 (le
système officiel pour la métropole) avant d’effectuer des calculs géométriques.</p>
</section>
</section>
<section id="importer-et-explorer-les-jeux-de-données-spatiaux" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Importer et explorer les jeux de données spatiaux</h1>
<p>Souvent, le découpage communal ne sert qu’en fond de cartes, pour donner des
repères. En général, il sert donc à contextualiser un autre jeu de données.</p>
<p>Pour illustrer cette approche, on va partir des données de localisation et de capacités des
stations velib,
disponibles <a href="https://opendata.paris.fr/explore/dataset/velib-emplacement-des-stations/table/">sur le site d’open data de la ville de Paris</a> et
requêtables directement par l’url
<a href="https://opendata.paris.fr/explore/dataset/velib-emplacement-des-stations/download/?format=geojson&amp;timezone=Europe/Berlin&amp;lang=fr" class="uri">https://opendata.paris.fr/explore/dataset/velib-emplacement-des-stations/download/?format=geojson&amp;timezone=Europe/Berlin&amp;lang=fr</a>. Ce jeu de données nous permettra d’illustrer quelques enjeux classiques de l’analyse de données spatiales</p>
<div id="cell-load-velib" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cell-load-velib"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cell-load-velib-1"><a href="#cell-load-velib-1" aria-hidden="true" tabindex="-1"></a>velib_data <span class="op">=</span> <span class="st">"https://opendata.paris.fr/explore/dataset/velib-emplacement-des-stations/download/?format=geojson&amp;timezone=Europe/Berlin&amp;lang=fr"</span></span>
<span id="cell-load-velib-2"><a href="#cell-load-velib-2" aria-hidden="true" tabindex="-1"></a>stations <span class="op">=</span> gpd.read_file(velib_data)</span>
<span id="cell-load-velib-3"><a href="#cell-load-velib-3" aria-hidden="true" tabindex="-1"></a>stations.head(<span class="dv">2</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Skipping field coordonnees_geo: unsupported OGR type: 3</code></pre>
</div>
<div id="load-velib" class="cell-output cell-output-display" data-execution_count="18">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">capacity</th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">stationcode</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>25</td>
<td>Silly - Galliéni</td>
<td>21010</td>
<td>POINT (2.23255 48.83558)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>36</td>
<td>Guersant - Gouvion-Saint-Cyr</td>
<td>17041</td>
<td>POINT (2.28767 48.88288)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<section id="localiser-les-données-sur-une-carte" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="localiser-les-données-sur-une-carte"><span class="header-section-number">5.1</span> Localiser les données sur une carte</h2>
<p>La première étape, avant l’exploration approfondie des données, consiste à afficher celles-ci sur une carte contextuelle, afin de s’assurer de l’emprise géographique des données.
Dans notre cas, cela nous donnera une intuition sur la localisation des stations et notamment la densité hétérogène de celles-ci dans l’espace urbain parisien.</p>
</section>
<section id="exercice-dapplication" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="exercice-dapplication"><span class="header-section-number">5.2</span> Exercice d’application</h2>
<p>Dans le prochain exercice, nous proposons de créer rapidement une
carte comprenant trois couches :</p>
<ul>
<li>Les localisations de stations sous forme de points ;</li>
<li>Les bordures des communes et arrondissements pour contextualiser ;</li>
<li>Les bordures des départements en traits plus larges pour contextualiser également.</li>
</ul>
<p>Nous irons plus loin dans le travail cartographique dans le prochain
chapitre. Mais être en mesure de positionner rapidement
ses données sur une carte est
toujours utile dans un travail exploratoire.</p>
<p>En amont de l’exercice,
utiliser la fonction suivante du <em>package</em> <code>cartiflette</code> pour récupérer
le fonds de carte des départements de la petite couronne:</p>
<div id="load-idf" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="load-idf"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="load-idf-1"><a href="#load-idf-1" aria-hidden="true" tabindex="-1"></a>idf <span class="op">=</span> carti_download(</span>
<span id="load-idf-2"><a href="#load-idf-2" aria-hidden="true" tabindex="-1"></a>    values<span class="op">=</span>[<span class="st">"11"</span>],</span>
<span id="load-idf-3"><a href="#load-idf-3" aria-hidden="true" tabindex="-1"></a>    crs<span class="op">=</span><span class="dv">4326</span>,</span>
<span id="load-idf-4"><a href="#load-idf-4" aria-hidden="true" tabindex="-1"></a>    borders<span class="op">=</span><span class="st">"DEPARTEMENT"</span>,</span>
<span id="load-idf-5"><a href="#load-idf-5" aria-hidden="true" tabindex="-1"></a>    vectorfile_format<span class="op">=</span><span class="st">"geojson"</span>,</span>
<span id="load-idf-6"><a href="#load-idf-6" aria-hidden="true" tabindex="-1"></a>    filter_by<span class="op">=</span><span class="st">"REGION"</span>,</span>
<span id="load-idf-7"><a href="#load-idf-7" aria-hidden="true" tabindex="-1"></a>    source<span class="op">=</span><span class="st">"EXPRESS-COG-CARTO-TERRITOIRE"</span>,</span>
<span id="load-idf-8"><a href="#load-idf-8" aria-hidden="true" tabindex="-1"></a>    year<span class="op">=</span><span class="dv">2022</span>,</span>
<span id="load-idf-9"><a href="#load-idf-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="load-idf-10"><a href="#load-idf-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="load-idf-11"><a href="#load-idf-11" aria-hidden="true" tabindex="-1"></a>petite_couronne_departements <span class="op">=</span> idf.loc[</span>
<span id="load-idf-12"><a href="#load-idf-12" aria-hidden="true" tabindex="-1"></a>    idf[<span class="st">"INSEE_DEP"</span>].isin([<span class="st">"75"</span>, <span class="st">"92"</span>, <span class="st">"93"</span>, <span class="st">"94"</span>])</span>
<span id="load-idf-13"><a href="#load-idf-13" aria-hidden="true" tabindex="-1"></a>].to_crs(<span class="dv">2154</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 3: importer et explorer les données velib
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>On commence par récupérer les données nécessaires à la production
de cette carte.</p>
<ol type="1">
<li>Vérifier la projection géographique de <code>station</code> (attribut <code>crs</code>). Si celle-ci est différente des données communales, reprojeter ces
dernières dans le même système de projection que les stations de vélib</li>
<li>Ne conserver que les 50 principales stations (variable <code>capacity</code>)</li>
</ol>
<p>On peut maintenant construire la carte de manière séquentielle avec la méthode <code>plot</code> en s’aidant de <a href="https://geopandas.org/en/stable/docs/user_guide/mapping.html#maps-with-layers">cette documentation</a></p>
<ol start="3" type="1">
<li><p>En premier lieu, grâce à <code>boundary.plot</code>,
représenter la couche de base des limites des communes et arrondissements:</p>
<ul>
<li>Utiliser les options <code>edgecolor = "black"</code> et <code>linewidth = 0.5</code></li>
<li>Nommer cet objet <code>base</code></li>
</ul></li>
<li><p>Ajouter la couche des départements avec les options <code>edgecolor = "blue"</code> et <code>linewidth = 0.7</code></p></li>
<li><p>Ajouter les positions des stations
et ajuster la taille en fonction de la variable <code>capacity</code>. L’esthétique des points obtenus peut être contrôlé grâce aux options <code>color = "red"</code> et <code>alpha = 0.4</code>.</p></li>
<li><p>Retirer les axes et ajouter un titre avec les options ci-dessous:</p></li>
</ol>
<div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>base.set_axis_off()</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>base.set_title(<span class="st">"Les 50 principales stations de Vélib"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="7" type="1">
<li>En suivant le modèle suivant, grâce au <em>package</em> <code>contextily</code>, ajouter un fond de carte contextuel <em>openstreetmap</em></li>
</ol>
<div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> contextily <span class="im">as</span> ctx</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> ...</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>ctx.add_basemap(ax, source<span class="op">=</span>ctx.providers.OpenStreetMap.Mapnik)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>⚠️ <code>contextily</code> attend des données dans le système de représentation <em>Pseudo Mercator</em> (<a href="https://epsg.io/3857">EPSG: 3857</a>), il sera donc nécessaire de reprojeter vos données avant de réaliser la carte.</p>
</div>
</div>
</div>
<p>La couche de base obtenue à l’issue de la question 3</p>
<div id="cell-exo2-q3" class="cell" data-execution_count="23">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/exo2-q3-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="03_geopandas_intro_files/figure-html/exo2-q3-output-1.png" id="exo2-q3" width="420" height="425" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Puis en y ajoutant les limites départementales (question 4).</p>
<div id="cell-exo2-q4" class="cell" data-execution_count="24">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/exo2-q4-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="03_geopandas_intro_files/figure-html/exo2-q4-output-1.png" id="exo2-q4" width="420" height="425" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Puis les stations (question 5).</p>
<div id="cell-exo2-q5" class="cell" data-execution_count="25">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/exo2-q5-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-16"><img src="03_geopandas_intro_files/figure-html/exo2-q5-output-1.png" id="exo2-q5" width="420" height="425" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Ensuite, si on retire les axes (question 6), on obtient:</p>
<div id="b6f32e07" class="cell" data-execution_count="26">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/cell-27-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-17"><img src="03_geopandas_intro_files/figure-html/cell-27-output-1.png" width="372" height="410" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<div id="c3927488" class="cell" data-execution_count="27">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/cell-28-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-18"><img src="03_geopandas_intro_files/figure-html/cell-28-output-1.png" width="413" height="425" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>La carte est déjà parlante en soi. Néanmoins, pour des personnes moins familières de la géographie parisienne, elle pourrait être encore plus limpide avec l’ajout d’un fond de carte contextuel <em>openstreetmap</em>. <em>In fine</em>, cela donne la carte suivante:</p>
<div id="b3add756" class="cell" data-execution_count="28">
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>&lt;Axes: title={'center': 'Les 50 principales stations de Vélib'}&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 672x480 with 0 Axes&gt;</code></pre>
</div>
</div>
</section>
<section id="opérations-sur-les-géométries" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="opérations-sur-les-géométries"><span class="header-section-number">5.3</span> Opérations sur les géométries</h2>
<p>Outre la représentation graphique simplifiée,
l’intérêt principal d’utiliser
<code>GeoPandas</code> est l’existence de méthodes efficaces pour
manipuler la dimension spatiale. Un certain nombre proviennent du
package
<a href="https://shapely.readthedocs.io/en/latest/manual.html#general-attributes-and-methods"><code>Shapely</code></a>.</p>
<p>Nous avons déjà vu la méthode <code>to_crs</code> pour reprojeter les données de manière vectorisée sans avoir à s’inquiéter.
Nous avons également évoqué la méthode <code>area</code>
pour calculer des surfaces. Il en existe de nombreuses et l’objectif de ce chapitre n’est pas d’être exhaustif sur le sujet mais plutôt de servir d’introduction générale pour amener à approfondir ultérieurement.
Parmi les méthodes les plus utiles, on peut citer <code>centroid</code> qui, comme son nom l’indique,
recherche le centroïde de chaque polygone et transforme ainsi des données
surfaciques en données ponctuelles. Par exemple, pour
représenter approximativement les centres des villages de la
Haute-Garonne (31), après avoir téléchargé le fonds de carte adapté, on
fera</p>
<div id="034e9bb7" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="034e9bb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="034e9bb7-1"><a href="#034e9bb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> cartiflette <span class="im">import</span> carti_download</span>
<span id="034e9bb7-2"><a href="#034e9bb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="034e9bb7-3"><a href="#034e9bb7-3" aria-hidden="true" tabindex="-1"></a>communes_31 <span class="op">=</span> carti_download(</span>
<span id="034e9bb7-4"><a href="#034e9bb7-4" aria-hidden="true" tabindex="-1"></a>    values<span class="op">=</span>[<span class="st">"31"</span>],</span>
<span id="034e9bb7-5"><a href="#034e9bb7-5" aria-hidden="true" tabindex="-1"></a>    crs<span class="op">=</span><span class="dv">4326</span>,</span>
<span id="034e9bb7-6"><a href="#034e9bb7-6" aria-hidden="true" tabindex="-1"></a>    borders<span class="op">=</span><span class="st">"COMMUNE"</span>,</span>
<span id="034e9bb7-7"><a href="#034e9bb7-7" aria-hidden="true" tabindex="-1"></a>    vectorfile_format<span class="op">=</span><span class="st">"geojson"</span>,</span>
<span id="034e9bb7-8"><a href="#034e9bb7-8" aria-hidden="true" tabindex="-1"></a>    filter_by<span class="op">=</span><span class="st">"DEPARTEMENT"</span>,</span>
<span id="034e9bb7-9"><a href="#034e9bb7-9" aria-hidden="true" tabindex="-1"></a>    source<span class="op">=</span><span class="st">"EXPRESS-COG-CARTO-TERRITOIRE"</span>,</span>
<span id="034e9bb7-10"><a href="#034e9bb7-10" aria-hidden="true" tabindex="-1"></a>    year<span class="op">=</span><span class="dv">2022</span>,</span>
<span id="034e9bb7-11"><a href="#034e9bb7-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="034e9bb7-12"><a href="#034e9bb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="034e9bb7-13"><a href="#034e9bb7-13" aria-hidden="true" tabindex="-1"></a><span class="co"># on reprojete en 3857 pour le fond de carte</span></span>
<span id="034e9bb7-14"><a href="#034e9bb7-14" aria-hidden="true" tabindex="-1"></a>communes_31 <span class="op">=</span> communes_31.to_crs(<span class="dv">3857</span>)</span>
<span id="034e9bb7-15"><a href="#034e9bb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="034e9bb7-16"><a href="#034e9bb7-16" aria-hidden="true" tabindex="-1"></a><span class="co"># on calcule le centroide</span></span>
<span id="034e9bb7-17"><a href="#034e9bb7-17" aria-hidden="true" tabindex="-1"></a>dep_31 <span class="op">=</span> communes_31.copy()</span>
<span id="034e9bb7-18"><a href="#034e9bb7-18" aria-hidden="true" tabindex="-1"></a>communes_31[<span class="st">"geometry"</span>] <span class="op">=</span> communes_31[<span class="st">"geometry"</span>].centroid</span>
<span id="034e9bb7-19"><a href="#034e9bb7-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="034e9bb7-20"><a href="#034e9bb7-20" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> communes_31.plot(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">10</span>), color<span class="op">=</span><span class="st">"red"</span>, alpha<span class="op">=</span><span class="fl">0.4</span>, zorder<span class="op">=</span><span class="dv">2</span>)</span>
<span id="034e9bb7-21"><a href="#034e9bb7-21" aria-hidden="true" tabindex="-1"></a>dep_31.to_crs(<span class="dv">3857</span>).plot(</span>
<span id="034e9bb7-22"><a href="#034e9bb7-22" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax, zorder<span class="op">=</span><span class="dv">1</span>, edgecolor<span class="op">=</span><span class="st">"black"</span>, facecolor<span class="op">=</span><span class="st">"none"</span>, color<span class="op">=</span><span class="va">None</span></span>
<span id="034e9bb7-23"><a href="#034e9bb7-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="034e9bb7-24"><a href="#034e9bb7-24" aria-hidden="true" tabindex="-1"></a><span class="co"># ctx.add_basemap(ax, source = ctx.providers.Stamen.Toner)</span></span>
<span id="034e9bb7-25"><a href="#034e9bb7-25" aria-hidden="true" tabindex="-1"></a>ax.set_axis_off()</span>
<span id="034e9bb7-26"><a href="#034e9bb7-26" aria-hidden="true" tabindex="-1"></a>ax</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/cell-30-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-19"><img src="03_geopandas_intro_files/figure-html/cell-30-output-1.png" width="720" height="758" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Par conséquent, avec <code>Geopandas</code>, l’ensemble de la grammaire <code>Pandas</code> peut être mobilisée pour traiter la dimension attributaire des données alors que la dimension géographique pourra être manipulée avec des méthodes adaptées.</p>
</section>
</section>
<section id="enrichissements-grâce-à-la-dimension-spatiale-les-jointures-spatiales" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Enrichissements grâce à la dimension spatiale: les jointures spatiales</h1>
<section id="principe-1" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="principe-1"><span class="header-section-number">6.1</span> Principe</h2>
<p>La carte précédente illustre déjà la puissance de la représentation cartographique. En quelques lignes de code, avec très peu d’opérations sur nos données, on comprend déjà mieux le phénomène qu’on désire observer. En l’occurrence, on détecte très clairement une structure centre-périphérie dans nos données, ce qui n’est pas surprenant mais qu’il est rassurant de retrouver au premier abord.</p>
<p>On remarque également que les stations les plus utilisées, à l’extérieur de l’hypercentre parisien, sont généralement situées sur les grands axes ou à proximité des parcs. Là encore, rien de surprenant mais il est rassurant de retrouver ceci dans nos données.</p>
<p>On peut maintenant explorer de manière plus approfondie la structure de notre jeu de données. Cependant si on observe celui-ci, on remarque qu’on a peu d’informations dans le jeu de données brutes</p>
<div id="cell-visualise-before-spatial-joins" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cell-visualise-before-spatial-joins"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cell-visualise-before-spatial-joins-1"><a href="#cell-visualise-before-spatial-joins-1" aria-hidden="true" tabindex="-1"></a>stations.head(<span class="dv">2</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="visualise-before-spatial-joins" class="cell-output cell-output-display" data-execution_count="29">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">capacity</th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">stationcode</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>25</td>
<td>Silly - Galliéni</td>
<td>21010</td>
<td>POINT (643667.502 6859777.173)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>36</td>
<td>Guersant - Gouvion-Saint-Cyr</td>
<td>17041</td>
<td>POINT (647760.557 6864997.91)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>Dans le chapitre précédent, nous avons présenté la manière dont l’association de jeux de données par une dimension commune permet d’accroître la valeur de celles-ci. En l’occurrence, il s’agissait d’appariements de données sur la base d’informations communes dans les deux jeux de données.</p>
<p>Nous avons maintenant une information supplémentaire implicite dans nos deux de données: la dimension géographique. On parle de jointure spatiale pour désigner l’association de jeux de données sur la dimension géographique. Il existe de nombreux types différents de jointures spatiales: trouver des points dans un polygone, trouver l’intersection entre plusieurs aires, relier un point à son plus proche voisin dans une autre source, etc.</p>
</section>
<section id="exemple-localiser-les-stations-dans-leur-arrondissement" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="exemple-localiser-les-stations-dans-leur-arrondissement"><span class="header-section-number">6.2</span> Exemple: localiser les stations dans leur arrondissement</h2>
<p>Dans cet exercice, on va supposer que :</p>
<ul>
<li>les localisations des stations <code>velib</code>
sont stockées dans un <em>dataframe</em> nommé <code>stations</code></li>
<li>les données administratives
sont dans un <em>dataframe</em> nommé <code>petite_couronne</code>.</li>
</ul>
<div class="callout callout-style-default callout-exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 4: Associer les stations aux communes et arrondissements auxquels elles appartiennent
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<ol type="1">
<li>Faire une jointure spatiale pour enrichir les données de stations en y ajoutant des informations de <code>petite_couronne</code>. Appeler cet objet <code>stations_info</code>.</li>
<li>Compter le nombre de stations et la taille médiane des stations par arrondissements</li>
<li>Créer les objets <code>stations_19e</code> et <code>arrondissement_19e</code> pour stocker, respectivement,
les stations appartenant au 19e et les limites de l’arrondissement.</li>
<li>Compter le nombre de stations velib et le nombre de places velib par arrondissement ou commune. Représenter sur une carte chacune des informations</li>
<li>Représenter la carte des stations du 19e arrondissement avec le code suivant :</li>
</ol>
<div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>base <span class="op">=</span> petite_couronne.loc[petite_couronne[<span class="st">"INSEE_DEP"</span>] <span class="op">==</span> <span class="st">"75"</span>].boundary.plot(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    edgecolor<span class="op">=</span><span class="st">"k"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>arrondissement_19e.boundary.plot(ax<span class="op">=</span>base, edgecolor<span class="op">=</span><span class="st">"red"</span>, linewidth<span class="op">=</span><span class="fl">0.9</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>stations_19.plot(ax<span class="op">=</span>base, color<span class="op">=</span><span class="st">"red"</span>, alpha<span class="op">=</span><span class="fl">0.4</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>base.set_axis_off()</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>base.set_title(<span class="st">"Les stations Vélib du 19e arrondissement"</span>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>base</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>En reprenant les exemples précédents, ne représenter que le 19e et ajouter un fond de carte <em>openstreetmap</em> pour mieux localiser les stations.</p>
<ol start="4" type="1">
<li>Représenter les mêmes informations mais en densité (diviser par la surface de l’arrondissement ou commune en km2)</li>
</ol>
</div>
</div>
</div>
<p>A l’issue de la jointure spatiale, le jeu de données présente la structure suivante</p>
<div id="633587b3" class="cell" data-execution_count="32">
<div class="cell-output cell-output-display" data-execution_count="31">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">capacity</th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">stationcode</th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">index_right</th>
<th data-quarto-table-cell-role="th">INSEE_DEP</th>
<th data-quarto-table-cell-role="th">INSEE_REG</th>
<th data-quarto-table-cell-role="th">ID</th>
<th data-quarto-table-cell-role="th">NOM</th>
<th data-quarto-table-cell-role="th">INSEE_COM</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">AAV2020</th>
<th data-quarto-table-cell-role="th">TAAV2017</th>
<th data-quarto-table-cell-role="th">TDAAV2017</th>
<th data-quarto-table-cell-role="th">CATEAAV2020</th>
<th data-quarto-table-cell-role="th">BV2012</th>
<th data-quarto-table-cell-role="th">LIBELLE_DEPARTEMENT</th>
<th data-quarto-table-cell-role="th">LIBELLE_REGION</th>
<th data-quarto-table-cell-role="th">PAYS</th>
<th data-quarto-table-cell-role="th">SOURCE</th>
<th data-quarto-table-cell-role="th">AREA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>25</td>
<td>Silly - Galliéni</td>
<td>21010</td>
<td>POINT (643667.502 6859777.173)</td>
<td>49</td>
<td>92</td>
<td>11</td>
<td>COMMUNE_0000000009736552</td>
<td>Boulogne-Billancourt</td>
<td>92012</td>
<td>...</td>
<td>001</td>
<td>5</td>
<td>50</td>
<td>12</td>
<td>75056</td>
<td>Hauts-de-Seine</td>
<td>Île-de-France</td>
<td>France</td>
<td>IGN:EXPRESS-COG-CARTO-TERRITOIRE</td>
<td>metropole</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>36</td>
<td>Guersant - Gouvion-Saint-Cyr</td>
<td>17041</td>
<td>POINT (647760.557 6864997.91)</td>
<td>11</td>
<td>75</td>
<td>11</td>
<td>ARR_MUNI0000000009736041</td>
<td>Paris 17e Arrondissement</td>
<td>75056</td>
<td>...</td>
<td>001</td>
<td>5</td>
<td>50</td>
<td>11</td>
<td>75056</td>
<td>Paris</td>
<td>Île-de-France</td>
<td>France</td>
<td>IGN:EXPRESS-COG-CARTO-TERRITOIRE</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>2 rows × 31 columns</p>
</div>
</div>
</div>
</div>
<p>On peut donc calculer des statistiques par arrondissement, comme on le ferait avec un <code>DataFrame Pandas</code> (question 2):</p>
<div id="cell-exo4-q2" class="cell" data-execution_count="33">
<div id="exo4-q2" class="cell-output cell-output-display" data-execution_count="32">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">NOM</th>
<th colspan="2" data-quarto-table-cell-role="th" data-halign="left">capacity</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">median</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">78</td>
<td>Ville-d'Avray</td>
<td>1</td>
<td>24.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">28</td>
<td>Joinville-le-Pont</td>
<td>1</td>
<td>40.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">23</td>
<td>Garches</td>
<td>2</td>
<td>21.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">29</td>
<td>La Courneuve</td>
<td>2</td>
<td>31.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">32</td>
<td>Le Pré-Saint-Gervais</td>
<td>2</td>
<td>21.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">51</td>
<td>Paris 16e Arrondissement</td>
<td>64</td>
<td>31.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">47</td>
<td>Paris 12e Arrondissement</td>
<td>66</td>
<td>38.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">48</td>
<td>Paris 13e Arrondissement</td>
<td>68</td>
<td>33.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">56</td>
<td>Paris 20e Arrondissement</td>
<td>71</td>
<td>25.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">50</td>
<td>Paris 15e Arrondissement</td>
<td>90</td>
<td>35.0</td>
</tr>
</tbody>
</table>

<p>83 rows × 3 columns</p>
</div>
</div>
</div>
</div>
<p>Néanmoins des cartes seront sans doute plus parlante. Pour commencer, avec la question 3, on peut représenter les stations du 19e arrondissement, d’abord dans l’ensemble de Paris.</p>
<div id="cell-exo4-q4" class="cell" data-execution_count="35">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/exo4-q4-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-20"><img src="03_geopandas_intro_files/figure-html/exo4-q4-output-1.png" id="exo4-q4" width="540" height="317" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>On peut ensuite zoomer sur cet arrondissement et faire une carte avec un fond plus travaillé:</p>
<div id="cell-exo4-q4b" class="cell" data-execution_count="36">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/exo4-q4b-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-21"><img src="03_geopandas_intro_files/figure-html/exo4-q4b-output-1.png" id="exo4-q4b" width="391" height="423" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Carte obtenue à la question 5 :</p>
<div id="cell-exo4-q5" class="cell" data-execution_count="37">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/exo4-q5-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-22"><img src="03_geopandas_intro_files/figure-html/exo4-q5-output-1.png" id="exo4-q5" width="524" height="389" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<div id="24a2d80c" class="cell" data-execution_count="38">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/cell-39-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-23"><img src="03_geopandas_intro_files/figure-html/cell-39-output-1.png" width="515" height="389" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Avec cette carte, basée sur des aplats de couleurs (<em>choropleth map</em>), le lecteur est victime d’une illusion classique. Les arrondissements les plus visibles sur la carte sont les plus grands. D’ailleurs c’est assez logique qu’ils soient également mieux pourvus en velib. Même si l’offre de velib est probablement plus reliée à la densité de population et d’équipements, on peut penser que l’effet taille joue et que celui-ci est certainement le phénomène le plus visible sur notre carte alors qu’il ne s’agit peut-être pas du facteur de premier ordre en réalité.</p>
<p>Si on représente plutôt la capacité sous forme de densité, pour tenir compte de la taille différente des arrondissements, les conclusions sont inversées et correspondent mieux aux attentes d’un modèle centre-périphérie. Les arrondissements centraux sont mieux pourvus. Si nous faisions une carte avec des ronds proportionnels plutôt qu’une carte chorolèpthe, cela serait encore plus visible ; néanmoins la cartographie n’est pas l’objet de ce chapitre.</p>
<div id="6fcb07e9" class="cell" data-execution_count="39">
<div class="cell-output cell-output-display" data-execution_count="38">
<pre><code>&lt;Axes: &gt;</code></pre>
</div>
</div>
</section>
<section id="exercice-supplémentaire" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="exercice-supplémentaire"><span class="header-section-number">6.3</span> Exercice supplémentaire</h2>
<p>Les exercices précédents ont permis de se familiariser au traitement de données
spatiales. Néanmoins il arrive fréquemment de devoir jongler de manière plus ardue avec la
dimension géométrique. Il peut s’agir, par exemple, de changer d’échelle territoriale dans les données ou d’introduire
des fusions/dissolutions de géométries.</p>
<p>Nous allons illustrer cela avec un exercice supplémentaire illustrant, en pratique, comment travailler des données dans les modèles d’économie urbaine où on fait l’hypothèse de déplacements au plus proche point (<a href="https://fr.wikipedia.org/wiki/Loi_de_Hotelling">modèle d’Hotelling</a>).</p>
<p>Imaginons que chaque utilisateur de velib se déplace exclusivement
vers la station la plus proche (à supposer qu’il n’y a jamais pénurie
ou surcapacité). Quelle est la carte de la couverture des vélibs ?
Pour répondre à ce type de question, on utilise fréquemment la
la <a href="https://fr.wikipedia.org/wiki/Diagramme_de_Vorono%C3%AF">tesselation de Voronoï</a>,
une opération classique pour transformer des points en polygones.</p>
<p>L’exercice suivant
permet de se familiariser avec la construction de <em>voronoi</em> <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p>
<div class="callout callout-style-default callout-exercise no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 5 (optionnel): La carte de couverture des stations
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Cet exercice est plus complexe parce qu’il implique de revenir à <code>Shapely</code>, une librairie plus bas niveau que <code>GeoPandas</code>.</p>
<p>Cet exercice est laissé libre. Une source d’inspiration possible est cette discussion sur <a href="https://gis.stackexchange.com/questions/337561/making-polygon-for-every-point-in-set-using-voronoi-diagram">StackExchange</a>.</p>
<p>L’objectif est de faire deux cartes de couverture: une au niveau de la petite couronne et l’autre seulement au sein de Paris intramuros.</p>
</div>
</div>
</div>
<p>La première carte de couverture, au niveau de l’agglomération dans son ensemble,
permet de voir la densité plus importante des
stations velib dans le centre parisien:</p>
<div id="ea8334fe" class="cell" data-execution_count="41">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/cell-42-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-24"><img src="03_geopandas_intro_files/figure-html/cell-42-output-1.png" width="725" height="758" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Si on zoome sur Paris intramuros, on a également une hétérogénéité dans la couverture.
On a moins d’hétérogénéité dans les surfaces de couverture puisque la densité est importante mais on remarque néanmoins des divergences entre certains espaces.</p>
<div id="d0536a1d" class="cell" data-execution_count="42">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><a href="03_geopandas_intro_files/figure-html/cell-43-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-25"><img src="03_geopandas_intro_files/figure-html/cell-43-output-1.png" width="763" height="418" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="références" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Références</h1>
</section>
<section id="references" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> References</h1>
<section id="informations-additionnelles" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="informations-additionnelles">Informations additionnelles</h2>
<details>
<summary>
<p><i class="fa-brands fa-python" aria-label="python"></i> environment files have been tested on.</p>
</summary>
<p>Latest built version: 2024-10-01</p>
<p>Python version used:</p>
<div id="e5bde110" class="cell" data-execution_count="44">
<div class="cell-output cell-output-display" data-execution_count="43">
<pre><code>'3.11.6 | packaged by conda-forge | (main, Oct  3 2023, 10:40:35) [GCC 12.3.0]'</code></pre>
</div>
</div>
<div class="git-details">
<div class="pip-freeze">
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">Package</th>
<th style="text-align: left;">Version</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">affine</td>
<td style="text-align: left;">2.4.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">aiobotocore</td>
<td style="text-align: left;">2.12.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">aiohttp</td>
<td style="text-align: left;">3.9.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">aioitertools</td>
<td style="text-align: left;">0.11.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">aiosignal</td>
<td style="text-align: left;">1.3.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">alembic</td>
<td style="text-align: left;">1.13.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">altair</td>
<td style="text-align: left;">5.4.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">aniso8601</td>
<td style="text-align: left;">9.0.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">annotated-types</td>
<td style="text-align: left;">0.7.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">appdirs</td>
<td style="text-align: left;">1.4.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">archspec</td>
<td style="text-align: left;">0.2.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">astroid</td>
<td style="text-align: left;">3.1.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">asttokens</td>
<td style="text-align: left;">2.4.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">attrs</td>
<td style="text-align: left;">23.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">babel</td>
<td style="text-align: left;">2.16.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">bcrypt</td>
<td style="text-align: left;">4.1.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">beautifulsoup4</td>
<td style="text-align: left;">4.12.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">black</td>
<td style="text-align: left;">24.8.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">blinker</td>
<td style="text-align: left;">1.7.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">blis</td>
<td style="text-align: left;">0.7.11</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bokeh</td>
<td style="text-align: left;">3.4.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">boltons</td>
<td style="text-align: left;">23.1.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">boto3</td>
<td style="text-align: left;">1.34.51</td>
</tr>
<tr class="even">
<td style="text-align: left;">botocore</td>
<td style="text-align: left;">1.34.51</td>
</tr>
<tr class="odd">
<td style="text-align: left;">branca</td>
<td style="text-align: left;">0.7.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brotli</td>
<td style="text-align: left;">1.1.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cachetools</td>
<td style="text-align: left;">5.3.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">cartiflette</td>
<td style="text-align: left;">0.0.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cartopy</td>
<td style="text-align: left;">0.23.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">catalogue</td>
<td style="text-align: left;">2.0.10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cattrs</td>
<td style="text-align: left;">24.1.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">certifi</td>
<td style="text-align: left;">2024.2.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cffi</td>
<td style="text-align: left;">1.16.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">charset-normalizer</td>
<td style="text-align: left;">3.3.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">click</td>
<td style="text-align: left;">8.1.7</td>
</tr>
<tr class="even">
<td style="text-align: left;">click-plugins</td>
<td style="text-align: left;">1.1.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cligj</td>
<td style="text-align: left;">0.7.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">cloudpathlib</td>
<td style="text-align: left;">0.19.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cloudpickle</td>
<td style="text-align: left;">3.0.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">colorama</td>
<td style="text-align: left;">0.4.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">comm</td>
<td style="text-align: left;">0.2.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">commonmark</td>
<td style="text-align: left;">0.9.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">conda</td>
<td style="text-align: left;">24.3.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">conda-libmamba-solver</td>
<td style="text-align: left;">24.1.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">conda-package-handling</td>
<td style="text-align: left;">2.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">conda_package_streaming</td>
<td style="text-align: left;">0.9.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">confection</td>
<td style="text-align: left;">0.1.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">contextily</td>
<td style="text-align: left;">1.6.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">contourpy</td>
<td style="text-align: left;">1.2.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">cryptography</td>
<td style="text-align: left;">42.0.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cycler</td>
<td style="text-align: left;">0.12.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">cymem</td>
<td style="text-align: left;">2.0.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cytoolz</td>
<td style="text-align: left;">0.12.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">dask</td>
<td style="text-align: left;">2024.4.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dask-expr</td>
<td style="text-align: left;">1.0.10</td>
</tr>
<tr class="even">
<td style="text-align: left;">debugpy</td>
<td style="text-align: left;">1.8.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">decorator</td>
<td style="text-align: left;">5.1.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">dill</td>
<td style="text-align: left;">0.3.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">diskcache</td>
<td style="text-align: left;">5.6.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">distributed</td>
<td style="text-align: left;">2024.4.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">distro</td>
<td style="text-align: left;">1.9.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">docker</td>
<td style="text-align: left;">7.0.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">duckdb</td>
<td style="text-align: left;">0.10.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">en-core-web-sm</td>
<td style="text-align: left;">3.7.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">entrypoints</td>
<td style="text-align: left;">0.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">et-xmlfile</td>
<td style="text-align: left;">1.1.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exceptiongroup</td>
<td style="text-align: left;">1.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">executing</td>
<td style="text-align: left;">2.0.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fastexcel</td>
<td style="text-align: left;">0.11.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">fastjsonschema</td>
<td style="text-align: left;">2.19.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fiona</td>
<td style="text-align: left;">1.9.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">flake8</td>
<td style="text-align: left;">7.0.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Flask</td>
<td style="text-align: left;">3.0.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">folium</td>
<td style="text-align: left;">0.16.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fontawesomefree</td>
<td style="text-align: left;">6.6.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">fonttools</td>
<td style="text-align: left;">4.51.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">frozenlist</td>
<td style="text-align: left;">1.4.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">fsspec</td>
<td style="text-align: left;">2023.12.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GDAL</td>
<td style="text-align: left;">3.8.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">gensim</td>
<td style="text-align: left;">4.3.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">geographiclib</td>
<td style="text-align: left;">2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">geopandas</td>
<td style="text-align: left;">1.0.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">geoplot</td>
<td style="text-align: left;">0.5.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">geopy</td>
<td style="text-align: left;">2.4.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gitdb</td>
<td style="text-align: left;">4.0.11</td>
</tr>
<tr class="even">
<td style="text-align: left;">GitPython</td>
<td style="text-align: left;">3.1.43</td>
</tr>
<tr class="odd">
<td style="text-align: left;">google-auth</td>
<td style="text-align: left;">2.29.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">graphene</td>
<td style="text-align: left;">3.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">graphql-core</td>
<td style="text-align: left;">3.2.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">graphql-relay</td>
<td style="text-align: left;">3.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">graphviz</td>
<td style="text-align: left;">0.20.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">great-tables</td>
<td style="text-align: left;">0.12.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">greenlet</td>
<td style="text-align: left;">3.0.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">gunicorn</td>
<td style="text-align: left;">21.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">htmltools</td>
<td style="text-align: left;">0.5.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">hvac</td>
<td style="text-align: left;">2.1.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">idna</td>
<td style="text-align: left;">3.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">imageio</td>
<td style="text-align: left;">2.35.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">importlib_metadata</td>
<td style="text-align: left;">7.1.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">importlib_resources</td>
<td style="text-align: left;">6.4.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">inflate64</td>
<td style="text-align: left;">1.0.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">ipykernel</td>
<td style="text-align: left;">6.29.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ipython</td>
<td style="text-align: left;">8.22.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">ipywidgets</td>
<td style="text-align: left;">8.1.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">isort</td>
<td style="text-align: left;">5.13.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">itsdangerous</td>
<td style="text-align: left;">2.1.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">jedi</td>
<td style="text-align: left;">0.19.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Jinja2</td>
<td style="text-align: left;">3.1.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">jmespath</td>
<td style="text-align: left;">1.0.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">joblib</td>
<td style="text-align: left;">1.3.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">jsonpatch</td>
<td style="text-align: left;">1.33</td>
</tr>
<tr class="even">
<td style="text-align: left;">jsonpointer</td>
<td style="text-align: left;">2.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">jsonschema</td>
<td style="text-align: left;">4.21.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">jsonschema-specifications</td>
<td style="text-align: left;">2023.12.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">jupyter-cache</td>
<td style="text-align: left;">1.0.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">jupyter_client</td>
<td style="text-align: left;">8.6.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">jupyter_core</td>
<td style="text-align: left;">5.7.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">jupyterlab_widgets</td>
<td style="text-align: left;">3.0.10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">kaleido</td>
<td style="text-align: left;">0.2.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">kiwisolver</td>
<td style="text-align: left;">1.4.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">kubernetes</td>
<td style="text-align: left;">29.0.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">langcodes</td>
<td style="text-align: left;">3.4.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">language_data</td>
<td style="text-align: left;">1.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">lazy_loader</td>
<td style="text-align: left;">0.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">libmambapy</td>
<td style="text-align: left;">1.5.7</td>
</tr>
<tr class="even">
<td style="text-align: left;">llvmlite</td>
<td style="text-align: left;">0.42.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">locket</td>
<td style="text-align: left;">1.0.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">lxml</td>
<td style="text-align: left;">5.3.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lz4</td>
<td style="text-align: left;">4.3.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mako</td>
<td style="text-align: left;">1.3.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mamba</td>
<td style="text-align: left;">1.5.7</td>
</tr>
<tr class="even">
<td style="text-align: left;">mapclassify</td>
<td style="text-align: left;">2.6.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">marisa-trie</td>
<td style="text-align: left;">1.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Markdown</td>
<td style="text-align: left;">3.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">markdown-it-py</td>
<td style="text-align: left;">3.0.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">MarkupSafe</td>
<td style="text-align: left;">2.1.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">matplotlib</td>
<td style="text-align: left;">3.8.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">matplotlib-inline</td>
<td style="text-align: left;">0.1.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mccabe</td>
<td style="text-align: left;">0.7.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">mdurl</td>
<td style="text-align: left;">0.1.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">menuinst</td>
<td style="text-align: left;">2.0.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">mercantile</td>
<td style="text-align: left;">1.2.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mizani</td>
<td style="text-align: left;">0.11.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">mlflow</td>
<td style="text-align: left;">2.11.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mlflow-skinny</td>
<td style="text-align: left;">2.11.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">msgpack</td>
<td style="text-align: left;">1.0.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">multidict</td>
<td style="text-align: left;">6.0.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">multivolumefile</td>
<td style="text-align: left;">0.2.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">munkres</td>
<td style="text-align: left;">1.1.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">murmurhash</td>
<td style="text-align: left;">1.0.10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mypy</td>
<td style="text-align: left;">1.9.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">mypy-extensions</td>
<td style="text-align: left;">1.0.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">narwhals</td>
<td style="text-align: left;">1.9.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">nbclient</td>
<td style="text-align: left;">0.10.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">nbformat</td>
<td style="text-align: left;">5.10.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">nest_asyncio</td>
<td style="text-align: left;">1.6.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">networkx</td>
<td style="text-align: left;">3.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">nltk</td>
<td style="text-align: left;">3.8.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numba</td>
<td style="text-align: left;">0.59.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">numpy</td>
<td style="text-align: left;">1.26.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">oauthlib</td>
<td style="text-align: left;">3.2.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">opencv-python-headless</td>
<td style="text-align: left;">4.9.0.80</td>
</tr>
<tr class="odd">
<td style="text-align: left;">openpyxl</td>
<td style="text-align: left;">3.1.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">OWSLib</td>
<td style="text-align: left;">0.28.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">packaging</td>
<td style="text-align: left;">23.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">pandas</td>
<td style="text-align: left;">2.2.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">paramiko</td>
<td style="text-align: left;">3.4.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">parso</td>
<td style="text-align: left;">0.8.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">partd</td>
<td style="text-align: left;">1.4.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">pathspec</td>
<td style="text-align: left;">0.12.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">patsy</td>
<td style="text-align: left;">0.5.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Pebble</td>
<td style="text-align: left;">5.0.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pexpect</td>
<td style="text-align: left;">4.9.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">pickleshare</td>
<td style="text-align: left;">0.7.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pillow</td>
<td style="text-align: left;">10.3.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">pip</td>
<td style="text-align: left;">24.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pkgutil_resolve_name</td>
<td style="text-align: left;">1.3.10</td>
</tr>
<tr class="even">
<td style="text-align: left;">platformdirs</td>
<td style="text-align: left;">4.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">plotly</td>
<td style="text-align: left;">5.19.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">plotnine</td>
<td style="text-align: left;">0.13.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pluggy</td>
<td style="text-align: left;">1.4.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">polars</td>
<td style="text-align: left;">1.8.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">preshed</td>
<td style="text-align: left;">3.0.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">prometheus_client</td>
<td style="text-align: left;">0.20.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">prometheus-flask-exporter</td>
<td style="text-align: left;">0.23.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">prompt-toolkit</td>
<td style="text-align: left;">3.0.42</td>
</tr>
<tr class="odd">
<td style="text-align: left;">protobuf</td>
<td style="text-align: left;">4.25.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">psutil</td>
<td style="text-align: left;">5.9.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ptyprocess</td>
<td style="text-align: left;">0.7.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">pure-eval</td>
<td style="text-align: left;">0.2.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">py7zr</td>
<td style="text-align: left;">0.20.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">pyarrow</td>
<td style="text-align: left;">17.0.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pyarrow-hotfix</td>
<td style="text-align: left;">0.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">pyasn1</td>
<td style="text-align: left;">0.5.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pyasn1-modules</td>
<td style="text-align: left;">0.3.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">pybcj</td>
<td style="text-align: left;">1.0.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pycodestyle</td>
<td style="text-align: left;">2.11.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">pycosat</td>
<td style="text-align: left;">0.6.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pycparser</td>
<td style="text-align: left;">2.21</td>
</tr>
<tr class="even">
<td style="text-align: left;">pycryptodomex</td>
<td style="text-align: left;">3.20.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pydantic</td>
<td style="text-align: left;">2.9.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">pydantic_core</td>
<td style="text-align: left;">2.23.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pyflakes</td>
<td style="text-align: left;">3.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Pygments</td>
<td style="text-align: left;">2.17.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PyJWT</td>
<td style="text-align: left;">2.8.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">pylint</td>
<td style="text-align: left;">3.1.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PyNaCl</td>
<td style="text-align: left;">1.5.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">pynsee</td>
<td style="text-align: left;">0.1.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pyogrio</td>
<td style="text-align: left;">0.10.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">pyOpenSSL</td>
<td style="text-align: left;">24.0.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pyparsing</td>
<td style="text-align: left;">3.1.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">pyppmd</td>
<td style="text-align: left;">1.1.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pyproj</td>
<td style="text-align: left;">3.6.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">pyshp</td>
<td style="text-align: left;">2.3.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PySocks</td>
<td style="text-align: left;">1.7.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">python-dateutil</td>
<td style="text-align: left;">2.9.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">python-dotenv</td>
<td style="text-align: left;">1.0.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">python-magic</td>
<td style="text-align: left;">0.4.27</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pytz</td>
<td style="text-align: left;">2024.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">pyu2f</td>
<td style="text-align: left;">0.1.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pywaffle</td>
<td style="text-align: left;">1.1.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">PyYAML</td>
<td style="text-align: left;">6.0.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pyzmq</td>
<td style="text-align: left;">25.1.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">pyzstd</td>
<td style="text-align: left;">0.16.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">querystring-parser</td>
<td style="text-align: left;">1.2.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">rasterio</td>
<td style="text-align: left;">1.4.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">referencing</td>
<td style="text-align: left;">0.34.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">regex</td>
<td style="text-align: left;">2023.12.25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">requests</td>
<td style="text-align: left;">2.31.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">requests-cache</td>
<td style="text-align: left;">1.2.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">requests-oauthlib</td>
<td style="text-align: left;">2.0.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">retrying</td>
<td style="text-align: left;">1.3.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rich</td>
<td style="text-align: left;">13.8.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">rpds-py</td>
<td style="text-align: left;">0.18.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rsa</td>
<td style="text-align: left;">4.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rtree</td>
<td style="text-align: left;">1.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ruamel.yaml</td>
<td style="text-align: left;">0.18.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">ruamel.yaml.clib</td>
<td style="text-align: left;">0.2.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">s3fs</td>
<td style="text-align: left;">2023.12.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">s3transfer</td>
<td style="text-align: left;">0.10.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">scikit-image</td>
<td style="text-align: left;">0.24.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">scikit-learn</td>
<td style="text-align: left;">1.4.1.post1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">scipy</td>
<td style="text-align: left;">1.13.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">seaborn</td>
<td style="text-align: left;">0.13.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">setuptools</td>
<td style="text-align: left;">69.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">shapely</td>
<td style="text-align: left;">2.0.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">shellingham</td>
<td style="text-align: left;">1.5.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">six</td>
<td style="text-align: left;">1.16.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">smart_open</td>
<td style="text-align: left;">7.0.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">smmap</td>
<td style="text-align: left;">5.0.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sortedcontainers</td>
<td style="text-align: left;">2.4.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">soupsieve</td>
<td style="text-align: left;">2.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">spacy</td>
<td style="text-align: left;">3.7.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">spacy-legacy</td>
<td style="text-align: left;">3.0.12</td>
</tr>
<tr class="odd">
<td style="text-align: left;">spacy-loggers</td>
<td style="text-align: left;">1.0.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">SQLAlchemy</td>
<td style="text-align: left;">2.0.29</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sqlparse</td>
<td style="text-align: left;">0.4.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">srsly</td>
<td style="text-align: left;">2.4.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">stack-data</td>
<td style="text-align: left;">0.6.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">statsmodels</td>
<td style="text-align: left;">0.14.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tabulate</td>
<td style="text-align: left;">0.9.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">tblib</td>
<td style="text-align: left;">3.0.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tenacity</td>
<td style="text-align: left;">8.2.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">texttable</td>
<td style="text-align: left;">1.7.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">thinc</td>
<td style="text-align: left;">8.2.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">threadpoolctl</td>
<td style="text-align: left;">3.4.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tifffile</td>
<td style="text-align: left;">2024.9.20</td>
</tr>
<tr class="even">
<td style="text-align: left;">tomli</td>
<td style="text-align: left;">2.0.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tomlkit</td>
<td style="text-align: left;">0.12.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">toolz</td>
<td style="text-align: left;">0.12.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">topojson</td>
<td style="text-align: left;">1.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">tornado</td>
<td style="text-align: left;">6.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tqdm</td>
<td style="text-align: left;">4.66.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">traitlets</td>
<td style="text-align: left;">5.14.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">truststore</td>
<td style="text-align: left;">0.8.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">typer</td>
<td style="text-align: left;">0.12.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">typing_extensions</td>
<td style="text-align: left;">4.11.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">tzdata</td>
<td style="text-align: left;">2024.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Unidecode</td>
<td style="text-align: left;">1.3.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">url-normalize</td>
<td style="text-align: left;">1.4.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">urllib3</td>
<td style="text-align: left;">1.26.18</td>
</tr>
<tr class="even">
<td style="text-align: left;">wasabi</td>
<td style="text-align: left;">1.1.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">wcwidth</td>
<td style="text-align: left;">0.2.13</td>
</tr>
<tr class="even">
<td style="text-align: left;">weasel</td>
<td style="text-align: left;">0.4.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">webdriver-manager</td>
<td style="text-align: left;">4.0.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">websocket-client</td>
<td style="text-align: left;">1.7.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Werkzeug</td>
<td style="text-align: left;">3.0.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">wheel</td>
<td style="text-align: left;">0.43.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">widgetsnbextension</td>
<td style="text-align: left;">4.0.10</td>
</tr>
<tr class="even">
<td style="text-align: left;">wordcloud</td>
<td style="text-align: left;">1.9.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">wrapt</td>
<td style="text-align: left;">1.16.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">xgboost</td>
<td style="text-align: left;">2.0.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">xlrd</td>
<td style="text-align: left;">2.0.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">xyzservices</td>
<td style="text-align: left;">2024.4.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">yarl</td>
<td style="text-align: left;">1.9.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">yellowbrick</td>
<td style="text-align: left;">1.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">zict</td>
<td style="text-align: left;">3.0.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">zipp</td>
<td style="text-align: left;">3.17.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">zstandard</td>
<td style="text-align: left;">0.22.0</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div></details>
<details>
<summary>
<p>View file history <i class="fa-brands fa-git-alt" aria-label="git-alt"></i></p>
</summary>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb27" data-startfrom="1628" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1627;"><span id="cb27-1628"><a href="#cb27-1628" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Ce fichier a été modifié __</span><span class="sc">${</span>table_commit<span class="op">.</span><span class="at">length</span><span class="sc">}</span><span class="vs">__ fois depuis sa création le </span><span class="sc">${</span>creation_string<span class="sc">}</span><span class="vs"> (dernière modification le </span><span class="sc">${</span>last_modification_string<span class="sc">}</span><span class="vs">)`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-18" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb28" data-startfrom="1" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>creation <span class="op">=</span> d3<span class="op">.</span><span class="fu">min</span>(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  table_commit<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Date</span>(d<span class="op">.</span><span class="at">Date</span>))</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>last_modification <span class="op">=</span> d3<span class="op">.</span><span class="fu">max</span>(</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  table_commit<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Date</span>(d<span class="op">.</span><span class="at">Date</span>))</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>creation_string <span class="op">=</span> creation<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">"fr"</span><span class="op">,</span> {</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"day"</span><span class="op">:</span> <span class="st">"numeric"</span><span class="op">,</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"month"</span><span class="op">:</span> <span class="st">"long"</span><span class="op">,</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"year"</span><span class="op">:</span> <span class="st">"numeric"</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>last_modification_string <span class="op">=</span> last_modification<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">"fr"</span><span class="op">,</span> {</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"day"</span><span class="op">:</span> <span class="st">"numeric"</span><span class="op">,</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"month"</span><span class="op">:</span> <span class="st">"long"</span><span class="op">,</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"year"</span><span class="op">:</span> <span class="st">"numeric"</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-19-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-19-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-19-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-19-4" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb29" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb29-0"><a href="#cb29-0" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;div&gt;</span><span class="sc">${</span>git_history_table<span class="sc">}</span><span class="vs">&lt;/div&gt;`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-20" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb30" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb30-0"><a href="#cb30-0" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;div&gt;</span><span class="sc">${</span>git_history_plot<span class="sc">}</span><span class="vs">&lt;/div&gt;`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-21" data-nodetype="expression">

</div>
</div>
</div>
<table class="commit-table" border="1">
<thead>
<tr>
<th>
SHA
</th>
<th>
Date
</th>
<th>
Author
</th>
<th>
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/linogaliana/python-datascientist/commit/0b35e230">0b35e230</a>
</td>
<td>
2024-09-23 20:16:39
</td>
<td>
lgaliana
</td>
<td>
Correction typo mise en forme anglais/français
</td>
</tr>
<tr>
<td>
<a href="https://github.com/linogaliana/python-datascientist/commit/c641de05">c641de05</a>
</td>
<td>
2024-08-22 11:37:13
</td>
<td>
Lino Galiana
</td>
<td>
A series of fix for notebooks that were bugging (#545)
</td>
</tr>
<tr>
<td>
<a href="https://github.com/linogaliana/python-datascientist/commit/4be74ea8">4be74ea8</a>
</td>
<td>
2024-08-21 17:32:34
</td>
<td>
Lino Galiana
</td>
<td>
Fix a few buggy notebooks (#544)
</td>
</tr>
<tr>
<td>
<a href="https://github.com/linogaliana/python-datascientist/commit/d4b0ae41">d4b0ae41</a>
</td>
<td>
2024-08-09 15:04:31
</td>
<td>
Lino Galiana
</td>
<td>
Geopandas en Anglais (#537)
</td>
</tr>
<tr>
<td>
<a href="https://github.com/linogaliana/python-datascientist/commit/72f42bb7">72f42bb7</a>
</td>
<td>
2024-07-25 19:06:38
</td>
<td>
Lino Galiana
</td>
<td>
Language message on notebooks (#529)
</td>
</tr>
<tr>
<td>
<a href="https://github.com/linogaliana/python-datascientist/commit/195dc9e9">195dc9e9</a>
</td>
<td>
2024-07-25 11:59:19
</td>
<td>
linogaliana
</td>
<td>
Switch language button
</td>
</tr>
<tr>
<td>
<a href="https://github.com/linogaliana/python-datascientist/commit/3660ca8b">3660ca8b</a>
</td>
<td>
2024-07-24 13:19:04
</td>
<td>
Lino Galiana
</td>
<td>
Version anglaise de l’intro à Geopandas (#528)
</td>
</tr>
<tr>
<td>
<a href="https://github.com/linogaliana/python-datascientist/commit/065b0abd">065b0abd</a>
</td>
<td>
2024-07-08 11:19:43
</td>
<td>
Lino Galiana
</td>
<td>
Nouveaux callout dans la partie manipulation (#513)
</td>
</tr>
<tr>
<td>
<a href="https://github.com/linogaliana/python-datascientist/commit/a3dc832c">a3dc832c</a>
</td>
<td>
2024-06-24 16:15:19
</td>
<td>
Lino Galiana
</td>
<td>
Improve homepage images (#508)
</td>
</tr>
<tr>
<td>
<a href="https://github.com/linogaliana/python-datascientist/commit/16b10217">16b10217</a>
</td>
<td>
2024-05-27 14:11:57
</td>
<td>
lgaliana
</td>
<td>
Typo dans le chapitre geopandas
</td>
</tr>
<tr>
<td>
<a href="https://github.com/linogaliana/python-datascientist/commit/91bfa525">91bfa525</a>
</td>
<td>
2024-05-27 15:01:32
</td>
<td>
Lino Galiana
</td>
<td>
Restructuration partie geopandas (#500)
</td>
</tr>
</tbody>
</table>
</details>
<div class="cell hidden">
<div class="sourceCode cell-code hidden" id="cb31" data-startfrom="1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>git_history_table <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">table</span>(</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  table_commit<span class="op">,</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">format</span><span class="op">:</span> {</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">SHA</span><span class="op">:</span> x <span class="kw">=&gt;</span> <span class="fu">md</span><span class="vs">`[</span><span class="sc">${</span>x<span class="sc">}</span><span class="vs">](</span><span class="sc">${</span>github_repo<span class="sc">}</span><span class="vs">/commit/</span><span class="sc">${</span>x<span class="sc">}</span><span class="vs">)`</span><span class="op">,</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Description</span><span class="op">:</span> x <span class="kw">=&gt;</span> <span class="fu">md</span><span class="vs">`</span><span class="sc">${</span><span class="fu">replacePullRequestPattern</span>(x<span class="op">,</span> github_repo)<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>      <span class="co">/*Date: x =&gt; x.toLocaleString("fr", {</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="co">        "month": "numeric",</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="co">        "day": "numeric",</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="co">        "year": "numeric"</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="co">        })</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="co">      */</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div id="ojs-cell-22" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell hidden">
<div class="sourceCode cell-code hidden" id="cb32" data-startfrom="1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>git_history_plot <span class="op">=</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span>]<span class="op">,</span> {<span class="dt">stroke</span><span class="op">:</span> <span class="st">"royalblue"</span>})<span class="op">,</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">dot</span>(</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>          table_commit<span class="op">,</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>          Plot<span class="op">.</span><span class="fu">pointerX</span>({<span class="dt">x</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Date</span>(d<span class="op">.</span><span class="at">date</span>)<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"red"</span>}))<span class="op">,</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">dot</span>(table_commit<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Date</span>(d<span class="op">.</span><span class="at">Date</span>)<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"royalblue"</span>})</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div id="ojs-cell-23" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb33" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb33-0"><a href="#cb33-0" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">replacePullRequestPattern</span>(inputString<span class="op">,</span> githubRepo) {</span>
<span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Use a regular expression to match the pattern #digit</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> pattern <span class="op">=</span> <span class="ss">/#</span><span class="sc">(\d+)</span><span class="ss">/g</span><span class="op">;</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Replace the pattern with ${github_repo}/pull/#digit</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> replacedString <span class="op">=</span> inputString<span class="op">.</span><span class="fu">replace</span>(pattern<span class="op">,</span> <span class="st">'[#$1]('</span> <span class="op">+</span> githubRepo <span class="op">+</span> <span class="st">'/pull/$1)'</span>)<span class="op">;</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> replacedString<span class="op">;</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-24" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb34" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb34-0"><a href="#cb34-0" aria-hidden="true" tabindex="-1"></a>github_repo <span class="op">=</span> <span class="st">"https://github.com/linogaliana/python-datascientist"</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-25" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb35" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb35-0"><a href="#cb35-0" aria-hidden="true" tabindex="-1"></a>table_commit <span class="op">=</span> {</span>
<span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Get the HTML table by its class name</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> table <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">querySelector</span>(<span class="st">'.commit-table'</span>)<span class="op">;</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">// Check if the table exists</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (table) {</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Initialize an array to store the table data</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> dataArray <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Extract headers from the first row</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> headers <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> table<span class="op">.</span><span class="at">rows</span>[<span class="dv">0</span>]<span class="op">.</span><span class="at">cells</span><span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>        headers<span class="op">.</span><span class="fu">push</span>(table<span class="op">.</span><span class="at">rows</span>[<span class="dv">0</span>]<span class="op">.</span><span class="at">cells</span>[i]<span class="op">.</span><span class="at">textContent</span><span class="op">.</span><span class="fu">trim</span>())<span class="op">;</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Iterate through the rows, starting from the second row</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> table<span class="op">.</span><span class="at">rows</span><span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> row <span class="op">=</span> table<span class="op">.</span><span class="at">rows</span>[i]<span class="op">;</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> rowData <span class="op">=</span> {}<span class="op">;</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Iterate through the cells in the row</span></span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (<span class="kw">var</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> row<span class="op">.</span><span class="at">cells</span><span class="op">.</span><span class="at">length</span><span class="op">;</span> j<span class="op">++</span>) {</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Use headers as keys and cell content as values</span></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>            rowData[headers[j]] <span class="op">=</span> row<span class="op">.</span><span class="at">cells</span>[j]<span class="op">.</span><span class="at">textContent</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Push the rowData object to the dataArray</span></span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a>        dataArray<span class="op">.</span><span class="fu">push</span>(rowData)<span class="op">;</span></span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> dataArray</span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-26" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell hidden">
<div class="sourceCode cell-code hidden" id="cb36" data-startfrom="1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Get the element with class 'git-details'</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> gitDetails <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">querySelector</span>(<span class="st">'.commit-table'</span>)<span class="op">;</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Check if the element exists</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (gitDetails) {</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Hide the element</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>      gitDetails<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span> <span class="op">=</span> <span class="st">'none'</span><span class="op">;</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div id="ojs-cell-27" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb37" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb37-0"><a href="#cb37-0" aria-hidden="true" tabindex="-1"></a>Plot <span class="op">=</span> <span class="pp">require</span>(<span class="st">'@observablehq/plot@0.6.12/dist/plot.umd.min.js'</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-28" data-nodetype="declaration">

</div>
</div>
</div>


<div class="hidden" aria-hidden="true">
<span class="glightbox-desc lightbox-desc-5">Les différents types de projection</span>
<span class="glightbox-desc lightbox-desc-6"><em>Exemple de reprojection de pays depuis le site <a href="https://thetruesize.com/">thetruesize.com</a></em></span>
<span class="glightbox-desc lightbox-desc-7">Figure&nbsp;4.1: “Don’t trust the Mercator projection” sur <code>Reddit</code></span>
<span class="glightbox-desc lightbox-desc-8"><em>Image empruntée à XKCD <a href="https://xkcd.com/2256/" class="uri">https://xkcd.com/2256/</a> qu’on peut également trouver sur <a href="https://blog.chrislansdown.com/2020/01/17/a-great-map-projection-joke/" class="uri">https://blog.chrislansdown.com/2020/01/17/a-great-map-projection-joke/</a></em></span>
</div>

</section>
</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Retour au sommet</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">Les références</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-chen2008brief" class="csl-entry" role="listitem">
Chen, Chun-houh, Wolfgang Härdle, Antony Unwin, et Michael Friendly. 2008. <span>«&nbsp;A brief history of data visualization&nbsp;»</span>. <em>Handbook of data visualization</em>, 15‑56.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Notes de bas de page</h2>

<ol>
<li id="fn1"><p>Despite all its limitations, which we will revisit, the choropleth map is nonetheless informative. Knowing how to produce one quickly to grasp the main structuring facts of a dataset is particularly useful.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>This map is not too neat; it’s normal. We will see how to make beautiful maps later.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>In <a href="https://www.insee.fr/en/statistiques/4925202">this working paper</a> on mobile phone data, it is shown that this approach is not without bias in phenomena where the spatial proximity hypothesis is overly simplistic.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@book{galiana2023,
  author = {Galiana, Lino},
  title = {Python pour la data science},
  date = {2023},
  url = {https://pythonds.linogaliana.fr/},
  doi = {10.5281/zenodo.8229676},
  langid = {fr}
}
</code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">Veuillez citer ce travail comme suit&nbsp;:</div><div id="ref-galiana2023" class="csl-entry quarto-appendix-citeas" role="listitem">
Galiana, Lino. 2023. <em>Python pour la data science</em>. <a href="https://doi.org/10.5281/zenodo.8229676">https://doi.org/10.5281/zenodo.8229676</a>.
</div></div></section></div></main> <!-- /main -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZShcIi5odG1sXCIsIFwiLnFtZFwiKTtcbnBhdGhfbW9kaWZpZWQgPSAocGF0aC5pbmNsdWRlcygnZW4vY29udGVudCcpKSA/IHBhdGgucmVwbGFjZSgnZW4vY29udGVudCcsICdjb250ZW50L2VuJykgOiBwYXRoXG5odG1sYCR7cHJpbnRCYWRnZXMoe2ZwYXRoOiBwYXRoX21vZGlmaWVkfSl9YFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiaHRtbGA8ZGl2PiR7Z2V0Q29uZGl0aW9uYWxIVE1MKHBhdGgsIHRydWUpfTwvZGl2PmBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImZ1bmN0aW9uIGlzQmV0d2VlblNlcHRBbmREZWMoKSB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCA4LCAxKTsgLy8gU2VwdGVtYmVyIDFzdCAobW9udGggaXMgemVyby1pbmRleGVkKVxuICAgIGNvbnN0IGVuZCA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCAxMSwgMjQpOyAvLyBEZWNlbWJlciAyNHRoIChtb250aCBpcyB6ZXJvLWluZGV4ZWQpXG4gICAgXG4gICAgcmV0dXJuIG5vdyA+PSBzdGFydCAmJiBub3cgPD0gZW5kO1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC00IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZnVuY3Rpb24gZ2V0Q29uZGl0aW9uYWxIVE1MKHBhdGgsIHByaW50KSB7XG4gICAgaWYgKHByaW50ID09PSBmYWxzZSkgcmV0dXJuIGBgXG4gICAgaWYgKGlzQmV0d2VlblNlcHRBbmREZWMoKSkge1xuICAgICAgICByZXR1cm4gbWRgPGk+TGEgY29ycmVjdGlvbiBzZXJhIHZpc2libGUgcHJvY2hhaW5lbWVudCBzdXIgY2V0dGUgcGFnZS4gRW4gYXR0ZW5kYW50LCBsYSBsaXN0ZSBkZXMgY29ycmVjdGlvbnMgZMOpasOgIGFjY2Nlc3NpYmxlcyBlc3QgW2ljaV0oL2NvbnRlbnQvYW5uZXhlcy9jb3JyZWN0aW9ucy5odG1sKTwvaT5gOyAvLyBSZXR1cm4gYW4gZW1wdHkgc3RyaW5nIGlmIG5vdCBiZXR3ZWVuIHRoZSBkYXRlc1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8ZGV0YWlscz5cbiAgICAgICAgICAgIDxzdW1tYXJ5PlxuICAgICAgICAgICAgICAgIFBvdXIgb3V2cmlyIGxhIHZlcnNpb24gY29ycmlnw6llIHNvdXMgZm9ybWUgZGUgPGk+bm90ZWJvb2s8L2k+XG4gICAgICAgICAgICA8L3N1bW1hcnk+XG4gICAgICAgICAgICAke3ByaW50QmFkZ2VzKHsgZnBhdGg6IHBhdGgsIGNvcnJlY3Rpb246IHRydWUgfSl9XG4gICAgICAgIDwvZGV0YWlscz5cbiAgICAgICAgYDtcbiAgICB9XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTUiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJmdW5jdGlvbiByZW5kZXJDb3JyZWN0aW9uKHsgZnBhdGgsIGNvcnJlY3Rpb24gfSkge1xuICAgIGlmIChjb3JyZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBodG1sYCR7cHJpbnRCYWRnZXMoeyBmcGF0aDogZnBhdGgsIGNvcnJlY3Rpb246IHRydWUgfSl9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gaHRtbGA8aT5MYSBjb3JyZWN0aW9uIHNlcmEgdmlzaWJsZSBwcm9jaGFpbmVtZW50IHN1ciBjZXR0ZSBwYWdlLjwvaT5gO1xuICAgIH1cbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImZ1bmN0aW9uIHJlbWluZGVyQmFkZ2VzKHtcbiAgICBzb3VyY2VGaWxlID0gXCJjb250ZW50LzAxX3RvdG8uUm1kXCIsXG4gICAgdHlwZSA9IFsnbWQnLCAnaHRtbCddLFxuICAgIHNwbGl0ID0gbnVsbCxcbiAgICBvbnl4aWFPbmx5ID0gZmFsc2UsXG4gICAgc3NwQ2xvdWRTZXJ2aWNlID0gXCJweXRob25cIixcbiAgICBHUFUgPSBmYWxzZSxcbiAgICBjb3JyZWN0aW9uID0gZmFsc2Vcbn0gPSB7fSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgICAgIHR5cGUgPSB0eXBlWzBdO1xuICAgIH1cblxuICAgIGxldCBub3RlYm9vayA9IHNvdXJjZUZpbGUucmVwbGFjZSgvKC5SbWR8LnFtZCkvLCBcIi5pcHluYlwiKTtcbiAgICBpZiAoY29ycmVjdGlvbikge1xuICAgICAgICBub3RlYm9vayA9IG5vdGVib29rLnJlcGxhY2UoL2NvbnRlbnQvLCBcImNvcnJlY3Rpb25zXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5vdGVib29rID0gbm90ZWJvb2sucmVwbGFjZSgvY29udGVudC8sIFwibm90ZWJvb2tzXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGdpdGh1YlJlcG9Ob3RlYm9va3NTaW1wbGlmaWVkID0gXCJnaXRodWIvbGlub2dhbGlhbmEvcHl0aG9uLWRhdGFzY2llbnRpc3Qtbm90ZWJvb2tzXCI7XG4gICAgY29uc3QgZ2l0aHViQWxpYXMgPSBnaXRodWJSZXBvTm90ZWJvb2tzU2ltcGxpZmllZC5yZXBsYWNlKFwiZ2l0aHViXCIsIFwiZ2l0aHViLmNvbVwiKTtcbiAgICBjb25zdCBnaXRodWJSZXBvTm90ZWJvb2tzID0gYGh0dHBzOi8vJHtnaXRodWJBbGlhc31gO1xuXG4gICAgbGV0IGdpdGh1YkxpbmsgO1xuXG4gICAgaWYgKG5vdGVib29rID09PSBcIlwiKSB7XG4gICAgICAgIGdpdGh1YkxpbmsgPSBnaXRodWJSZXBvTm90ZWJvb2tzO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGdpdGh1YkxpbmsgPSBgJHtnaXRodWJSZXBvTm90ZWJvb2tzfS9ibG9iL21haW5gO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdGVib29rUmVsUGF0aCA9IGAvJHtub3RlYm9va31gO1xuICAgIGNvbnN0IFtzZWN0aW9uLCBjaGFwdGVyXSA9IG5vdGVib29rLnNwbGl0KFwiL1wiKS5zbGljZSgtMik7XG5cbiAgICBnaXRodWJMaW5rID0gYDxhIGhyZWY9XCIke2dpdGh1Ykxpbmt9JHtub3RlYm9va1JlbFBhdGh9XCIgY2xhc3M9XCJnaXRodWJcIj48aSBjbGFzcz1cImZhYiBmYS1naXRodWJcIj48L2k+PC9hPmA7XG5cbiAgICBsZXQgc2VjdGlvbkxhdGVzdCA9IHNlY3Rpb24uc3BsaXQoXCIvXCIpLnNsaWNlKC0xKVswXTtcbiAgICBjb25zdCBjaGFwdGVyTm9FeHRlbnNpb24gPSBjaGFwdGVyLnJlcGxhY2UoXCIuaXB5bmJcIiwgXCJcIik7XG4gICAgXG4gICAgaWYgKHNvdXJjZUZpbGUuaW5jbHVkZXMoJ2VuLycpKSB7XG4gICAgICAgIHNlY3Rpb25MYXRlc3QgPSBgZW4vJHtzZWN0aW9uTGF0ZXN0fWA7XG4gICAgfVxuXG4gICAgY29uc3Qgb255eGlhSW5pdEFyZ3MgPSBbc2VjdGlvbkxhdGVzdCwgY2hhcHRlck5vRXh0ZW5zaW9uXTtcblxuICAgIGlmIChjb3JyZWN0aW9uKSB7XG4gICAgICAgIG9ueXhpYUluaXRBcmdzLnB1c2goXCJjb3JyZWN0aW9uXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGdwdVN1ZmZpeCA9IEdQVSA/IFwiLWdwdVwiIDogXCJcIjtcblxuICAgIGNvbnN0IHNzcGNsb3VkSnVweXRlckxpbmtMYXVuY2hlciA9IGBodHRwczovL2RhdGFsYWIuc3NwY2xvdWQuZnIvbGF1bmNoZXIvaWRlL2p1cHl0ZXItJHtzc3BDbG91ZFNlcnZpY2V9JHtncHVTdWZmaXh9P2F1dG9MYXVuY2g9dHJ1ZSZvbnl4aWEuZnJpZW5kbHlOYW1lPSVDMiVBQiR7Y2hhcHRlck5vRXh0ZW5zaW9ufSVDMiVCQiZpbml0LnBlcnNvbmFsSW5pdD0lQzIlQUJodHRwcyUzQSUyRiUyRnJhdy5naXRodWJ1c2VyY29udGVudC5jb20lMkZsaW5vZ2FsaWFuYSUyRnB5dGhvbi1kYXRhc2NpZW50aXN0JTJGbWFzdGVyJTJGc3NwY2xvdWQlMkZpbml0LWp1cHl0ZXIuc2glQzIlQkImaW5pdC5wZXJzb25hbEluaXRBcmdzPSVDMiVBQiR7b255eGlhSW5pdEFyZ3Muam9pbignJTIwJyl9JUMyJUJCJnNlY3VyaXR5LmFsbG93bGlzdC5lbmFibGVkPWZhbHNlYDtcblxuICAgIGxldCBzc3BjbG91ZEp1cHl0ZXJMaW5rO1xuICAgIGlmICh0eXBlID09PSBcIm1kXCIpIHtcbiAgICAgICAgc3NwY2xvdWRKdXB5dGVyTGluayA9IGBbIVtPbnl4aWFdKGh0dHBzOi8vaW1nLnNoaWVsZHMuaW8vYmFkZ2UvU1NQJTIwQ2xvdWQtVGVzdGVyX2F2ZWNfSnVweXRlci1vcmFuZ2U/bG9nbz1KdXB5dGVyJmxvZ29Db2xvcj1vcmFuZ2UpXSgke3NzcGNsb3VkSnVweXRlckxpbmtMYXVuY2hlcn0pYDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzc3BjbG91ZEp1cHl0ZXJMaW5rID0gYDxhIGhyZWY9XCIke3NzcGNsb3VkSnVweXRlckxpbmtMYXVuY2hlcn1cIiB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub29wZW5lclwiPjxpbWcgc3JjPVwiaHR0cHM6Ly9pbWcuc2hpZWxkcy5pby9iYWRnZS9TU1AlMjBDbG91ZC1UZXN0ZXJfYXZlY19KdXB5dGVyLW9yYW5nZT9sb2dvPUp1cHl0ZXImbG9nb0NvbG9yPW9yYW5nZVwiIGFsdD1cIk9ueXhpYVwiPjwvYT5gO1xuICAgIH1cblxuICAgIGlmIChzcGxpdCA9PT0gNCkge1xuICAgICAgICBzc3BjbG91ZEp1cHl0ZXJMaW5rICs9ICc8YnI+JztcbiAgICB9XG5cbiAgICBjb25zdCBzc3BjbG91ZFZzY29kZUxpbmtMYXVuY2hlciA9IGBodHRwczovL2RhdGFsYWIuc3NwY2xvdWQuZnIvbGF1bmNoZXIvaWRlL3ZzY29kZS0ke3NzcENsb3VkU2VydmljZX0ke2dwdVN1ZmZpeH0/YXV0b0xhdW5jaD10cnVlJm9ueXhpYS5mcmllbmRseU5hbWU9JUMyJUFCJHtjaGFwdGVyTm9FeHRlbnNpb259JUMyJUJCJmluaXQucGVyc29uYWxJbml0PSVDMiVBQmh0dHBzJTNBJTJGJTJGcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSUyRmxpbm9nYWxpYW5hJTJGcHl0aG9uLWRhdGFzY2llbnRpc3QlMkZtYXN0ZXIlMkZzc3BjbG91ZCUyRmluaXQtdnNjb2RlLnNoJUMyJUJCJmluaXQucGVyc29uYWxJbml0QXJncz0lQzIlQUIke29ueXhpYUluaXRBcmdzLmpvaW4oJyUyMCcpfSVDMiVCQiZzZWN1cml0eS5hbGxvd2xpc3QuZW5hYmxlZD1mYWxzZWA7XG5cbiAgICBsZXQgc3NwY2xvdWRWc2NvZGVMaW5rO1xuICAgIGlmICh0eXBlID09PSBcIm1kXCIpIHtcbiAgICAgICAgc3NwY2xvdWRWc2NvZGVMaW5rID0gYFshW09ueXhpYV0oaHR0cHM6Ly9pbWcuc2hpZWxkcy5pby9iYWRnZS9TU1AlMjBDbG91ZC1UZXN0ZXJfYXZlY19WU0NvZGUtYmx1ZT9sb2dvPXZpc3VhbHN0dWRpb2NvZGUmbG9nb0NvbG9yPWJsdWUpXSgke3NzcGNsb3VkVnNjb2RlTGlua0xhdW5jaGVyfSlgO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHNzcGNsb3VkVnNjb2RlTGluayA9IGA8YSBocmVmPVwiJHtzc3BjbG91ZFZzY29kZUxpbmtMYXVuY2hlcn1cIiB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub29wZW5lclwiPjxpbWcgc3JjPVwiaHR0cHM6Ly9pbWcuc2hpZWxkcy5pby9iYWRnZS9TU1AlMjBDbG91ZC1UZXN0ZXJfYXZlY19WU0NvZGUtYmx1ZT9sb2dvPXZpc3VhbHN0dWRpb2NvZGUmbG9nb0NvbG9yPWJsdWVcIiBhbHQ9XCJPbnl4aWFcIj48L2E+YDtcbiAgICB9XG5cbiAgICBpZiAoc3BsaXQgPT09IDUpIHtcbiAgICAgICAgc3NwY2xvdWRWc2NvZGVMaW5rICs9ICc8YnI+JztcbiAgICB9XG5cbiAgICBsZXQgY29sYWJMaW5rO1xuICAgIGlmICh0eXBlID09PSBcIm1kXCIpIHtcbiAgICAgICAgY29sYWJMaW5rID0gYFshW09wZW4gSW4gQ29sYWJdKGh0dHBzOi8vY29sYWIucmVzZWFyY2guZ29vZ2xlLmNvbS9hc3NldHMvY29sYWItYmFkZ2Uuc3ZnKV0oaHR0cDovL2NvbGFiLnJlc2VhcmNoLmdvb2dsZS5jb20vJHtnaXRodWJSZXBvTm90ZWJvb2tzU2ltcGxpZmllZH0vYmxvYi9tYWluJHtub3RlYm9va1JlbFBhdGh9KWA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29sYWJMaW5rID0gYDxhIGhyZWY9XCJodHRwczovL2NvbGFiLnJlc2VhcmNoLmdvb2dsZS5jb20vJHtnaXRodWJSZXBvTm90ZWJvb2tzU2ltcGxpZmllZH0vYmxvYi9tYWluJHtub3RlYm9va1JlbFBhdGh9XCIgdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9vcGVuZXJcIj48aW1nIHNyYz1cImh0dHBzOi8vY29sYWIucmVzZWFyY2guZ29vZ2xlLmNvbS9hc3NldHMvY29sYWItYmFkZ2Uuc3ZnXCIgYWx0PVwiT3BlbiBJbiBDb2xhYlwiPjwvYT5gO1xuICAgIH1cblxuICAgIGlmIChzcGxpdCA9PT0gNykge1xuICAgICAgICBjb2xhYkxpbmsgKz0gJzxicj4nO1xuICAgIH1cblxuICAgIGxldCB2c2NvZGVMaW5rO1xuICAgIGlmICh0eXBlID09PSBcIm1kXCIpIHtcbiAgICAgICAgdnNjb2RlTGluayA9IGBbIVtnaXRodWJkZXZdKGh0dHBzOi8vaW1nLnNoaWVsZHMuaW8vc3RhdGljL3YxP2xvZ289dmlzdWFsc3R1ZGlvY29kZSZsYWJlbD0mbWVzc2FnZT1PcGVuJTIwaW4lMjBWaXN1YWwgU3R1ZGlvIENvZGUmbGFiZWxDb2xvcj0yYzJjMzImY29sb3I9MDA3YWNjJmxvZ29Db2xvcj0wMDdhY2MpXShodHRwczovL2dpdGh1Yi5kZXYvbGlub2dhbGlhbmEvcHl0aG9uLWRhdGFzY2llbnRpc3Qtbm90ZWJvb2tzJHtub3RlYm9va1JlbFBhdGh9KWA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdnNjb2RlTGluayA9IGA8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuZGV2L2xpbm9nYWxpYW5hL3B5dGhvbi1kYXRhc2NpZW50aXN0LW5vdGVib29rcyR7bm90ZWJvb2tSZWxQYXRofVwiIHRhcmdldD1cIl9ibGFua1wiIHJlbD1cIm5vb3BlbmVyXCI+PGltZyBzcmM9XCJodHRwczovL2ltZy5zaGllbGRzLmlvL3N0YXRpYy92MT9sb2dvPXZpc3VhbHN0dWRpb2NvZGUmbGFiZWw9Jm1lc3NhZ2U9T3BlbiUyMGluJTIwVmlzdWFsJTIwU3R1ZGlvJTIwQ29kZSZsYWJlbENvbG9yPTJjMmMzMiZjb2xvcj0wMDdhY2MmbG9nb0NvbG9yPTAwN2FjY1wiIGFsdD1cImdpdGh1YmRldlwiPjwvYT48L3A+YDtcbiAgICB9XG5cbiAgICBjb25zdCBiYWRnZXMgPSBbXG4gICAgICAgIGdpdGh1YkxpbmssXG4gICAgICAgIHNzcGNsb3VkVnNjb2RlTGluayxcbiAgICAgICAgc3NwY2xvdWRKdXB5dGVyTGlua1xuICAgIF07XG5cbiAgICBpZiAoIW9ueXhpYU9ubHkpIHtcbiAgICAgICAgYmFkZ2VzLnB1c2goY29sYWJMaW5rKTtcbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0ID0gYmFkZ2VzLmpvaW4oXCJcXG5cIik7XG5cbiAgICBpZiAodHlwZSA9PT0gXCJodG1sXCIpIHtcbiAgICAgICAgcmVzdWx0ID0gYDxwIGNsYXNzPVwiYmFkZ2VzXCI+JHtyZXN1bHR9PC9wPmA7XG4gICAgfVxuXG4gICAgaWYgKG9ueXhpYU9ubHkpIHtcbiAgICAgICAgcmVzdWx0ID0gYCR7c3NwY2xvdWRKdXB5dGVyTGlua30ke3NzcGNsb3VkVnNjb2RlTGlua31gO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cblxuZnVuY3Rpb24gcHJpbnRCYWRnZXMoe1xuICAgIGZwYXRoLFxuICAgIG9ueXhpYU9ubHkgPSBmYWxzZSxcbiAgICBzcGxpdCA9IDUsXG4gICAgdHlwZSA9IFwiaHRtbFwiLFxuICAgIHNzcENsb3VkU2VydmljZSA9IFwicHl0aG9uXCIsXG4gICAgR1BVID0gZmFsc2UsXG4gICAgY29ycmVjdGlvbiA9IGZhbHNlXG59ID0ge30pIHtcbiAgICBjb25zdCBiYWRnZXMgPSByZW1pbmRlckJhZGdlcyh7XG4gICAgICAgIHNvdXJjZUZpbGU6IGZwYXRoLFxuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICBzcGxpdDogc3BsaXQsXG4gICAgICAgIG9ueXhpYU9ubHk6IG9ueXhpYU9ubHksXG4gICAgICAgIHNzcENsb3VkU2VydmljZTogc3NwQ2xvdWRTZXJ2aWNlLFxuICAgICAgICBHUFU6IEdQVSxcbiAgICAgICAgY29ycmVjdGlvbjogY29ycmVjdGlvblxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGJhZGdlc1xufVxuXG4vLyBFeGFtcGxlIHVzYWdlOlxuLy8gcHJpbnRCYWRnZXMoeyBmcGF0aDogXCJjb250ZW50L2dldHRpbmctc3RhcnRlZC8wNV9yYXBwZWxzX3R5cGVzLnFtZFwiLCBvbnl4aWFPbmx5OiBmYWxzZSwgc3BsaXQ6IDUsIHR5cGU6IFwiaHRtbFwiLCBzc3BDbG91ZFNlcnZpY2U6IFwicHl0aG9uXCIsIEdQVTogZmFsc2UsIGNvcnJlY3Rpb246IGZhbHNlIH0pO1xuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC03IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiaHRtbGA8ZGl2PiR7Y29udGFpbmVyX3Byb2plY3Rpb259PC9kaXY+YFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC04IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiY29udGFpbmVyX3Byb2plY3Rpb24gPSBodG1sYDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgIDxkaXYgY2xhc3M9XCJwcm9qZWN0aW9uXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwicHJvamVjdGlvbi1sYWJlbFwiPkNob2lzaXIgdW5lIHByb2plY3Rpb248L2Rpdj5cbiAgICAgICR7dmlld29mIHByb2plY3Rpb259XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgPGRpdiBjbGFzcz1cInByb2plY3RlZE1hcFwiPlxuICAgICAgJHtwcm9qZWN0ZWRNYXB9XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9kaXY+YFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC05IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoidmlld29mIHByb2plY3Rpb24gPSBwcm9qZWN0aW9uSW5wdXQoe1xuICBuYW1lOiBcIlwiLFxuICB2YWx1ZTogXCJNZXJjYXRvclwiXG59KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImltcG9ydCB7cHJvamVjdGlvbklucHV0fSBmcm9tIFwiQGZpbC9kMy1wcm9qZWN0aW9uc1wiXG5pbXBvcnQge21hcH0gZnJvbSBcIkBsaW5vZ2FsaWFuYS9iYXNlLW1hcFwiXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTExIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoicHJvamVjdGVkTWFwID0gbWFwKHByb2plY3Rpb24sXG4gICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgLy9zdmc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcHJvamVjdGlvbi5vcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoX3Byb2plY3RlZF9tYXAsXG4gICAgICAgICAgICAgICAgICAgICAvL2hlaWdodDogMzAwLFxuICAgICAgICAgICAgICAgICAgICAgLy9yb3RhdGU6IFswLCAtOTBdLFxuICAgICAgICAgICAgICAgICAgICAgLy9pbmVydGlhOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgc2hvd19lcXVhdG9yOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjZjFmMGViXCJcbiAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgLy9zaG93X3N0cnVjdHVyZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgIH0pXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEyIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoid2lkdGhfcHJvamVjdGVkX21hcCA9IHNjcmVlbi53aWR0aC8yXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEzIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiaHRtbGA8ZGl2IGNsYXNzPVwiZ3JpZC1jb250YWluZXJcIj5cbiAgPGRpdiBjbGFzcz1cInZpZXdvZi1wcm9qZWN0aW9uXCI+JHt2aWV3b2YgcHJvamVjdGlvbkJlcnRpbn08L2Rpdj5cbiAgPGRpdiBjbGFzcz1cInZpZXdvZi1teWNvdW50cnlcIj4ke3ZpZXdvZiBteWNvdW50cnl9PC9kaXY+XG4gIDxkaXYgY2xhc3M9XCJtYXAtYmVydGluXCI+JHttYXBCZXJ0aW59PC9kaXY+XG48L2Rpdj5gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE0IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiaW1wb3J0IHttYXAgYXMgbWFwQmVydGluLCB2aWV3b2YgcHJvamVjdGlvbiBhcyBwcm9qZWN0aW9uQmVydGluLCB2aWV3b2YgbXljb3VudHJ5fSBmcm9tIFwiQG5lb2NhcnRvY25ycy9pbXBhY3Qtb2YtcHJvamVjdGlvbnMtb24tYXJlYXNcIlxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xNSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Imh0bWxgPGRpdiBjbGFzcz1cImNlbnRlcmVkXCI+JHtzcGlsaGF1c308L2Rpdj5gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE2IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoic3BpbGhhdXMgPSB7XG4gIGNvbnN0IHdpZHRoID0gNjAwO1xuICBjb25zdCBoZWlnaHQgPSB3aWR0aDtcblxuICBjb25zdCBjb250ZXh0ID0gRE9NLmNvbnRleHQyZCh3aWR0aCwgaGVpZ2h0KTtcbiAgY29uc3QgcHJvamVjdGlvbiA9IGQzLmdlb1N0ZXJlb2dyYXBoaWMoKVxuICAgIC5yb3RhdGUoWzk1LCA0NV0pXG4gICAgLnRyYW5zbGF0ZShbd2lkdGggLyAyLCBoZWlnaHQgLyAyXSlcbiAgICAuc2NhbGUod2lkdGggLyAxMC4xKVxuICAgIC5jZW50ZXIoWzMwLCAtNV0pXG4gICAgLmNsaXBBbmdsZSgxNjYpO1xuICBjb25zdCBwYXRoID0gZDMuZ2VvUGF0aChwcm9qZWN0aW9uLCBjb250ZXh0KTtcblxuICBjb25zdCBsYW5kID0gdG9wb2pzb24uZmVhdHVyZSh3b3JsZCwgd29ybGQub2JqZWN0cy5sYW5kKTtcblxuICBjb250ZXh0LmxpbmVKb2luID0gXCJyb3VuZFwiO1xuICBjb250ZXh0LmxpbmVDYXAgPSBcInJvdW5kXCI7XG4gIGNvbnRleHQuZmlsbFN0eWxlID0gXCIjZjJmMWVkXCI7XG4gIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG5cbiAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgcGF0aCh7dHlwZTogXCJTcGhlcmVcIn0pO1xuICBwYXRoKGxhbmQpO1xuICBjb250ZXh0LmxpbmVXaWR0aCA9IDAuNTtcbiAgY29udGV4dC5zdHJva2UoKTtcbiAgY29udGV4dC5jbGlwKFwiZXZlbm9kZFwiKTtcblxuICBjb250ZXh0LnNhdmUoKTtcbiAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgcGF0aChsYW5kKTtcbiAgY29udGV4dC5maWx0ZXIgPSBcImJsdXIoMTJweClcIjtcbiAgY29udGV4dC5maWxsU3R5bGUgPSBcIiMwMDY5OTRcIjtcbiAgY29udGV4dC5maWxsKFwiZXZlbm9kZFwiKTtcbiAgY29udGV4dC5yZXN0b3JlKCk7XG4gIFxuICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICBwYXRoKGQzLmdlb0dyYXRpY3VsZTEwKCkpO1xuICBjb250ZXh0Lmdsb2JhbEFscGhhID0gMC4yO1xuICBjb250ZXh0LnN0cm9rZVN0eWxlID0gXCIjMDAwXCI7XG4gIGNvbnRleHQuc3Ryb2tlKCk7XG5cbiAgcmV0dXJuIGNvbnRleHQuY2FudmFzO1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Ii8vaW1wb3J0IHttYXAgYXMgc3BpbGhhdXNtYXB9IHdpdGgge2hlaWdodCwgd2lkdGh9IGZyb20gXCJAZDMvc3BpbGhhdXMtc2hvcmVsaW5lLW1hcFwiXG5pbXBvcnQgeyB3b3JsZCB9IGZyb20gXCJAZDMvc3BpbGhhdXMtc2hvcmVsaW5lLW1hcFwiXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE4IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgQ2UgZmljaGllciBhIMOpdMOpIG1vZGlmacOpIF9fJHt0YWJsZV9jb21taXQubGVuZ3RofV9fIGZvaXMgZGVwdWlzIHNhIGNyw6lhdGlvbiBsZSAke2NyZWF0aW9uX3N0cmluZ30gKGRlcm5pw6hyZSBtb2RpZmljYXRpb24gbGUgJHtsYXN0X21vZGlmaWNhdGlvbl9zdHJpbmd9KWBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTkiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJjcmVhdGlvbiA9IGQzLm1pbihcbiAgdGFibGVfY29tbWl0Lm1hcChkID0+IG5ldyBEYXRlKGQuRGF0ZSkpXG4pXG5cbmxhc3RfbW9kaWZpY2F0aW9uID0gZDMubWF4KFxuICB0YWJsZV9jb21taXQubWFwKGQgPT4gbmV3IERhdGUoZC5EYXRlKSlcbilcblxuY3JlYXRpb25fc3RyaW5nID0gY3JlYXRpb24udG9Mb2NhbGVTdHJpbmcoXCJmclwiLCB7XG4gIFwiZGF5XCI6IFwibnVtZXJpY1wiLFxuICBcIm1vbnRoXCI6IFwibG9uZ1wiLFxuICBcInllYXJcIjogXCJudW1lcmljXCJcbn0pXG5cbmxhc3RfbW9kaWZpY2F0aW9uX3N0cmluZyA9IGxhc3RfbW9kaWZpY2F0aW9uLnRvTG9jYWxlU3RyaW5nKFwiZnJcIiwge1xuICBcImRheVwiOiBcIm51bWVyaWNcIixcbiAgXCJtb250aFwiOiBcImxvbmdcIixcbiAgXCJ5ZWFyXCI6IFwibnVtZXJpY1wiXG59KVxuXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIwIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiaHRtbGA8ZGl2PiR7Z2l0X2hpc3RvcnlfdGFibGV9PC9kaXY+YFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Imh0bWxgPGRpdj4ke2dpdF9oaXN0b3J5X3Bsb3R9PC9kaXY+YFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yMiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImdpdF9oaXN0b3J5X3RhYmxlID0gSW5wdXRzLnRhYmxlKFxuICB0YWJsZV9jb21taXQsXG4gIHtcbiAgICBmb3JtYXQ6IHtcbiAgICAgIFNIQTogeCA9PiBtZGBbJHt4fV0oJHtnaXRodWJfcmVwb30vY29tbWl0LyR7eH0pYCxcbiAgICAgIERlc2NyaXB0aW9uOiB4ID0+IG1kYCR7cmVwbGFjZVB1bGxSZXF1ZXN0UGF0dGVybih4LCBnaXRodWJfcmVwbyl9YCxcbiAgICAgIC8qRGF0ZTogeCA9PiB4LnRvTG9jYWxlU3RyaW5nKFwiZnJcIiwge1xuICAgICAgICBcIm1vbnRoXCI6IFwibnVtZXJpY1wiLFxuICAgICAgICBcImRheVwiOiBcIm51bWVyaWNcIixcbiAgICAgICAgXCJ5ZWFyXCI6IFwibnVtZXJpY1wiXG4gICAgICAgIH0pXG4gICAgICAqL1xuICAgIH1cbiAgfVxuKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yMyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImdpdF9oaXN0b3J5X3Bsb3QgPSBQbG90LnBsb3Qoe1xuICBtYXJrczogW1xuICAgIFBsb3QucnVsZVkoWzBdLCB7c3Ryb2tlOiBcInJveWFsYmx1ZVwifSksXG4gICAgUGxvdC5kb3QoXG4gICAgICAgICAgdGFibGVfY29tbWl0LFxuICAgICAgICAgIFBsb3QucG9pbnRlclgoe3g6IChkKSA9PiBuZXcgRGF0ZShkLmRhdGUpLCB5OiAwLCBzdHJva2U6IFwicmVkXCJ9KSksXG4gICAgUGxvdC5kb3QodGFibGVfY29tbWl0LCB7eDogKGQpID0+IG5ldyBEYXRlKGQuRGF0ZSksIHk6IDAsIGZpbGw6IFwicm95YWxibHVlXCJ9KVxuICBdXG59KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yNCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImZ1bmN0aW9uIHJlcGxhY2VQdWxsUmVxdWVzdFBhdHRlcm4oaW5wdXRTdHJpbmcsIGdpdGh1YlJlcG8pIHtcbiAgICAvLyBVc2UgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggdGhlIHBhdHRlcm4gI2RpZ2l0XG4gICAgdmFyIHBhdHRlcm4gPSAvIyhcXGQrKS9nO1xuXG4gICAgLy8gUmVwbGFjZSB0aGUgcGF0dGVybiB3aXRoICR7Z2l0aHViX3JlcG99L3B1bGwvI2RpZ2l0XG4gICAgdmFyIHJlcGxhY2VkU3RyaW5nID0gaW5wdXRTdHJpbmcucmVwbGFjZShwYXR0ZXJuLCAnWyMkMV0oJyArIGdpdGh1YlJlcG8gKyAnL3B1bGwvJDEpJyk7XG5cbiAgICByZXR1cm4gcmVwbGFjZWRTdHJpbmc7XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTI1IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZ2l0aHViX3JlcG8gPSBcImh0dHBzOi8vZ2l0aHViLmNvbS9saW5vZ2FsaWFuYS9weXRob24tZGF0YXNjaWVudGlzdFwiXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTI2IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoidGFibGVfY29tbWl0ID0ge1xuXG4vLyBHZXQgdGhlIEhUTUwgdGFibGUgYnkgaXRzIGNsYXNzIG5hbWVcbnZhciB0YWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb21taXQtdGFibGUnKTtcblxuLy8gQ2hlY2sgaWYgdGhlIHRhYmxlIGV4aXN0c1xuaWYgKHRhYmxlKSB7XG4gICAgLy8gSW5pdGlhbGl6ZSBhbiBhcnJheSB0byBzdG9yZSB0aGUgdGFibGUgZGF0YVxuICAgIHZhciBkYXRhQXJyYXkgPSBbXTtcblxuICAgIC8vIEV4dHJhY3QgaGVhZGVycyBmcm9tIHRoZSBmaXJzdCByb3dcbiAgICB2YXIgaGVhZGVycyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFibGUucm93c1swXS5jZWxscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBoZWFkZXJzLnB1c2godGFibGUucm93c1swXS5jZWxsc1tpXS50ZXh0Q29udGVudC50cmltKCkpO1xuICAgIH1cblxuICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgcm93cywgc3RhcnRpbmcgZnJvbSB0aGUgc2Vjb25kIHJvd1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgdGFibGUucm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcm93ID0gdGFibGUucm93c1tpXTtcbiAgICAgICAgdmFyIHJvd0RhdGEgPSB7fTtcblxuICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIGNlbGxzIGluIHRoZSByb3dcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByb3cuY2VsbHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIC8vIFVzZSBoZWFkZXJzIGFzIGtleXMgYW5kIGNlbGwgY29udGVudCBhcyB2YWx1ZXNcbiAgICAgICAgICAgIHJvd0RhdGFbaGVhZGVyc1tqXV0gPSByb3cuY2VsbHNbal0udGV4dENvbnRlbnQudHJpbSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHVzaCB0aGUgcm93RGF0YSBvYmplY3QgdG8gdGhlIGRhdGFBcnJheVxuICAgICAgICBkYXRhQXJyYXkucHVzaChyb3dEYXRhKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZGF0YUFycmF5XG5cbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjciLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJcbi8vIEdldCB0aGUgZWxlbWVudCB3aXRoIGNsYXNzICdnaXQtZGV0YWlscydcbntcbiAgdmFyIGdpdERldGFpbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29tbWl0LXRhYmxlJyk7XG5cbiAgLy8gQ2hlY2sgaWYgdGhlIGVsZW1lbnQgZXhpc3RzXG4gIGlmIChnaXREZXRhaWxzKSB7XG4gICAgICAvLyBIaWRlIHRoZSBlbGVtZW50XG4gICAgICBnaXREZXRhaWxzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH1cbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjgiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJQbG90ID0gcmVxdWlyZSgnQG9ic2VydmFibGVocS9wbG90QDAuNi4xMi9kaXN0L3Bsb3QudW1kLm1pbi5qcycpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ3Byb2plY3Rpb24nKSJ9XX0=
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../content/manipulation";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/pythonds\.linogaliana\.fr");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="linogaliana/python-datascientist" data-repo-id="MDEwOlJlcG9zaXRvcnkyODAxNjE2Nzc=" data-category="General" data-category-id="DIC_kwDOELLtjc4B-5TX" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark">
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../content/manipulation/02_pandas_suite.html" class="pagination-link" aria-label="Statistiques par groupe et association de plusieurs jeux de données avec Pandas">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Statistiques par groupe et association de plusieurs jeux de données avec Pandas</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../content/manipulation/04a_webscraping_TP.html" class="pagination-link" aria-label="Web scraping avec Python">
        <span class="nav-page-text">Web scraping avec Python</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Python pour la <em>data science</em>, Lino Galiana.<br>
Licence <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i><br>
Code source disponible sur <a href="https://github.com/linogaliana/python-datascientist"><code>Github</code></a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/linogaliana/python-datascientist/edit/master/content/manipulation/03_geopandas_intro.qmd" class="toc-action"><i class="bi bi-github"></i>Modifier cette page</a></li><li><a href="https://github.com/linogaliana/python-datascientist/issues/new" class="toc-action"><i class="bi empty"></i>Faire part d'un problème</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>Site construit avec <i class="fa-brands fa-python" aria-label="python"></i> et <a href="https://quarto.org/"><code>Quarto</code></a><br>
Inspiration pour la mise en forme du site <a href="https://www.andreashandel.com">ici</a><br>
<a href="https://github.com/linogaliana/python-datascientist">Code source disponible sur <i class="fa-brands fa-github" aria-label="github"></i> <code>GitHub</code></a></p>
</div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"selector":".lightbox","closeEffect":"zoom","loop":false,"descPosition":"bottom","openEffect":"zoom"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>