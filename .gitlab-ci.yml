image: jupyter/datascience-notebook

stages:
  - test

before_script:
  - python --version
  - conda env create -n test-environment python=$TRAVIS_PYTHON_VERSION -f environment.yml
  - source activate test-environment

testmd:
  stage: test
  script:
    -  cat ./test.sh true "Rmd" | /bin/bash
  allow_failure: true
  
enonce:
  stage: test
  script:
    -  cat ./test.sh false "md" | /bin/bash
  artifacts:
    paths:
      - temp
    expire_in: 1 week


corrections:
  stage: test
  script:
    -  cat ./test.sh false "Rmd" | /bin/bash
  artifacts:
    paths:
      - temp
    expire_in: 1 week
